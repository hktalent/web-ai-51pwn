(()=>{var n={349:(e,t,Le)=>{var Ue;Ue=("undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js";e.exports=function(t){function p(){return b.buffer!=w&&v(b.buffer),J}function n(){return b.buffer!=w&&v(b.buffer),X}function P(){return b.buffer!=w&&v(b.buffer),Z}function O(){return b.buffer!=w&&v(b.buffer),Q}var W,i,a,s=t=t||{};s.ready=new Promise(function(e,t){W=e,i=t}),"undefined"!=typeof process&&process.listeners&&(a={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var L,o,r,U=Object.assign({},s),u=(e,t)=>{throw t},H="object"==typeof window,l="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h=s.ENVIRONMENT_IS_PTHREAD||!1,c="";function G(e){return s.locateFile?s.locateFile(e,c):c+e}if(d){var m=Le(256),j=Le(980);let e;c=l?j.dirname(c)+"/":"//",L=(e,t)=>(e=M(e)?new URL(e):j.normalize(e),m.readFileSync(e,t?void 0:"utf8")),r=e=>{e=L(e,!0);return e=e.buffer?e:new Uint8Array(e)},o=(e,n,a)=>{e=M(e)?new URL(e):j.normalize(e),m.readFile(e,function(e,t){e?a(e):n(t.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof A))throw e}),process.on("unhandledRejection",function(e){throw e}),u=(e,t)=>{if(y)throw process.exitCode=e,t;t instanceof A||g("exiting due to exception: "+t),process.exit(e)},s.inspect=function(){return"[Emscripten Module object]"};try{e=Le(958)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}Le.g.Worker=e.Worker}else(H||l)&&(l?c=self.location.href:"undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),c=0!==(c=void 0!==Ue&&Ue?Ue:c).indexOf("blob:")?c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1):"",d||(L=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(r=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),o=(e,t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)}));d&&"undefined"==typeof performance&&(Le.g.performance=Le(862).performance);var z=console.log.bind(console),$=console.warn.bind(console);d&&(z=e=>m.writeSync(1,e+"\n"),$=e=>m.writeSync(2,e+"\n"));var f,q=s.print||z,g=s.printErr||$;Object.assign(s,U),s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&(u=s.quit),Atomics.load,Atomics.store,Atomics.compareExchange,s.wasmBinary&&(f=s.wasmBinary);var b,V,y=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&S("no native wasm support detected");var w,K,J,X,Z,Q,Y=!1,ee="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function te(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(a<=r);)++r;if(16<r-t&&e.buffer&&ee)return ee.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(var i="";t<r;){var s,o,u=e[t++];128&u?(s=63&e[t++],192!=(224&u)?(o=63&e[t++],(u=224==(240&u)?(15&u)<<12|s<<6|o:(7&u)<<18|s<<12|o<<6|63&e[t++])<65536?i+=String.fromCharCode(u):(o=u-65536,i+=String.fromCharCode(55296|o>>10,56320|1023&o))):i+=String.fromCharCode((31&u)<<6|s)):i+=String.fromCharCode(u)}return i}function v(e){w=e,s.HEAP8=K=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=X=new Int32Array(e),s.HEAPU8=J=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=Z=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=Q=new Float64Array(e)}h&&(w=s.buffer);var ne,z=s.INITIAL_MEMORY||16777216;if(h)b=s.wasmMemory,w=s.buffer;else if(s.wasmMemory)b=s.wasmMemory;else if(!((b=new WebAssembly.Memory({initial:z/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw g("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),d&&g("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");(w=b?b.buffer:w).byteLength,v(w);var ae=[],re=[],ie=[];function se(){return y}function oe(){h||ge(re)}var _,k=0,ue=null,I=null;function S(e){s.onAbort&&s.onAbort(e),g(e="Aborted("+e+")"),Y=!0,e+=". Build with -sASSERTIONS for more info.";e=new WebAssembly.RuntimeError(e);throw i(e),e}function le(e){return e.startsWith("data:application/octet-stream;base64,")}function M(e){return e.startsWith("file://")}function de(e){try{if(e==_&&f)return new Uint8Array(f);if(r)return r(e);throw"both async and sync fetching of the wasm failed"}catch(e){S(e)}}le(_="tfjs-backend-wasm-threaded-simd.wasm")||(_=G(_));var ce={};function A(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function pe(e){e=x.pthreads[e];e||S(void 0),x.returnWorkerToPool(e)}function he(e){var t=x.getNewWorker();if(!t)return 6;x.runningWorkers.push(t),(x.pthreads[e.pthread_ptr]=t).pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{d&&t.ref(),t.postMessage(n,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function me(e){if(h)return F(1,1,e);y||(x.terminateAllThreads(),s.onExit&&s.onExit(e),Y=!0),u(e,new A(e))}function fe(e,t){if(!t&&h)throw be(e),"unwind";me(e)}var x={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){h?x.initWorker():x.initMainThread()},initMainThread:function(){for(var e=8;e--;)x.allocateUnusedWorker()},initWorker:function(){y=!1},setExitStatus:function(e){0},terminateAllThreads:function(){for(var e of Object.values(x.pthreads))x.returnWorkerToPool(e);for(var e of x.unusedWorkers)e.terminate();x.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete x.pthreads[t],x.unusedWorkers.push(e),x.runningWorkers.splice(x.runningWorkers.indexOf(e),1),e.pthread_ptr=0,d&&e.unref(),Be(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){x.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:function(r,i){r.onmessage=e=>{var t,n,e=e.data,a=e.cmd;r.pthread_ptr&&(x.currentProxiedOperationCallerThread=r.pthread_ptr),e.targetThread&&e.targetThread!=T()?(t=x.pthreads[e.targetThread])?t.postMessage(e,e.transferList):g('Internal error! Worker sent a message "'+a+'" to target pthread '+e.targetThread+", but that thread no longer exists!"):"processProxyingQueue"===a?ve(e.queue):"spawnThread"===a?he(e):"cleanupThread"===a?pe(e.thread):"killThread"===a?(t=e.thread,n=x.pthreads[t],delete x.pthreads[t],n.terminate(),Be(t),x.runningWorkers.splice(x.runningWorkers.indexOf(n),1),n.pthread_ptr=0):"cancelThread"===a?(n=e.thread,x.pthreads[n].postMessage({cmd:"cancel"})):"loaded"===a?(r.loaded=!0,d&&r.unref(),i&&i(r),r.runPthread&&r.runPthread()):"print"===a?q("Thread "+e.threadId+": "+e.text):"printErr"===a?g("Thread "+e.threadId+": "+e.text):"alert"===a?alert("Thread "+e.threadId+": "+e.text):"setimmediate"===e.target?r.postMessage(e):"callHandler"===a?s[e.handler](...e.args):a&&g("worker sent an unknown command "+a),x.currentProxiedOperationCallerThread=void 0},r.onerror=e=>{throw g("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},d&&(r.on("message",function(e){r.onmessage({data:e})}),r.on("error",function(e){r.onerror(e)}),r.on("detachedExit",function(){}));var e,t=[];for(e of["onExit","onAbort","print","printErr"])s.hasOwnProperty(e)&&t.push(e);r.postMessage({cmd:"load",handlers:t,urlOrBlob:s.mainScriptUrlOrBlob||Ue,wasmMemory:b,wasmModule:V})},allocateUnusedWorker:function(){var e=G("tfjs-backend-wasm-threaded-simd.worker.js"),e=new Worker(e);x.unusedWorkers.push(e)},getNewWorker:function(){return 0==x.unusedWorkers.length&&(x.allocateUnusedWorker(),x.loadWasmModuleToWorker(x.unusedWorkers[0])),x.unusedWorkers.pop()}};function ge(e){for(;0<e.length;)e.shift()(s)}function be(e){if(h)return F(2,0,e);try{fe(e)}catch(e){e instanceof A||"unwind"==e||u(1,e)}}s.PThread=x,s.establishStackSpace=function(){var e=T(),t=n()[e+52>>>2],e=n()[e+56>>>2];Pe(t,t-e),B(t)};var N=[];function ye(e,t,n,a){return h?F(3,1,e,t,n,a):we(e,t,n,a)}function we(e,t,n,a){var r;return"undefined"==typeof SharedArrayBuffer?(g("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6):(r=[],h&&0===r.length?ye(e,t,n,a):(t={startRoutine:n,pthread_ptr:e,arg:a,transferList:r},h?(t.cmd="spawnThread",postMessage(t,r),0):he(t)))}function ve(e){Atomics.store(n(),e>>2,1),T()&&Te(e),Atomics.compareExchange(n(),e>>2,1,0)}function E(e){E.shown||(E.shown={}),E.shown[e]||(E.shown[e]=1,g(e=d?"warning: "+e:e))}function F(i,s){var o=arguments.length-2,u=arguments,e=()=>{for(var e=o,t=C(8*e),n=t>>3,a=0;a<o;a++){var r=u[2+a];O()[n+a>>>0]=r}return Re(i,e,t,s)},t=Oe(),e=e();return B(t),e}s.invokeEntryPoint=function(e,t){(n=N[e=e])||(e>=N.length&&(N.length=e+1),N[e]=n=ne.get(e));var n,e=n(t);y?x.setExitStatus(e):Ce(e)},s.executeNotifiedProxyingQueue=ve;var $=d?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now(),_e=[];function ke(e){return h?F(4,1,e):52}function Ie(e,t,n,a,r){return h?F(5,1,e,t,n,a,r):70}var Se=[null,[],[]];function Me(e,t,n,a){if(h)return F(6,1,e,t,n,a);for(var r,i,s,o=0,u=0;u<n;u++){var l=P()[t>>>2],d=P()[t+4>>>2];t+=8;for(var c=0;c<d;c++)r=e,i=p()[l+c>>>0],s=void 0,s=Se[r],0===i||10===i?((1===r?q:g)(te(s,0)),s.length=0):s.push(i);o+=d}return P()[a>>>2]=o,0}function Ae(e){return s["_"+e]}function xe(e,t,n,a){var r={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2),a=t=C(n),r=e,i=p(),s=a;if(0<(e=n)){for(var o=(s>>>=0)+e-1,u=0;u<r.length;++u){var l=r.charCodeAt(u);if((l=55296<=l&&l<=57343?65536+((1023&l)<<10)|1023&r.charCodeAt(++u):l)<=127){if(o<=s)break;i[s++>>>0]=l}else{if(l<=2047){if(o<=s+1)break;i[s++>>>0]=192|l>>6}else{if(l<=65535){if(o<=s+2)break;i[s++>>>0]=224|l>>12}else{if(o<=s+3)break;i[s++>>>0]=240|l>>18,i[s++>>>0]=128|l>>12&63}i[s++>>>0]=128|l>>6&63}i[s++>>>0]=128|63&l}}i[s>>>0]=0}}return t},array:e=>{var t,n=C(e.length);return e=e,t=n,b.buffer!=w&&v(b.buffer),K.set(e,t>>>0),n}},e=Ae(e),i=[],s=0;if(a)for(var o=0;o<a.length;o++){var u=r[n[o]];u?(0===s&&(s=Oe()),i[o]=u(a[o])):i[o]=a[o]}var l,e=e.apply(null,i);return e=e,0!==s&&B(s),e=e,"string"===t?(l=e,(l>>>=0)?te(p(),l,void 0):""):"boolean"===t?Boolean(e):e}x.init();var D,e,R,Ne,Ee=[null,me,be,ye,ke,Ie,Me],Fe={__emscripten_init_main_thread_js:function(e){De(e,!l,1,!H),x.threadInitTLS()},__emscripten_thread_cleanup:function(e){h?postMessage({cmd:"cleanupThread",thread:e}):pe(e)},__pthread_create_js:we,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,n,a){if(e==t)setTimeout(()=>ve(a));else if(h)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:a});else{t=x.pthreads[e];if(!t)return;t.postMessage({cmd:"processProxyingQueue",queue:a})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return-1},abort:function(){S("")},emscripten_check_blocking_allowed:function(){d||l||E("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:$,emscripten_memcpy_big:function(e,t,n){p().copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_num_logical_cores:function(){return d?Le(578).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){_e.length=t;for(var a=n>>3,r=0;r<t;r++)_e[r]=O()[a+r>>>0];return(e<0?ce[-e-1]:Ee[e]).apply(null,_e)},emscripten_resize_heap:function(e){var t=p().length;if(!((e>>>=0)<=t)){var n=4294901760;if(!(n<e))for(var a=1;a<=4;a*=2){var r=t*(1+.2/a),r=Math.min(r,e+100663296);if(function(e){try{return b.grow(e-w.byteLength+65535>>>16),v(b.buffer),1}catch(e){}}(Math.min(n,(r=Math.max(e,r))+(65536-r%65536)%65536)))return!0}}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:fe,fd_close:ke,fd_seek:Ie,fd_write:Me,memory:b||s.wasmMemory},T=(function(){var t={env:Fe,wasi_snapshot_preview1:Fe};function n(e,t){var n,e=e.exports;s.asm=e,e=s.asm._emscripten_tls_init,x.tlsInitFunctions.push(e),ne=s.asm.__indirect_function_table,e=s.asm.__wasm_call_ctors,re.unshift(e),V=t,h||(n=x.unusedWorkers.length,x.unusedWorkers.forEach(function(e){x.loadWasmModuleToWorker(e,function(){var e;--n||(k--,s.monitorRunDependencies&&s.monitorRunDependencies(k),0==k&&(null!==ue&&(clearInterval(ue),ue=null),I)&&(e=I,I=null,e()))})}))}function a(e){n(e.instance,e.module)}function r(e){return function(){if(!f&&(H||l)){if("function"==typeof fetch&&!M(_))return fetch(_,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+_+"'"}).catch(function(){return de(_)});if(o)return new Promise(function(t,e){o(_,function(e){t(new Uint8Array(e))},e)})}return Promise.resolve().then(function(){return de(_)})}().then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(e,function(e){g("failed to asynchronously prepare wasm: "+e),S(e)})}if(h||(k++,s.monitorRunDependencies&&s.monitorRunDependencies(k)),s.instantiateWasm)try{return s.instantiateWasm(t,n)}catch(t){g("Module.instantiateWasm callback failed with error: "+t),i(t)}(f||"function"!=typeof WebAssembly.instantiateStreaming||le(_)||M(_)||d||"function"!=typeof fetch?r(a):fetch(_,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(a,function(e){return g("wasm streaming compile failed: "+e),g("falling back to ArrayBuffer instantiation"),r(a)})})).catch(i)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._init=function(){return(s._init=s.asm.init).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.init_with_threads_count).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.get_threads_count).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.register_tensor).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.dispose_data).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.dispose).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.Abs).apply(null,arguments)},s._Acos=function(){return(s._Acos=s.asm.Acos).apply(null,arguments)},s._Acosh=function(){return(s._Acosh=s.asm.Acosh).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.Add).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.AddN).apply(null,arguments)},s._All=function(){return(s._All=s.asm.All).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.Any).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.ArgMax).apply(null,arguments)},s._ArgMin=function(){return(s._ArgMin=s.asm.ArgMin).apply(null,arguments)},s._Asin=function(){return(s._Asin=s.asm.Asin).apply(null,arguments)},s._Asinh=function(){return(s._Asinh=s.asm.Asinh).apply(null,arguments)},s._Atan=function(){return(s._Atan=s.asm.Atan).apply(null,arguments)},s._Atan2=function(){return(s._Atan2=s.asm.Atan2).apply(null,arguments)},s._Atanh=function(){return(s._Atanh=s.asm.Atanh).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.AvgPool).apply(null,arguments)},s._AvgPool3D=function(){return(s._AvgPool3D=s.asm.AvgPool3D).apply(null,arguments)},s._AvgPool3DGrad=function(){return(s._AvgPool3DGrad=s.asm.AvgPool3DGrad).apply(null,arguments)},s._AvgPoolGrad=function(){return(s._AvgPoolGrad=s.asm.AvgPoolGrad).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.BatchMatMul).apply(null,arguments)},s._Bincount=function(){return(s._Bincount=s.asm.Bincount).apply(null,arguments)},s._BitwiseAnd=function(){return(s._BitwiseAnd=s.asm.BitwiseAnd).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.Ceil).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.ClipByValue).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.Conv2D).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.Conv2DBackpropInput).apply(null,arguments)},s._Conv3D=function(){return(s._Conv3D=s.asm.Conv3D).apply(null,arguments)},s._Conv3DBackpropFilterV2=function(){return(s._Conv3DBackpropFilterV2=s.asm.Conv3DBackpropFilterV2).apply(null,arguments)},s._Conv3DBackpropInputV2=function(){return(s._Conv3DBackpropInputV2=s.asm.Conv3DBackpropInputV2).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.Cos).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.Cosh).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.CropAndResize).apply(null,arguments)},s._Cumprod=function(){return(s._Cumprod=s.asm.Cumprod).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.Cumsum).apply(null,arguments)},s._DenseBincount=function(){return(s._DenseBincount=s.asm.DenseBincount).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.DepthToSpace).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.DepthwiseConv2dNative).apply(null,arguments)},s._Diag=function(){return(s._Diag=s.asm.Diag).apply(null,arguments)},s._Dilation2D=function(){return(s._Dilation2D=s.asm.Dilation2D).apply(null,arguments)},s._Dilation2DBackpropFilter=function(){return(s._Dilation2DBackpropFilter=s.asm.Dilation2DBackpropFilter).apply(null,arguments)},s._Dilation2DBackpropInput=function(){return(s._Dilation2DBackpropInput=s.asm.Dilation2DBackpropInput).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.Elu).apply(null,arguments)},s._EluGrad=function(){return(s._EluGrad=s.asm.EluGrad).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.Equal).apply(null,arguments)},s._Erf=function(){return(s._Erf=s.asm.Erf).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.Exp).apply(null,arguments)},s._Expm1=function(){return(s._Expm1=s.asm.Expm1).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.FlipLeftRight).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.Floor).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.FloorDiv).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.FusedBatchNorm).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.FusedConv2D).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.FusedDepthwiseConv2D).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.Gather).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.GatherNd).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.Greater).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.GreaterEqual).apply(null,arguments)},s._IsFinite=function(){return(s._IsFinite=s.asm.IsFinite).apply(null,arguments)},s._IsInf=function(){return(s._IsInf=s.asm.IsInf).apply(null,arguments)},s._IsNan=function(){return(s._IsNan=s.asm.IsNan).apply(null,arguments)},s._LRN=function(){return(s._LRN=s.asm.LRN).apply(null,arguments)},s._LRNGrad=function(){return(s._LRNGrad=s.asm.LRNGrad).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.LeakyRelu).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Less).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.LessEqual).apply(null,arguments)},s._LinSpace=function(){return(s._LinSpace=s.asm.LinSpace).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm.Log).apply(null,arguments)},s._Log1p=function(){return(s._Log1p=s.asm.Log1p).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.LogicalAnd).apply(null,arguments)},s._LogicalNot=function(){return(s._LogicalNot=s.asm.LogicalNot).apply(null,arguments)},s._LogicalOr=function(){return(s._LogicalOr=s.asm.LogicalOr).apply(null,arguments)},s._LogicalXor=function(){return(s._LogicalXor=s.asm.LogicalXor).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.Max).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.MaxPool).apply(null,arguments)},s._MaxPool3D=function(){return(s._MaxPool3D=s.asm.MaxPool3D).apply(null,arguments)},s._MaxPool3DGrad=function(){return(s._MaxPool3DGrad=s.asm.MaxPool3DGrad).apply(null,arguments)},s._MaxPoolGrad=function(){return(s._MaxPoolGrad=s.asm.MaxPoolGrad).apply(null,arguments)},s._MaxPoolWithArgmax=function(){return(s._MaxPoolWithArgmax=s.asm.MaxPoolWithArgmax).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.Maximum).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.Mean).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.Min).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.Minimum).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.MirrorPad).apply(null,arguments)},s._Mod=function(){return(s._Mod=s.asm.Mod).apply(null,arguments)},s._Multinomial=function(){return(s._Multinomial=s.asm.Multinomial).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.Multiply).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.Neg).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.NonMaxSuppressionV3).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.NonMaxSuppressionV4).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.NonMaxSuppressionV5).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.NotEqual).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.OneHot).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.PadV2).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.Pow).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.Prelu).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.Prod).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.RealDiv).apply(null,arguments)},s._Reciprocal=function(){return(s._Reciprocal=s.asm.Reciprocal).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.Relu).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.Relu6).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.ResizeBilinear).apply(null,arguments)},s._ResizeBilinearGrad=function(){return(s._ResizeBilinearGrad=s.asm.ResizeBilinearGrad).apply(null,arguments)},s._ResizeNearestNeighbor=function(){return(s._ResizeNearestNeighbor=s.asm.ResizeNearestNeighbor).apply(null,arguments)},s._ResizeNearestNeighborGrad=function(){return(s._ResizeNearestNeighborGrad=s.asm.ResizeNearestNeighborGrad).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.Reverse).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.RotateWithOffset).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.Round).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.Rsqrt).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.ScatterNd).apply(null,arguments)},s._SearchSorted=function(){return(s._SearchSorted=s.asm.SearchSorted).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.SelectV2).apply(null,arguments)},s._Selu=function(){return(s._Selu=s.asm.Selu).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Sigmoid).apply(null,arguments)},s._Sign=function(){return(s._Sign=s.asm.Sign).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Sin).apply(null,arguments)},s._Sinh=function(){return(s._Sinh=s.asm.Sinh).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Softmax).apply(null,arguments)},s._Softplus=function(){return(s._Softplus=s.asm.Softplus).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.SparseFillEmptyRows).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.SparseReshape).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.SparseSegmentReduction).apply(null,arguments)},s._SparseToDense=function(){return(s._SparseToDense=s.asm.SparseToDense).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Sqrt).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Square).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.SquaredDifference).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Step).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.StridedSlice).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Sub).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Sum).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Tan).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Tanh).apply(null,arguments)},s._TensorScatterUpdate=function(){return(s._TensorScatterUpdate=s.asm.TensorScatterUpdate).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Tile).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.TopK).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Transform).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Transpose).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm._FusedMatMul).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.malloc).apply(null,arguments)},s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.__emscripten_tls_init=function(){return(s.__emscripten_tls_init=s.asm._emscripten_tls_init).apply(null,arguments)},s._pthread_self=function(){return(T=s._pthread_self=s.asm.pthread_self).apply(null,arguments)}),De=(s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s.__emscripten_thread_init=function(){return(De=s.__emscripten_thread_init=s.asm._emscripten_thread_init).apply(null,arguments)}),Re=(s.__emscripten_thread_crashed=function(){return(s.__emscripten_thread_crashed=s.asm._emscripten_thread_crashed).apply(null,arguments)},s._emscripten_main_thread_process_queued_calls=function(){return(s._emscripten_main_thread_process_queued_calls=s.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},s._emscripten_main_browser_thread_id=function(){return(s._emscripten_main_browser_thread_id=s.asm.emscripten_main_browser_thread_id).apply(null,arguments)},s._emscripten_run_in_main_runtime_thread_js=function(){return(Re=s._emscripten_run_in_main_runtime_thread_js=s.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),Te=(s._emscripten_dispatch_to_thread_=function(){return(s._emscripten_dispatch_to_thread_=s.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},s.__emscripten_proxy_execute_task_queue=function(){return(Te=s.__emscripten_proxy_execute_task_queue=s.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),Be=s.__emscripten_thread_free_data=function(){return(Be=s.__emscripten_thread_free_data=s.asm._emscripten_thread_free_data).apply(null,arguments)},Ce=s.__emscripten_thread_exit=function(){return(Ce=s.__emscripten_thread_exit=s.asm._emscripten_thread_exit).apply(null,arguments)},Pe=s._emscripten_stack_set_limits=function(){return(Pe=s._emscripten_stack_set_limits=s.asm.emscripten_stack_set_limits).apply(null,arguments)},Oe=s.stackSave=function(){return(Oe=s.stackSave=s.asm.stackSave).apply(null,arguments)},B=s.stackRestore=function(){return(B=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},C=s.stackAlloc=function(){return(C=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};function We(){if(!(0<k)){if(h)return W(s),oe(),startWorker(s);if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),ae.unshift(e);var e;ge(ae),0<k||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),t()},1)):t())}function t(){if(!D&&(D=!0,s.calledRun=!0,!Y)&&(oe(),W(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!h)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),ie.unshift(e);var e;ge(ie)}}}if(s.dynCall_iijjiiii=function(){return(s.dynCall_iijjiiii=s.asm.dynCall_iijjiiii).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.dynCall_jiji).apply(null,arguments)},s.keepRuntimeAlive=se,s.wasmMemory=b,s.cwrap=function(e,t,n,a){var r=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&r&&!a?Ae(e):function(){return xe(e,t,n,arguments)}},s.ExitStatus=A,s.PThread=x,I=function e(){D||We(),D||(I=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();if(We(),a&&(e={uncaughtException:process.listeners("uncaughtException").filter(function(e){return-1<!a.uncaughtException.indexOf(e)}),unhandledRejection:process.listeners("unhandledRejection").filter(function(e){return-1<!a.unhandledRejection.indexOf(e)})}),"undefined"!=typeof WasmBackendModule)R=WasmBackendModule;else{if(void 0===t)throw new Error("Could not find wasm module in post.js");R=t}return e&&(Ne=R._dispose,R._dispose=function(){Ne(),e.uncaughtException.forEach(function(e){process.removeListener("uncaughtException",e)}),e.unhandledRejection.forEach(function(e){process.removeListener("unhandledRejection",e)})}),t.ready}},142:e=>{e.exports.g='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'},234:(e,t,Z)=>{var Q;Q=("undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js";e.exports=function(e){var n,i,t,s=e=e||{};s.ready=new Promise(function(e,t){n=e,i=t}),"undefined"!=typeof process&&process.listeners&&(t={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var r,o,a,u,l,d=Object.assign({},s),c="object"==typeof window,p="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";h?(r=Z(256),o=Z(980),m=p?o.dirname(m)+"/":"//",a=(e,t)=>(e=F(e)?new URL(e):o.normalize(e),r.readFileSync(e,t?void 0:"utf8")),u=e=>{e=a(e,!0);return e=e.buffer?e:new Uint8Array(e)},l=(e,n,a)=>{e=F(e)?new URL(e):o.normalize(e),r.readFile(e,function(e,t){e?a(e):n(t.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(e){throw e}),process.on("unhandledRejection",function(e){throw e}),s.inspect=function(){return"[Emscripten Module object]"}):(c||p)&&(p?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),m=0!==(m=Q?Q:m).indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),l=(e,t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)});var f,g,P=s.print||console.log.bind(console),b=s.printErr||console.warn.bind(console);Object.assign(s,d),s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(f=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&E("no native wasm support detected");var y,w,v,_,k=!1,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,n){for(var a=(t>>>=0)+n,r=t;e[r]&&!(a<=r);)++r;if(16<r-t&&e.buffer&&I)return I.decode(e.subarray(t,r));for(var i="";t<r;){var s,o,u=e[t++];128&u?(s=63&e[t++],192!=(224&u)?(o=63&e[t++],(u=224==(240&u)?(15&u)<<12|s<<6|o:(7&u)<<18|s<<12|o<<6|63&e[t++])<65536?i+=String.fromCharCode(u):(o=u-65536,i+=String.fromCharCode(55296|o>>10,56320|1023&o))):i+=String.fromCharCode((31&u)<<6|s)):i+=String.fromCharCode(u)}return i}function O(e){y=e,s.HEAP8=w=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=new Int32Array(e),s.HEAPU8=v=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=_=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}s.INITIAL_MEMORY;var M,W=[],L=[],U=[],A=0,x=null,N=null;function E(e){s.onAbort&&s.onAbort(e),b(e="Aborted("+e+")"),k=!0,e+=". Build with -sASSERTIONS for more info.";e=new WebAssembly.RuntimeError(e);throw i(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}function F(e){return e.startsWith("file://")}function G(e){try{if(e==M&&f)return new Uint8Array(f);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){E(e)}}function D(e){for(;0<e.length;)e.shift()(s)}H(M="tfjs-backend-wasm.wasm")||(d=M,M=s.locateFile?s.locateFile(d,m):m+d);var j=[null,[],[]];function z(e){return s["_"+e]}function $(e,t,n,a){var r={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2),t=C(n),a=e,r=v,i=t;if(0<(e=n)){for(var s=(i>>>=0)+e-1,o=0;o<a.length;++o){var u=a.charCodeAt(o);if((u=55296<=u&&u<=57343?65536+((1023&u)<<10)|1023&a.charCodeAt(++o):u)<=127){if(s<=i)break;r[i++>>>0]=u}else{if(u<=2047){if(s<=i+1)break;r[i++>>>0]=192|u>>6}else{if(u<=65535){if(s<=i+2)break;r[i++>>>0]=224|u>>12}else{if(s<=i+3)break;r[i++>>>0]=240|u>>18,r[i++>>>0]=128|u>>12&63}r[i++>>>0]=128|u>>6&63}r[i++>>>0]=128|63&u}}r[i>>>0]=0}}return t},array:e=>{var t=C(e.length);return w.set(e,t>>>0),t}},e=z(e),i=[],s=0;if(a)for(var o=0;o<a.length;o++){var u=r[n[o]];u?(0===s&&(s=K()),i[o]=u(a[o])):i[o]=a[o]}var l,e=e.apply(null,i);return e=e,0!==s&&J(s),e=e,"string"===t?(l=e,(l>>>=0)?S(v,l,void 0):""):"boolean"===t?Boolean(e):e}var R,T,B,q,V={abort:function(){E("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,n){v.copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_resize_heap:function(e){var t=v.length,n=4294901760;if(!((e>>>=0)>n))for(var a=1;a<=4;a*=2){var r=t*(1+.2/a),r=Math.min(r,e+100663296);if(function(e){try{return g.grow(e-y.byteLength+65535>>>16),O(g.buffer),1}catch(e){}}(Math.min(n,(r=Math.max(e,r))+(65536-r%65536)%65536)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,n,a,r){return 70},fd_write:function(e,t,n,a){for(var r,i,s,o=0,u=0;u<n;u++){var l=_[t>>>2],d=_[t+4>>>2];t+=8;for(var c=0;c<d;c++)r=e,i=v[l+c>>>0],s=void 0,s=j[r],0===i||10===i?((1===r?P:b)(S(s,0)),s.length=0):s.push(i);o+=d}return _[a>>>2]=o,0}},K=(function(){var t={env:V,wasi_snapshot_preview1:V};function n(e,t){var e=e.exports;s.asm=e,O((g=s.asm.memory).buffer),s.asm.__indirect_function_table,e=s.asm.__wasm_call_ctors,L.unshift(e),A--,s.monitorRunDependencies&&s.monitorRunDependencies(A),0==A&&(null!==x&&(clearInterval(x),x=null),N)&&(e=N,N=null,e())}function a(e){n(e.instance)}function r(e){return function(){if(!f&&(c||p)){if("function"==typeof fetch&&!F(M))return fetch(M,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+M+"'"}).catch(function(){return G(M)});if(l)return new Promise(function(t,e){l(M,function(e){t(new Uint8Array(e))},e)})}return Promise.resolve().then(function(){return G(M)})}().then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(e,function(e){b("failed to asynchronously prepare wasm: "+e),E(e)})}if(A++,s.monitorRunDependencies&&s.monitorRunDependencies(A),s.instantiateWasm)try{return s.instantiateWasm(t,n)}catch(t){b("Module.instantiateWasm callback failed with error: "+t),i(t)}(f||"function"!=typeof WebAssembly.instantiateStreaming||H(M)||F(M)||h||"function"!=typeof fetch?r(a):fetch(M,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(a,function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),r(a)})})).catch(i)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._init=function(){return(s._init=s.asm.init).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.init_with_threads_count).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.get_threads_count).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.register_tensor).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.dispose_data).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.dispose).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.Abs).apply(null,arguments)},s._Acos=function(){return(s._Acos=s.asm.Acos).apply(null,arguments)},s._Acosh=function(){return(s._Acosh=s.asm.Acosh).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.Add).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.AddN).apply(null,arguments)},s._All=function(){return(s._All=s.asm.All).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.Any).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.ArgMax).apply(null,arguments)},s._ArgMin=function(){return(s._ArgMin=s.asm.ArgMin).apply(null,arguments)},s._Asin=function(){return(s._Asin=s.asm.Asin).apply(null,arguments)},s._Asinh=function(){return(s._Asinh=s.asm.Asinh).apply(null,arguments)},s._Atan=function(){return(s._Atan=s.asm.Atan).apply(null,arguments)},s._Atan2=function(){return(s._Atan2=s.asm.Atan2).apply(null,arguments)},s._Atanh=function(){return(s._Atanh=s.asm.Atanh).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.AvgPool).apply(null,arguments)},s._AvgPool3D=function(){return(s._AvgPool3D=s.asm.AvgPool3D).apply(null,arguments)},s._AvgPool3DGrad=function(){return(s._AvgPool3DGrad=s.asm.AvgPool3DGrad).apply(null,arguments)},s._AvgPoolGrad=function(){return(s._AvgPoolGrad=s.asm.AvgPoolGrad).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.BatchMatMul).apply(null,arguments)},s._Bincount=function(){return(s._Bincount=s.asm.Bincount).apply(null,arguments)},s._BitwiseAnd=function(){return(s._BitwiseAnd=s.asm.BitwiseAnd).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.Ceil).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.ClipByValue).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.Conv2D).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.Conv2DBackpropInput).apply(null,arguments)},s._Conv3D=function(){return(s._Conv3D=s.asm.Conv3D).apply(null,arguments)},s._Conv3DBackpropFilterV2=function(){return(s._Conv3DBackpropFilterV2=s.asm.Conv3DBackpropFilterV2).apply(null,arguments)},s._Conv3DBackpropInputV2=function(){return(s._Conv3DBackpropInputV2=s.asm.Conv3DBackpropInputV2).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.Cos).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.Cosh).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.CropAndResize).apply(null,arguments)},s._Cumprod=function(){return(s._Cumprod=s.asm.Cumprod).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.Cumsum).apply(null,arguments)},s._DenseBincount=function(){return(s._DenseBincount=s.asm.DenseBincount).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.DepthToSpace).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.DepthwiseConv2dNative).apply(null,arguments)},s._Diag=function(){return(s._Diag=s.asm.Diag).apply(null,arguments)},s._Dilation2D=function(){return(s._Dilation2D=s.asm.Dilation2D).apply(null,arguments)},s._Dilation2DBackpropFilter=function(){return(s._Dilation2DBackpropFilter=s.asm.Dilation2DBackpropFilter).apply(null,arguments)},s._Dilation2DBackpropInput=function(){return(s._Dilation2DBackpropInput=s.asm.Dilation2DBackpropInput).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.Elu).apply(null,arguments)},s._EluGrad=function(){return(s._EluGrad=s.asm.EluGrad).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.Equal).apply(null,arguments)},s._Erf=function(){return(s._Erf=s.asm.Erf).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.Exp).apply(null,arguments)},s._Expm1=function(){return(s._Expm1=s.asm.Expm1).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.FlipLeftRight).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.Floor).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.FloorDiv).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.FusedBatchNorm).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.FusedConv2D).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.FusedDepthwiseConv2D).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.Gather).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.GatherNd).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.Greater).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.GreaterEqual).apply(null,arguments)},s._IsFinite=function(){return(s._IsFinite=s.asm.IsFinite).apply(null,arguments)},s._IsInf=function(){return(s._IsInf=s.asm.IsInf).apply(null,arguments)},s._IsNan=function(){return(s._IsNan=s.asm.IsNan).apply(null,arguments)},s._LRN=function(){return(s._LRN=s.asm.LRN).apply(null,arguments)},s._LRNGrad=function(){return(s._LRNGrad=s.asm.LRNGrad).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.LeakyRelu).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Less).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.LessEqual).apply(null,arguments)},s._LinSpace=function(){return(s._LinSpace=s.asm.LinSpace).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm.Log).apply(null,arguments)},s._Log1p=function(){return(s._Log1p=s.asm.Log1p).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.LogicalAnd).apply(null,arguments)},s._LogicalNot=function(){return(s._LogicalNot=s.asm.LogicalNot).apply(null,arguments)},s._LogicalOr=function(){return(s._LogicalOr=s.asm.LogicalOr).apply(null,arguments)},s._LogicalXor=function(){return(s._LogicalXor=s.asm.LogicalXor).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.Max).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.MaxPool).apply(null,arguments)},s._MaxPool3D=function(){return(s._MaxPool3D=s.asm.MaxPool3D).apply(null,arguments)},s._MaxPool3DGrad=function(){return(s._MaxPool3DGrad=s.asm.MaxPool3DGrad).apply(null,arguments)},s._MaxPoolGrad=function(){return(s._MaxPoolGrad=s.asm.MaxPoolGrad).apply(null,arguments)},s._MaxPoolWithArgmax=function(){return(s._MaxPoolWithArgmax=s.asm.MaxPoolWithArgmax).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.Maximum).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.Mean).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.Min).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.Minimum).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.MirrorPad).apply(null,arguments)},s._Mod=function(){return(s._Mod=s.asm.Mod).apply(null,arguments)},s._Multinomial=function(){return(s._Multinomial=s.asm.Multinomial).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.Multiply).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.Neg).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.NonMaxSuppressionV3).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.NonMaxSuppressionV4).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.NonMaxSuppressionV5).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.NotEqual).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.OneHot).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.PadV2).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.Pow).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.Prelu).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.Prod).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.RealDiv).apply(null,arguments)},s._Reciprocal=function(){return(s._Reciprocal=s.asm.Reciprocal).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.Relu).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.Relu6).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.ResizeBilinear).apply(null,arguments)},s._ResizeBilinearGrad=function(){return(s._ResizeBilinearGrad=s.asm.ResizeBilinearGrad).apply(null,arguments)},s._ResizeNearestNeighbor=function(){return(s._ResizeNearestNeighbor=s.asm.ResizeNearestNeighbor).apply(null,arguments)},s._ResizeNearestNeighborGrad=function(){return(s._ResizeNearestNeighborGrad=s.asm.ResizeNearestNeighborGrad).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.Reverse).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.RotateWithOffset).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.Round).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.Rsqrt).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.ScatterNd).apply(null,arguments)},s._SearchSorted=function(){return(s._SearchSorted=s.asm.SearchSorted).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.SelectV2).apply(null,arguments)},s._Selu=function(){return(s._Selu=s.asm.Selu).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Sigmoid).apply(null,arguments)},s._Sign=function(){return(s._Sign=s.asm.Sign).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Sin).apply(null,arguments)},s._Sinh=function(){return(s._Sinh=s.asm.Sinh).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Softmax).apply(null,arguments)},s._Softplus=function(){return(s._Softplus=s.asm.Softplus).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.SparseFillEmptyRows).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.SparseReshape).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.SparseSegmentReduction).apply(null,arguments)},s._SparseToDense=function(){return(s._SparseToDense=s.asm.SparseToDense).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Sqrt).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Square).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.SquaredDifference).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Step).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.StridedSlice).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Sub).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Sum).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Tan).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Tanh).apply(null,arguments)},s._TensorScatterUpdate=function(){return(s._TensorScatterUpdate=s.asm.TensorScatterUpdate).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Tile).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.TopK).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Transform).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Transpose).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm._FusedMatMul).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.malloc).apply(null,arguments)},s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s.stackSave=function(){return(K=s.stackSave=s.asm.stackSave).apply(null,arguments)}),J=s.stackRestore=function(){return(J=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},C=s.stackAlloc=function(){return(C=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};function X(){function e(){if(!R&&(R=!0,s.calledRun=!0,!k)){if(D(L),n(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),U.unshift(e);var e;D(U)}}0<A||(function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),W.unshift(e);var e;D(W)}(),0<A)||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),e()},1)):e())}if(s.dynCall_iijjiiii=function(){return(s.dynCall_iijjiiii=s.asm.dynCall_iijjiiii).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.dynCall_jiji).apply(null,arguments)},s.cwrap=function(e,t,n,a){var r=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&r&&!a?z(e):function(){return $(e,t,n,arguments)}},N=function e(){R||X(),R||(N=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();if(X(),t&&(T={uncaughtException:process.listeners("uncaughtException").filter(function(e){return-1<!t.uncaughtException.indexOf(e)}),unhandledRejection:process.listeners("unhandledRejection").filter(function(e){return-1<!t.unhandledRejection.indexOf(e)})}),void 0!==e)B=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");B=WasmBackendModuleThreadedSimd}return T&&(q=B._dispose,B._dispose=function(){q(),T.uncaughtException.forEach(function(e){process.removeListener("uncaughtException",e)}),T.unhandledRejection.forEach(function(e){process.removeListener("unhandledRejection",e)})}),e.ready}},720:e=>{e.exports=a;var p=null;try{p=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function a(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function h(e){return!0===(e&&e.__isLong__)}Object.defineProperty(a.prototype,"__isLong__",{value:!0}),a.isLong=h;var i={},s={};function t(e,t){var n,a,r;return t?(r=0<=(e>>>=0)&&e<256)&&(a=s[e])?a:(n=f(e,(0|e)<0?-1:0,!0),r&&(s[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(a=i[e])?a:(n=f(e,e<0?-1:0,!1),r&&(i[e]=n),n)}function m(e,t){if(isNaN(e))return t?u:y;if(t){if(e<0)return u;if(r<=e)return k}else{if(e<=-o)return I;if(o<=e+1)return _}return e<0?m(-e,t).neg():f(e%n|0,e/n|0,t)}function f(e,t,n){return new a(e,t,n)}a.fromInt=t,a.fromNumber=m,a.fromBits=f;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if(t="number"==typeof t?(n=t,!1):!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if(0<(a=e.indexOf("-")))throw Error("interior hyphen");if(0===a)return d(e.substring(1),t,n).neg();for(var r=m(l(n,8)),i=y,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+o),n);i=(o<8?(o=m(l(n,o)),i.mul(o)):i=i.mul(r)).add(m(u))}return i.unsigned=t,i}function g(e,t){return"number"==typeof e?m(e,t):"string"==typeof e?d(e,t):f(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}a.fromString=d,a.fromValue=g;var n=4294967296,r=n*n,o=r/2,b=t(1<<24),y=t(0),u=(a.ZERO=y,t(0,!0)),c=(a.UZERO=u,t(1)),w=(a.ONE=c,t(1,!0)),v=(a.UONE=w,t(-1)),_=(a.NEG_ONE=v,f(-1,2147483647,!1)),k=(a.MAX_VALUE=_,f(-1,-1,!0)),I=(a.MAX_UNSIGNED_VALUE=k,f(0,-2147483648,!1)),S=(a.MIN_VALUE=I,a.prototype);S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,n;if(this.isNegative())return this.eq(I)?(n=m(e),n=(t=this.div(n)).mul(n).sub(this),t.toString(e)+n.toInt().toString(e)):"-"+this.neg().toString(e);for(var a=m(l(e,6),this.unsigned),r=this,i="";;){var s=r.div(a),o=(r.sub(s.mul(a)).toInt()>>>0).toString(e);if((r=s).isZero())return o+i;for(;o.length<6;)o="0"+o;i=""+o+i}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||0<=this.high},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return h(e)||(e=g(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return 0<this.comp(e)},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return 0<=this.comp(e)},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){var t,n;return h(e)||(e=g(e)),this.eq(e)?0:(t=this.isNegative(),n=e.isNegative(),t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1)},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(c)},S.neg=S.negate,S.add=function(e){h(e)||(e=g(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,r=65535&this.low,i=e.high>>>16,s=65535&e.high,o=e.low>>>16,u=0,l=0,d=0,c=0;return l+=(d=d+((c+=r+(65535&e.low))>>>16)+(a+o))>>>16,f((d&=65535)<<16|(c&=65535),((u+=(l+=n+s)>>>16)+(t+i)&65535)<<16|(l&=65535),this.unsigned)},S.subtract=function(e){return h(e)||(e=g(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){var t,n,a,r,i,s,o,u,l,d,c;return this.isZero()?y:(h(e)||(e=g(e)),p?f(p.mul(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):e.isZero()?y:this.eq(I)?e.isOdd()?I:y:e.eq(I)?this.isOdd()?I:y:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(b)&&e.lt(b)?m(this.toNumber()*e.toNumber(),this.unsigned):(t=this.high>>>16,n=65535&this.high,a=this.low>>>16,r=65535&this.low,i=e.high>>>16,s=65535&e.high,o=e.low>>>16,c=(c=d=l=u=0)+((l=l+((d+=r*(e=65535&e.low))>>>16)+a*e)>>>16)+((l=(l&65535)+r*o)>>>16),f((l&=65535)<<16|(d&=65535),(u=(u=(u+=(c+=n*e)>>>16)+((c=(c&65535)+a*o)>>>16)+((c=(c&65535)+r*s)>>>16))+(t*e+n*o+a*s+r*i)&65535)<<16|(c&=65535),this.unsigned)))},S.mul=S.multiply,S.divide=function(e){if((e=h(e)?e:g(e)).isZero())throw Error("division by zero");var t,n;if(p)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?f((this.unsigned?p.div_u:p.div_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?u:y;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return u;if(e.gt(this.shru(1)))return w;n=u}else{if(this.eq(I))return e.eq(c)||e.eq(v)?I:e.eq(I)?c:(a=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?c:v:(t=this.sub(e.mul(a)),a.add(t.div(e)));if(e.eq(I))return this.unsigned?u:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=y}for(t=this;t.gte(e);){for(var a=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),r=Math.ceil(Math.log(a)/Math.LN2),i=r<=48?1:l(2,r-48),s=m(a),o=s.mul(e);o.isNegative()||o.gt(t);)o=(s=m(a-=i,this.unsigned)).mul(e);s.isZero()&&(s=c),n=n.add(s),t=t.sub(o)}return n},S.div=S.divide,S.modulo=function(e){return h(e)||(e=g(e)),p?f((this.unsigned?p.rem_u:p.rem_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return f(~this.low,~this.high,this.unsigned)},S.and=function(e){return h(e)||(e=g(e)),f(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return h(e)||(e=g(e)),f(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return h(e)||(e=g(e)),f(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return h(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):f(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return h(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):f(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){var t;return h(e)&&(e=e.toInt()),0==(e&=63)?this:(t=this.high,e<32?f(this.low>>>e|t<<32-e,t>>>e,this.unsigned):f(32===e?t:t>>>e-32,0,this.unsigned))},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?f(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:f(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},a.fromBytes=function(e,t,n){return n?a.fromBytesLE(e,t):a.fromBytesBE(e,t)},a.fromBytesLE=function(e,t){return new a(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},a.fromBytesBE=function(e,t){return new a(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},256:()=>{},578:()=>{},980:()=>{},862:()=>{},958:()=>{},410:()=>{},628:()=>{},61:(S,e,t)=>{var M=t(698).default;function n(){"use strict";S.exports=function(){return s},S.exports.__esModule=!0,S.exports.default=S.exports;var s={},e=Object.prototype,u=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function o(e,t,n,a){var r,i,s,o,t=t&&t.prototype instanceof p?t:p,t=Object.create(t.prototype),a=new _(a||[]);return l(t,"_invoke",{value:(r=e,i=n,s=a,o="suspendedStart",function(e,t){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===e)throw t;return{value:void 0,done:!0}}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){n=function e(t,n){var a=n.method,r=t.iterator[a];if(void 0===r)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),c;a=d(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,c;r=a.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,s);if(n){if(n===c)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===o)throw o="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o="executing";n=d(r,i,s);if("normal"===n.type){if(o=s.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(o="completed",s.method="throw",s.arg=n.arg)}})}),t}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}s.wrap=o;var c={};function p(){}function h(){}function m(){}var t={},f=(i(t,a,function(){return this}),Object.getPrototypeOf),f=f&&f(f(k([]))),g=(f&&f!==e&&u.call(f,a)&&(t=f),m.prototype=p.prototype=Object.create(t));function b(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function y(s,o){var t;l(this,"_invoke",{value:function(n,a){function e(){return new o(function(e,t){!function t(e,n,a,r){var i,e=d(s[e],s,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==M(n)&&u.call(n,"__await")?o.resolve(n.__await).then(function(e){t("next",e,a,r)},function(e){t("throw",e,a,r)}):o.resolve(n).then(function(e){i.value=e,a(i)},function(e){return t("throw",e,a,r)});r(e.arg)}(n,a,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(t){if(t){var n,e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:I}}function I(){return{value:void 0,done:!0}}return l(g,"constructor",{value:h.prototype=m,configurable:!0}),l(m,"constructor",{value:h,configurable:!0}),h.displayName=i(m,r,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,i(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},s.awrap=function(e){return{__await:e}},b(y.prototype),i(y.prototype,n,function(){return this}),s.AsyncIterator=y,s.async=function(e,t,n,a,r){void 0===r&&(r=Promise);var i=new y(o(e,t,n,a),r);return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(g),i(g,r,"Generator"),i(g,a,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t,n=Object(e),a=[];for(t in n)a.push(t);return a.reverse(),function e(){for(;a.length;){var t=a.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function e(e,t){return i.type="throw",i.arg=n,a.next=e,t&&(a.method="next",a.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],i=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=u.call(r,"catchLoc"),o=u.call(r,"finallyLoc");if(s&&o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&u.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}var i=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),v(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,a,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(a=n.arg,v(r)),a}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},s}S.exports=n,S.exports.__esModule=!0,S.exports.default=S.exports},698:t=>{function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},687:(e,t,n)=>{n=n(61)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},a={};function tu(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},n[e](t,t.exports,tu)),t.exports}tu.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return tu.d(t,{a:t}),t},tu.d=(e,t)=>{for(var n in t)tu.o(t,n)&&!tu.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},tu.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),tu.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function T(e,t,n,a,r,i,s){try{var o=e[i](s),u=o.value}catch(e){return n(e)}o.done?t(u):Promise.resolve(u).then(a,r)}function B(o){return function(){var e=this,s=arguments;return new Promise(function(t,n){var a=o.apply(e,s);function r(e){T(a,t,n,r,i,"next",e)}function i(e){T(a,t,n,r,i,"throw",e)}r(void 0)})}}var e=tu(687),N=tu.n(e);const E=tf;class C{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class P{refCount(e){return i("refCount")}incRef(e){return i("incRef")}timerAvailable(){return!0}time(e){return i("time")}read(e){return i("read")}readSync(e){return i("readSync")}readToGPU(e,t){return i("readToGPU")}numDataIds(){return i("numDataIds")}disposeData(e,t){return i("disposeData")}write(e,t,n){return i("write")}move(e,t,n,a,r){return i("move")}createTensorFromGPUData(e,t,n){return i("createTensorFromGPUData")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return i("dispose")}}function i(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function L(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function U(t){if(0===t.length)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function O(t,n){if(t!==n){if(null==t||null==n)return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1}return!0}function W(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function G(e,t){const n=t.length;return L((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+e),L(e.every(e=>e%1==0),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function j(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function z(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function q(e){return"string"==typeof e||e instanceof String}function V(e){return Array.isArray(e)?V(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"==typeof e?"float32":q(e)?"string":"boolean"==typeof e?"bool":"float32"}function K(e){return!!(e&&e.constructor&&e.call&&e.apply)}function H(t){var n=t.length;if(n<2)return[];var a=new Array(n-1);a[n-2]=t[n-1];for(let e=n-3;0<=e;--e)a[e]=a[e+1]*t[e+1];return a}function J(e,t,n=!1){if(0===e.length)return t[0];var a=e.reduce((e,t)=>e*t)*(n?2:1);if(0==a)return[];if(a!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return function t(n,e,a,r=!1){var i=new Array;if(1===e.length){var s=e[0]*(r?2:1);for(let e=0;e<s;e++)i[e]=a[n+e]}else{var o=e[0],u=e.slice(1),l=u.reduce((e,t)=>e*t)*(r?2:1);for(let e=0;e<o;e++)i[e]=t(n+e*l,u,a,r)}return i}(0,e,t,n)}function X(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Z(t){t.forEach(e=>{L(Number.isInteger(e)&&0<=e,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Q(e){return e&&e.then&&"function"==typeof e.then}const Y="tfjsflags";class ee{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=te,this.populateURLFlags()}setPlatform(e,t){null==this.platform||c.getBool("IS_TEST")||c.getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];c.getBool("IS_TEST")||c.getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(!(e in this.flags)){var t=this.evaluateFlag(e);if(Q(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);this.flags[e]=t}return this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){var e;void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search&&(e=this.getQueryParams(this.global.location.search),Y in e)&&e[Y].split(",").forEach(e=>{var[e,t]=e.split(":");this.urlFlags[e]="true"===(t=(e=t).toLowerCase())||"false"===t?"true"===t:""+ +t===t?+t:e})}}function te(e){const i={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...t)=>{return n=i,a=t[0],r=t[1],n[decodeURIComponent(a)]=decodeURIComponent(r||""),t.join("=");var n,a,r}),i}function ne(){return c}let ae,c=null;function re(){if(null==ae){let e;if("undefined"!=typeof window)e=window;else if(void 0!==tu.g)e=tu.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}ae=e}return ae}function ie(e,t){null==(n=re())._tfGlobals&&(n._tfGlobals=new Map);var n=n._tfGlobals;return n.has(e)||(t=t(),n.set(e,t)),n.get(e)}const se="AvgPool",oe="BatchMatMul",ue="Bincount",le="Cast",de="ClipByValue",ce="Conv2DBackpropInput",pe="Conv3DBackpropFilterV2",he="Conv3DBackpropInputV2",me="Cumprod",fe="CropAndResize",ge="DepthToSpace",be="DepthwiseConv2dNative",ye="Dilation2D",we="Dilation2DBackpropInput",ve="Dilation2DBackpropFilter",_e="RealDiv",ke="EluGrad",Ie="FlipLeftRight",Se="FloorDiv",Me="FusedBatchNorm",Ae="GatherNd",xe="Identity",Ne="LeakyRelu",Ee="LinSpace",Fe="LRNGrad",De="Maximum",Re="MaxPool",Te="MirrorPad",Be="Multinomial",Ce="Multiply",Pe="NonMaxSuppressionV3",Oe="NonMaxSuppressionV4",We="NonMaxSuppressionV5",Le="ResizeNearestNeighbor",Ue="ResizeNearestNeighborGrad",He="ResizeBilinear",Ge="ResizeBilinearGrad",je="Reverse",ze="ScatterNd",$e="TensorScatterUpdate",qe="SearchSorted",Ve="Softmax",Ke="SparseReshape",Je="SparseToDense",Xe="StridedSlice",Ze="Transform",Qe="Transpose",Ye="ZerosLike",et="RotateWithOffset",tt="_FusedMatMul",nt="FusedConv2D",at="FusedDepthwiseConv2D";function rt(...e){c.getBool("IS_TEST")||c.getBool("PROD")||console.warn(...e)}const it=ie("kernelRegistry",()=>new Map),st=ie("gradRegistry",()=>new Map);function ot(e,t){t=t+"_"+e;return it.get(t)}function ut(e){return st.get(e)}function lt(e){for(var t=it.entries(),n=[];;){var{done:a,value:r}=t.next();if(a)break;var[a,r]=r,[a]=a.split("_");a===e&&n.push(r)}return n}function dt(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var e=tu(720);const ct=tu.n(e)()||e;function pt(e){return ct.fromString(e,!0,16)}const ht=pt("c3a5c85c97cb3127"),mt=pt("b492b66fbe98f273"),p=pt("9ae16a3b2f90404f");function ft(e){return e.xor(e.shru(47))}function gt(e,t,n){e=e.slice(t,t+n);return ct.fromBytes(Array.from(e),!0,!0)}function h(e,t){return gt(e,t,8)}function bt(e,t){return gt(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function f(e,t,n=pt("9ddfea08eb382d69")){let a=e.xor(t).mul(n),r=(a=a.xor(a.shru(47)),t.xor(a).mul(n));return r=(r=r.xor(r.shru(47))).mul(n)}function yt(e,t,n,a){var r=h(e,t),i=h(e,t+8),s=h(e,t+16),e=h(e,t+24),t=n,n=a;return t=t.add(r),n=m(n.add(t).add(e),21),t=(t=(r=t).add(i)).add(s),n=n.add(m(t,44)),[t.add(e),n.add(r)]}function wt(e,t=e.length){var n=ct.fromNumber(81,!0);if(t<=32)return(t<=16?function(e,t=e.length){var n,a,r;return 8<=t?(r=p.add(2*t),n=h(e,0).add(p),f(m(a=h(e,t-8),37).mul(r).add(n),m(n,25).add(a).mul(r),r)):4<=t?(n=p.add(2*t),f(bt(e,0).shl(3).add(t),bt(e,t-4),n)):0<t?(a=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2),ft(p.mul(a).xor(ht.mul(r))).mul(p)):p}:function(e,t=e.length){var n=p.add(2*t),a=h(e,0).mul(mt),r=h(e,8),i=h(e,t-8).mul(n),t=h(e,t-16).mul(p);return f(m(a.add(r),43).add(m(i,30)).add(t),a.add(m(r.add(p),18)).add(i),n)})(e,t);if(t<=64)return function(e,t=e.length){var n=p.add(2*t),a=h(e,0).mul(p),r=h(e,8),i=h(e,t-8).mul(n),s=h(e,t-16).mul(p),s=m(a.add(r),43).add(m(i,30)).add(s),r=f(s,a.add(m(r.add(p),18)).add(i),n),i=h(e,16).mul(n),o=h(e,24),s=s.add(h(e,t-32)).mul(n),r=r.add(h(e,t-24)).mul(n);return f(m(i.add(o),43).add(m(s,30)).add(r),i.add(m(o.add(a),18)).add(s),n)}(e,t);let a=n,r=n.mul(mt).add(113),i=ft(r.mul(p).add(113)).mul(p),s=[ct.UZERO,ct.UZERO],o=[ct.UZERO,ct.UZERO],u=(a=a.mul(p).add(h(e,0)),0);for(var l=64*(t-1>>6),n=l+(t-1&63)-63;a=m(a.add(r).add(s[0]).add(h(e,u+8)),37).mul(mt),r=m(r.add(s[1]).add(h(e,u+48)),42).mul(mt),a=a.xor(o[1]),r=r.add(s[0]).add(h(e,u+40)),i=m(i.add(o[0]),33).mul(mt),s=yt(e,u,s[1].mul(mt),a.add(o[0])),o=yt(e,u+32,i.add(o[1]),r.add(h(e,u+16))),[i,a]=[a,i],(u+=64)!==l;);var d=mt.add(i.and(255).shl(1));return u=n,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),a=m(a.add(r).add(s[0]).add(h(e,u+8)),37).mul(d),r=m(r.add(s[1]).add(h(e,u+48)),42).mul(d),a=a.xor(o[1].mul(9)),r=r.add(s[0].mul(9).add(h(e,u+40))),i=m(i.add(o[0]),33).mul(d),s=yt(e,u,s[1].mul(d),a.add(o[0])),o=yt(e,u+32,i.add(o[1]),r.add(h(e,u+16))),[i,a]=[a,i],f(f(s[0],o[0],d).add(ft(r).mul(ht)).add(i),f(s[1],o[1],d).add(a),d)}function vt(t,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=St(t)),c.getBool("DEBUG")){var a=t,r=n;for(let e=0;e<a.length;e++){var i=a[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${r} being uploaded contains ${i}.`)}}if(s=n,(e=t)instanceof Float32Array&&"float32"===s||e instanceof Int32Array&&"int32"===s||e instanceof Uint8Array&&"bool"===s)return t;var e,s;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"!==n)throw new Error("Unknown data type "+n);{const n=new Uint8Array(t.length);for(let e=0;e<n.length;++e)0!==Math.round(t[e])&&(n[e]=1);return n}}function _t(){return c.platform.now()}function kt(e,t="utf-8"){return t=t||"utf-8",c.platform.encode(e,t)}function It(e,t="utf-8"){return t=t||"utf-8",c.platform.decode(e,t)}function s(e){return null!=c.platform.isTypedArray?c.platform.isTypedArray(e):dt(e)}function St(n,a=[],r=!1){if(null==a&&(a=[]),"boolean"==typeof n||"number"==typeof n||"string"==typeof n||Q(n)||null==n||s(n)&&r)a.push(n);else if(Array.isArray(n)||s(n))for(let e=0;e<n.length;++e)St(n[e],a,r);else{let t=-1;for(const a of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(a)&&(t=Math.max(t,Number(a)));for(let e=0;e<=t;e++)St(n[e],a,r)}return a}class Mt{constructor(e,t){this.backendTimer=e,null==(this.logger=t)&&(this.logger=new At)}profileKernel(r,e,i){let t;var n=()=>{t=i()};let a;var s=_t();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(n);else{n();for(const r of t)r.dataSync();a=Promise.resolve({kernelMs:_t()-s})}if(c.getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<t.length;e++){const i=t[e];i.data().then(e=>{var t=e,e=i.dtype,n=r;if("float32"===e)for(let e=0;e<t.length;e++){var a=t[e];if(isNaN(a)||!isFinite(a))return void console.warn(`Found ${a} in the result of '${n}'`)}})}return{kernelName:r,outputs:t,inputs:e,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:t,timeMs:a,inputs:r,extraInfo:i}=e;t.forEach(t=>{Promise.all([t.data(),a,i]).then(e=>{this.logger.logKernelProfile(n,t,e[0],e[1],r,e[2])})})}}class At{logKernelProfile(e,t,n,a,r,i){var a="number"==typeof a?W(a+"ms",9):a.error,e=W(e,25),s=t.rank,o=t.size,u=W(t.shape.toString(),14);let l="";for(const e in r){const n=r[e];if(null!=n){const a=n.shape||t.shape,r=a.length;l+=`${e}: ${r}D ${0<r?a:""} `}}console.log(`%c${e}	%c${a}	%c${s}D ${u}	%c${o}	%c${l}	%c`+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const xt=20,Nt=3,Et=7;function Ft(e,t,n,a){var r=H(t),i=function(e,t,n,a){var r=U(t),i=a[a.length-1],s=new Array(i).fill(0),a=t.length,o="complex64"===n?Tt(e):e;if(1<a)for(let e=0;e<r/i;e++){const t=e*i;for(let e=0;e<i;e++)s[e]=Math.max(s[e],Dt(o[t+e],0,n).length)}return s}(e,t,n,r),s=t.length,e=function t(n,a,r,i,s,o=!0){const u="complex64"===r?2:1,l=a[0],d=a.length;if(0===d)return"complex64"===r?[Dt(Tt(n)[0],0,r)]:"bool"===r?[Rt(n[0])]:[n[0].toString()];if(1===d){if(l>xt){const a=Nt*u;let e=Array.from(n.slice(0,a)),t=Array.from(n.slice((l-Nt)*u,l*u));return"complex64"===r&&(e=Tt(e),t=Tt(t)),["["+e.map((e,t)=>Dt(e,s[t],r)).join(", ")+", ..., "+t.map((e,t)=>Dt(e,s[l-Nt+t],r)).join(", ")+"]"]}return["["+("complex64"===r?Tt(n):Array.from(n)).map((e,t)=>Dt(e,s[t],r)).join(", ")+"]"]}const c=a.slice(1),p=i.slice(1),h=i[0]*u,m=[];if(l>xt){for(let e=0;e<Nt;e++){const i=e*h,o=i+h;m.push(...t(n.slice(i,o),c,r,p,s,!1))}m.push("...");for(let e=l-Nt;e<l;e++){const i=e*h,o=i+h;m.push(...t(n.slice(i,o),c,r,p,s,e===l-1))}}else for(let e=0;e<l;e++){const i=e*h,o=i+h;m.push(...t(n.slice(i,o),c,r,p,s,e===l-1))}const f=2===d?",":"";m[0]="["+(0<l?m[0]+f:"");for(let e=1;e<m.length-1;e++)m[e]=" "+m[e]+f;let g=",\n";for(let e=2;e<d;e++)g+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":g),m}(e,t,n,r,i),r=["Tensor"];return a&&(r.push("  dtype: "+n),r.push("  rank: "+s),r.push(`  shape: [${t}]`),r.push("  values:")),r.push(e.map(e=>"    "+e).join("\n")),r.join("\n")}function Dt(e,t,n){return W(Array.isArray(e)?`${parseFloat(e[0].toFixed(Et))} + ${parseFloat(e[1].toFixed(Et))}j`:q(e)?`'${e}'`:"bool"===n?Rt(e):parseFloat(e.toFixed(Et)).toString(),t)}function Rt(e){return 0===e?"false":"true"}function Tt(t){var n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}class Bt{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=U(e),null!=n){const e=n.length;L(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||j(t,this.size),this.strides=H(e)}set(e,...t){L((t=0===t.length?[0]:t).length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);var n=this.locToIndex(t);this.values[n]=e}get(...t){let e=0;for(const n of t=0===t.length?[0]:t){if(n<0||n>=this.shape[e]){const e=`Requested out of range element at ${t}.   Buffer shape=`+this.shape;throw new Error(e)}e++}let n=t[t.length-1];for(let e=0;e<t.length-1;++e)n+=this.strides[e]*t[e];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let n=t[t.length-1];for(let e=0;e<t.length-1;++e)n+=this.strides[e]*t[e];return n}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];var n=new Array(this.shape.length);for(let e=0;e<n.length-1;++e)n[e]=Math.floor(t/this.strides[e]),t-=n[e]*this.strides[e];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return a().makeTensor(this.values,this.shape,this.dtype)}}let a=null,Ct=null;class o{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=U(e),this.strides=H(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){var e=await this.data();return Ct.buffer(this.shape,this.dtype,e)}bufferSync(){return Ct.buffer(this.shape,this.dtype,this.dataSync())}async array(){var e=await this.data();return J(this.shape,e,"complex64"===this.dtype)}arraySync(){return J(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();var e=a().read(this.dataId);if("string"===this.dtype){var t=await e;try{return t.map(e=>It(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),a().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();var e=a().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>It(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();var e=await a().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(a().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ct.print(this,e)}clone(){return this.throwIfDisposed(),Ct.clone(this)}toString(e=!1){return Ft(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ct.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),a().makeVariable(this,e,t,n)}}Object.defineProperty(o,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),ie("Tensor",()=>o);class Pt extends o{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!O(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);a().disposeTensor(this),this.dataId=e.dataId,a().incRef(this,null)}dispose(){a().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Pt,Symbol.hasInstance,{value:e=>e instanceof o&&null!=e.assign&&e.assign instanceof Function}),(e=Wn=Wn||{}).float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",(e=x=x||{}).float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",(e=un=un||{}).float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",(e=D=D||{}).float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64";const Ot={float32:un,int32:Wn,bool:x,complex64:D};function Wt(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function Lt(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Ut(e,t){var n;return e.dtype===t.dtype?[e,t]:(n=function(e,t){if("string"!==e&&"string"!==t)return Ot[e][t];if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with `+t)}(e.dtype,t.dtype),[e.cast(n),t.cast(n)])}function Ht(e){var t=[];return function e(t,n,a){if(null==t)return;if(t instanceof o)return void n.push(t);if(r=t,!Array.isArray(r)&&"object"!=typeof r)return;var r;const i=t;for(const t in i){const r=i[t];a.has(r)||(a.add(r),e(r,n,a))}}(e,t,new Set),t}function Gt(e){return null!=e.kernelName}class jt{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class zt{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new jt}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null==this.backendInstance){var t=this.getSortedBackends();for(let e=0;e<t.length;e++){var n=t[e];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){var{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;var t=this.initializeBackend(e)["asyncInit"];if(t)return null}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(rt(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;var{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Mt(this.backendInstance),!0}setupRegisteredKernels(){lt(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){lt(t).forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(null==n)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{var e=n.factory();if(!e||e instanceof P||"function"!=typeof e.then)return this.registry[t]=e,{success:!0,asyncInit:!1};{const n=++this.pendingBackendInitId,a=e.then(e=>!(n<this.pendingBackendInitId||(this.registry[t]=e,this.pendingBackendInit=null))).catch(e=>(n<this.pendingBackendInitId||(this.pendingBackendInit=null,rt(`Initialization of backend ${t} failed`),rt(e.stack||e.message)),!1));return{success:this.pendingBackendInit=a,asyncInit:!0}}}catch(n){return rt(`Initialization of backend ${t} failed`),rt(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){var t=this.getSortedBackends();for(let e=0;e<t.length;e++){var n=t[e],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){var n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),i=a.refCount(t);a.disposeData(t,!0),(n.backend=e).move(t,r,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(()=>this.startScope(a),()=>this.endScope(n),()=>((n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return zt.nextTensorId++}nextVariableId(){return zt.nextVariableId++}clone(e){var t=g.runKernel(xe,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],t=>({x:()=>{var e={x:t};return g.runKernel(le,e,{dtype:"float32"})}}),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==ot(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){var a=this.backend.numDataIds();let r=0;n.forEach(e=>{r+="complex64"===e.dtype?3:1});n=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=a-t-r-n;if(0<a)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,a=[];const r=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;let t,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const u=Gt(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Gt(e)){const{kernelName:n,inputs:i,attrs:s}=e,u=(null==this.backendName&&this.backend,ot(n,this.backendName));L(null!=u,()=>`Cannot find registered kernel '${n}' for backend '${this.backendName}'`),t=()=>{const e=this.backend.numDataIds();o=u.kernelFunc({inputs:i,attrs:s,backend:this.backend});var t=Array.isArray(o)?o:[o],t=(this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,e,t),t.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(n,i,t);a=this.saveTensorsForBackwardMode(e)}return t}}else{const n=e["forwardFunc"],i=e=>{r&&(a=e.map(e=>this.keep(this.clone(e))))};t=()=>{var e=this.backend.numDataIds(),t=(o=this.tidy(()=>n(this.backend,i)),Array.isArray(o)?o:[o]);return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,t),t}}const{inputs:l,attrs:d}=e,c=Gt(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{n=this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(u,l,()=>t()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),p.outputs):t()}),r&&this.addTapeNode(u,l,n,c,a,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(e=>null!=l[e]?l[e].shape:null),outputShapes:n.map(e=>e.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(o)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(t,n,a){var r=ut(t);if(null==r)return[];{const t=r.inputsToSave||[],i=r.outputsToSave||[];let e;e=r.saveAllInputs?(L(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),Object.keys(n).map(e=>n[e])):t.map(e=>n[e]);r=a.filter((e,t)=>i[t]);return e.concat(r)}}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");a=a||this.backend;let r=e;"string"===(n=n||"float32")&&q(e[0])&&(r=e.map(e=>kt(e)));var i=a.write(r,t,n),e=new o(t,n,i,this.nextTensorId());if(this.trackTensor(e,a),"string"===n){const e=this.state.tensorInfo.get(i),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return e}makeTensorFromDataId(e,t,n,a){e={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(e,a)}makeTensorFromTensorInfo(e,t){var{dataId:e,shape:n,dtype:a}=e,n=new o(n,a,e,this.nextTensorId());return this.trackTensor(n,t),n}makeVariable(e,t=!0,n,a){n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));a=new Pt(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*z(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Pt||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(this.state.tensorInfo.has(e.dataId)){const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*z(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}disposeVariables(){for(const t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,0<this.state.numStringTensors&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;var t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return 0<this.state.gradientDepth&&0===this.state.kernelDepth}addTapeNode(e,t,a,n,r,i){t={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:a,saved:r},e=ut(e);null!=(n=null!=e?e.gradFunc:n)&&(t.gradient=e=>(e=e.map((e,t)=>{if(null!=e)return e;{const e=a[t],n=X(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}}),n(1<e.length?e:e[0],r,i))),this.state.activeTape.push(t)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Ht(e),n=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==a.id||this.track(e)})}gradients(e,p,h,t=!1){if(L(0<p.length,()=>"gradients() received an empty list of xs."),null!=h&&"float32"!==h.dtype)throw new Error(`dy must have 'float32' dtype, but has '${h.dtype}'`);const m=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e)),f=(L(m instanceof o,()=>"The result y returned by f() must be a tensor."),function(n,a,r){const i={},s={};for(let e=0;e<a.length;e++)i[a[e].id]=!0;for(let e=0;e<n.length;e++){const o=n[e],u=o.inputs;for(const n in u){const r=u[n];let t=!1;for(let e=0;e<a.length;e++)if(i[r.id]){o.outputs.forEach(e=>i[e.id]=!0),t=!0,s[o.id]=!0;break}if(t)break}}const o={},u=(o[r.id]=!0,{});for(let e=n.length-1;0<=e;e--){const r=n[e],i=r.inputs;for(let e=0;e<r.outputs.length;e++)if(o[r.outputs[e].id]){for(const n in i)o[i[n].id]=!0,u[r.id]=!0;break}}var t=[];for(let e=0;e<n.length;e++){const r=n[e];if(s[r.id]&&u[r.id]){const n={};for(const a in r.inputs){const s=r.inputs[a];i[s.id]&&(n[a]=s)}const a=Object.assign({},r);a.inputs=n,a.outputs=r.outputs,t.push(a)}}return t}(this.state.activeTape,p,m));if(!t&&0===f.length&&0<p.length)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[m.id]=null==h?(e=m.shape,u=function(){var t=X(U(e),"float32");for(let e=0;e<t.length;e++)t[e]=1;return t}(),g.makeTensor(u,e,"float32")):h;var n=t,a=f,r=e=>this.tidy(e),i=qt;for(let e=a.length-1;0<=e;e--){const l=a[e],d=[];if(l.outputs.forEach(e=>{e=n[e.id];null!=e?d.push(e):d.push(null)}),null==l.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${l.kernelName}.`);const c=l.gradient(d);for(const a in l.inputs){if(!(a in c))throw new Error(`Cannot backprop through input ${a}. Available gradients found: ${Object.keys(c)}.`);var s=r(()=>c[a]());if("float32"!==s.dtype)throw new Error(`Error in gradient for op ${l.kernelName}. The gradient of input ${a} must have 'float32' dtype, but has '${s.dtype}'`);var o=l.inputs[a];if(!O(s.shape,o.shape))throw new Error(`Error in gradient for op ${l.kernelName}. The gradient of input '${a}' has shape '${s.shape}', which does not match the shape of the input '${o.shape}'`);if(null==n[o.id])n[o.id]=s;else{const a=n[o.id];n[o.id]=i(a,s),a.dispose()}}}var e,u=p.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:m,grads:u}})}customGrad(i){return L(K(i),()=>"The f passed in customGrad(f) must be a function."),(...a)=>{let r;L(a.every(e=>e instanceof o),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};return a.forEach((e,t)=>{n[t]=e}),this.runKernelFunc({forwardFunc:(e,t)=>(L((r=i(...a,t)).value instanceof o,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),L(K(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),backwardsFunc:(e,t)=>{e=r.gradFunc(e,t),t=Array.isArray(e)?e:[e];L(t.length===a.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),L(t.every(e=>e instanceof o),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const n={};return t.forEach((e,t)=>{n[t]=()=>e}),n},inputs:n})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){var t=_t(),e=await this.backend.time(e);return e.wallMs=_t()-t,e}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new jt;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function $t(){const e=re();if(null==e._tfengine){const t=new ee(e);e._tfengine=new zt(t)}var t=e._tfengine.ENV;return c=t,a=()=>e._tfengine,e._tfengine}zt.nextTensorId=0,zt.nextVariableId=0;const g=$t();function qt(e,t){e={a:e,b:t};return g.runKernel("Add",e)}const t=c;t.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),t.registerFlag("IS_BROWSER",()=>"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope),t.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),t.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),t.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),t.registerFlag("PROD",()=>!1),t.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>t.getBool("DEBUG")),t.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),t.registerFlag("IS_TEST",()=>!1),t.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>t.getBool("DEBUG")),t.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),t.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),t.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);class Vt{static join(e){return new Vt(e).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,null!=n&&0!==(n=(n=n instanceof Array?n:[n]).map(e=>s(e)?e.buffer:e)).length){this.bufferUniformSize=n[0].byteLength;let t=0;for(let e=0;e<n.length;e++){var a=n[e],r=(e!==n.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0),t+a.byteLength);this.shards.push({buffer:a,start:t,end:r}),t=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}}slice(t=0,n=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),(n=Math.min(this.byteLength,n))<=t)return new ArrayBuffer(0);const a=this.findShardForByte(t);if(-1===a)throw new Error("Could not find start shard for byte "+t);var e=new ArrayBuffer(n-t),r=new Uint8Array(e);let i=0;for(let e=a;e<this.shards.length;e++){const a=this.shards[e],s=t+i-a.start,o=i,u=Math.min(n,a.end)-a.start,l=new Uint8Array(a.buffer,s,u-s);if(r.set(l,o),i+=l.length,n<a.end)break}return e}findShardForByte(t){var e;return 0===this.shards.length||t<0||t>=this.byteLength?-1:null!=this.bufferUniformSize?(this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex):0===n(this.shards[this.previousShardIndex])?this.previousShardIndex:-1===(e=function(e,t){let n=0,a=e.length;for(;n<=a;){var r=Math.floor((a-n)/2)+n,i=t(e[r]);if(0===i)return r;i<0?a=r:n=r+1}return-1}(this.shards,n))?-1:(this.previousShardIndex=e,this.previousShardIndex);function n(e){return t<e.start?-1:t>=e.end?1:0}}}const Kt="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Jt(e){return Kt?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Xt(e,t){t={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig),t}function Zt(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Jt(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Jt(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Vt(e.weightData).byteLength}}class r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==r.instance&&(r.instance=new r),r.instance}static registerSaveRouter(e){r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return r.getHandlers(e,"save")}static getLoadHandlers(e,t){return r.getHandlers(e,"load",t)}static getHandlers(t,e,n){const a=[];return("load"===e?r.getInstance().loadRouters:r.getInstance().saveRouters).forEach(e=>{e=e(t,n);null!==e&&a.push(e)}),a}}const Qt="tensorflowjs",Yt="models_store",b="model_info_store";function en(){if(!c.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,e=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function tn(e){e=e.result;e.createObjectStore(Yt,{keyPath:"modelPath"}),e.createObjectStore(b,{keyPath:"modelPath"})}class nn{constructor(e){if(this.indexedDB=en(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,d){return new Promise((o,u)=>{const l=this.indexedDB.open(Qt,1);l.onupgradeneeded=()=>tn(l),l.onsuccess=()=>{const i=l.result;if(null==d){const d=i.transaction(Yt,"readonly"),l=d.objectStore(Yt).get(this.modelPath);l.onsuccess=()=>{if(null==l.result)return i.close(),u(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(l.result.modelArtifacts)},l.onerror=e=>(i.close(),u(l.error)),d.oncomplete=()=>i.close()}else{d.weightData=Vt.join(d.weightData);const l=Zt(d),s=i.transaction(b,"readwrite");let t,a,r=s.objectStore(b);try{t=r.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(e){return u(e)}t.onsuccess=()=>{var e=(a=i.transaction(Yt,"readwrite")).objectStore(Yt);let n;try{n=e.put({modelPath:this.modelPath,modelArtifacts:d,modelArtifactsInfo:l})}catch(e){return u(e)}n.onsuccess=()=>o({modelArtifactsInfo:l}),n.onerror=e=>{var t=(r=s.objectStore(b)).delete(this.modelPath);t.onsuccess=()=>(i.close(),u(n.error)),t.onerror=e=>(i.close(),u(n.error))}},t.onerror=e=>(i.close(),u(t.error)),s.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}}},l.onerror=e=>u(l.error)})}}nn.URL_SCHEME="indexeddb://";e=e=>{return c.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nn.URL_SCHEME)?(e=e.slice(nn.URL_SCHEME.length),new nn(e)):null};r.registerSaveRouter(e),r.registerLoadRouter(e);const u="/",an="tensorflowjs_models";function rn(e){return{info:[an,e,"info"].join(u),topology:[an,e,"model_topology"].join(u),weightSpecs:[an,e,"weight_specs"].join(u),weightData:[an,e,"weight_data"].join(u),modelMetadata:[an,e,"model_metadata"].join(u)}}function sn(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}class on{constructor(e){if(!c.getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=rn(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");var t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),a=Zt(e),r=Vt.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Kt)return Buffer.from(e).toString("base64");var n=new Uint8Array(e);let a="";for(let e=0,t=n.length;e<t;e++)a+=String.fromCharCode(n[e]);return btoa(a)}(r));var i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch(e){throw sn(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");var t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;n=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==n)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=n;n=this.LS.getItem(this.keys.modelMetadata);if(null!=n){const e=JSON.parse(n);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}n=this.LS.getItem(this.keys.weightData);if(null==n)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Kt){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(n),t}}on.URL_SCHEME="localstorage://";var un=e=>{return c.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(on.URL_SCHEME)?(e=e.slice(on.URL_SCHEME.length),new on(e)):null};r.registerSaveRouter(un),r.registerLoadRouter(un);class ln{constructor(){L(c.getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),L("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){var t={};an,u;for(let e=0;e<this.LS.length;++e){var n=this.LS.key(e);n.startsWith("tensorflowjs_models/")&&n.endsWith("/info")&&(t[function(e){var t=e.split(u);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(u)}(n)]=JSON.parse(this.LS.getItem(n)))}return t}async removeModel(e){var t=rn(e=(t=e).startsWith(on.URL_SCHEME)?t.slice(on.URL_SCHEME.length):t);if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);e=JSON.parse(this.LS.getItem(t.info));return sn(t),e}}class l{constructor(){this.managers={}}static getInstance(){return null==l.instance&&(l.instance=new l),l.instance}static registerManager(e,t){L(null!=e,()=>"scheme must not be undefined or null."),L(0<(e=e.endsWith("://")?e.slice(0,e.indexOf("://")):e).length,()=>"scheme must not be an empty string.");var n=l.getInstance();L(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){var t=l.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(l.getInstance().managers)}}if(c.get("IS_BROWSER")){c.setPlatform("browser",new class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&c.getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length)&&(this.functionRefs=[],this.handledMessageCount=0)},!0))):setTimeout(e,t)}isTypedArray(e){return dt(e)}});try{l.registerManager(on.URL_SCHEME,new ln)}catch(T){}try{l.registerManager(nn.URL_SCHEME,new class{constructor(){this.indexedDB=en()}async listModels(){return new Promise((a,r)=>{const i=this.indexedDB.open(Qt,1);i.onupgradeneeded=()=>tn(i),i.onsuccess=()=>{const t=i.result,e=t.transaction(b,"readonly"),n=e.objectStore(b).getAll();n.onsuccess=()=>{var e={};for(const a of n.result)e[a.modelPath]=a.modelArtifactsInfo;a(e)},n.onerror=e=>(t.close(),r(n.error)),e.oncomplete=()=>t.close()},i.onerror=e=>r(i.error)})}async removeModel(u){var e;return u=(e=u).startsWith(nn.URL_SCHEME)?e.slice(nn.URL_SCHEME.length):e,new Promise((s,o)=>{const t=this.indexedDB.open(Qt,1);t.onupgradeneeded=()=>tn(t),t.onsuccess=()=>{const n=t.result,e=n.transaction(b,"readwrite"),a=e.objectStore(b),r=a.get(u);let i;r.onsuccess=()=>{if(null==r.result)return n.close(),o(new Error(`Cannot find model with path '${u}' in IndexedDB.`));{const e=a.delete(u),t=()=>{var e=(i=n.transaction(Yt,"readwrite")).objectStore(Yt).delete(u);e.onsuccess=()=>s(r.result.modelArtifactsInfo),e.onerror=e=>o(r.error)};e.onsuccess=t,e.onerror=e=>(t(),n.close(),o(r.error))}},r.onerror=e=>(n.close(),o(r.error)),e.oncomplete=()=>{null==i?n.close():i.oncomplete=()=>n.close()}},t.onerror=e=>o(t.error)})}})}catch(T){}}let dn;function cn(e,t="float32",n){return t=t||"float32",Z(e),new Bt(e,t,n)}function pn(e,t){let n=e;if(s(e))return"string"===t?[]:[e.length];if(Wt(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(Lt(e))return[e.buffer.size/(null==t?4:z(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||s(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&c.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(n,e,a){if(a=a||[],!Array.isArray(n)&&!s(n))return void L(0===e.length,()=>`Element arr[${a.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);L(0<e.length,()=>`Element arr[${a.join("][")}] should be a primitive, but is an array of ${n.length} elements`),L(n.length===e[0],()=>`Element arr[${a.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let e=0;e<n.length;++e)t(n[e],r,a.concat(e))}(e,a,[]),a}function hn(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${a}' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,a="numeric"){if(e instanceof o)return hn(a,e.dtype,t,n),e;let r=V(e);if(hn(a,r="string"!==r&&0<=["bool","int32","float32"].indexOf(a)?a:r,t,n),null==e||!s(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const a=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${a}'`)}a=pn(e,r),s(e)||Array.isArray(e)||(e=[e]),t="string"!==r?vt(e,r):St(e,[],!0);return g.makeTensor(t,a,r)}function n(e){var t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";t=(...e)=>{g.startScope(n);try{var t=a(...e);return Q(t)&&console.error("Cannot return a Promise inside of tidy."),g.endScope(t),t}catch(e){throw g.endScope(null),e}};return Object.defineProperty(t,"name",{value:n,configurable:!0}),t}c.get("IS_NODE")&&!c.get("IS_BROWSER")&&c.setPlatform("node",new class{constructor(){this.util=tu(628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=c.global.fetch?c.global.fetch(e,t):(dn=null==dn?tu(410):dn)(e,t)}now(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});const mn=n({cast_:function(e,t){e=d(e,"x","cast");if("bool"!==t&&"complex64"!==t&&"float32"!==t&&"int32"!==t&&"string"!==t)throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==e.dtype||"string"!==t&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");e={x:e},t={dtype:t};return g.runKernel(le,e,t)}}),fn=n({clone_:function(e){e={x:d(e,"x","clone","string_or_numeric")};return g.runKernel(xe,e)}});function y(e,t){return g.tidy(e,t)}function w(e){Ht(e).forEach(e=>e.dispose())}$t(),Ct={buffer:cn,cast:mn,clone:fn,print:function(e,t=!1){console.log(e.toString(t))}};const v=n({add_:function(e,t){e=d(e,"a","add"),t=d(t,"b","add"),[e,t]=Ut(e,t),e={a:e,b:t};return g.runKernel("Add",e)}}),gn=n({floorDiv_:function(e,t){e=d(e,"a","floorDiv"),t=d(t,"b","floorDiv"),[e,t]=Ut(e,t),e={a:e,b:t};return g.runKernel(Se,e)}}),_=n({div_:function(e,t){var e=d(e,"a","div"),t=d(t,"b","div");return[e,t]=Ut(e,t),"int32"===e.dtype&&"int32"===t.dtype?gn(e,t):(e={a:e,b:t},g.runKernel(_e,e,{}))}}),k=n({mul_:function(e,t){e=d(e,"a","mul"),t=d(t,"b","mul"),[e,t]=Ut(e,t),e={a:e,b:t};return g.runKernel(Ce,e)}}),bn=n({sqrt_:function(e){e={x:d(e,"x","sqrt","float32")};return g.runKernel("Sqrt",e)}}),yn=n({square_:function(e){e=d(e,"x","square");return g.runKernel("Square",{x:e},{})}}),I=n({zerosLike_:function(e){e={x:d(e,"x","zerosLike")};return g.runKernel(Ye,e)}});function wn(e,t,n,a){if(null==a)a=V(e);else if("complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Lt(e)||Wt(e)){if("float32"!==a&&"int32"!==a)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${a}.`);return g.backend.createTensorFromGPUData(e,t||n,a)}if(!s(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Z(t);const e=U(t),a=U(n);L(e===a,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has `+a);for(let e=0;e<n.length;++e){const a=n[e],r=e!==n.length-1||a!==U(t.slice(e));L(n[e]===t[e]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return s(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?vt(e,a):St(e,[],!0),g.makeTensor(e,t,a)}function vn(e,t){if((s(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"!==t||!s(e)||e instanceof Uint8Array)return wn(e,[],[],t);throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.")}const _n=new Map,kn=new Map;class In{constructor(){this.classNameMap={}}static getMap(){return null==In.instance&&(In.instance=new In),In.instance}static register(e){In.getMap().classNameMap[e.className]=[e,e.fromConfig]}}class Sn extends class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}{minimize(e,t=!1,n){const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:r[e.name]}));this.applyGradients(e)}else this.applyGradients(r);return w(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){{var n=e,a=t;if(L(K(n),()=>"The f passed in variableGrads(f) must be a function"),L(null==a||Array.isArray(a)&&a.every(e=>e instanceof Pt),()=>"The varList passed in variableGrads(f, varList) must be an array of variables"),!(e=null!=a)){a=[];for(const n in g.registeredVariables)a.push(g.registeredVariables[n])}const r=e?a.filter(e=>!e.trainable):null,i=a.length,{value:s,grads:o}=(L(0<(a=a.filter(e=>e.trainable)).length,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`),g.gradients(n,a,null,!0)),u=(L(o.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),L(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`),{});return a.forEach((e,t)=>{null!=o[t]&&(u[e.name]=o[t])}),null!=r&&r.forEach(e=>u[e.name]=null),{value:s,grads:u}}}dispose(){null!=this.iterations_&&w(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:vn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Sn,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});const Mn=n({pow_:function(e,t){e=d(e,"base","pow"),t=d(t,"exp","pow"),[e,t]=Ut(e,t),e={a:e,b:t};return g.runKernel("Pow",e)}}),An=n({sub_:function(e,t){e=d(e,"a","sub"),t=d(t,"b","sub"),[e,t]=Ut(e,t),e={a:e,b:t};return g.runKernel("Sub",e)}}),xn=n({abs_:function(e){var t=d(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return g.runKernel("ComplexAbs",e)}{const e={x:t};return g.runKernel("Abs",e)}}});function Nn(a,r){var i=Math.max(a.length,r.length),s=new Array(i);for(let n=0;n<i;n++){let e=a[a.length-n-1],t=(null==e&&(e=1),r[r.length-n-1]);if(null==t&&(t=1),1===e)s[i-n-1]=t;else{if(1!==t&&e!==t)throw Error(`Operands could not be broadcast together with shapes ${a} and ${r}.`);s[i-n-1]=e}}return s}const En=n({maximum_:function(e,t){let n=d(e,"a","maximum"),a=d(t,"b","maximum");[n,a]=Ut(n,a),"bool"===n.dtype&&(n=mn(n,"int32"),a=mn(a,"int32")),Nn(n.shape,a.shape);e={a:n,b:a};return g.runKernel(De,e)}});class Fn extends Sn{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(r){(Array.isArray(r)?r.map(e=>e.name):Object.keys(r)).forEach((e,t)=>{const n=Array.isArray(r)?r[t].tensor:r[e];if(null!=n){const a=g.registeredVariables[e];y(()=>{var e=v(k(this.c,n),a);a.assign(e)})}}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(e=vn(-e),g.keep(e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}const Dn=[class extends Sn{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=g.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(e=>e.name):Object.keys(n)).forEach((e,t)=>{const a=g.registeredVariables[e],r=(null==this.accumulatedGrads[t]&&(this.accumulatedGrads[t]={originalName:e+"/accum_grad",variable:y(()=>I(a).variable(!1))}),null==this.accumulatedUpdates[t]&&(this.accumulatedUpdates[t]={originalName:e+"/accum_var",variable:y(()=>I(a).variable(!1))}),Array.isArray(n)?n[t].tensor:n[e]);if(null!=r){const i=this.accumulatedGrads[t].variable,s=this.accumulatedUpdates[t].variable;y(()=>{var e=v(k(i,this.rho),k(yn(r),1-this.rho)),t=k(_(bn(v(s,this.epsilon)),bn(v(i,this.epsilon))),r),n=v(k(s,this.rho),k(yn(t),1-this.rho)),e=(i.assign(e),s.assign(n),v(k(t,-this.learningRate),a));a.assign(e)})}}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(w(this.accumulatedGrads.map(e=>e.variable)),w(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){var e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){var t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},class extends Sn{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(i){(Array.isArray(i)?i.map(e=>e.name):Object.keys(i)).forEach((e,t)=>{const n=g.registeredVariables[e];if(null==this.accumulatedGrads[t]){const i=!1;this.accumulatedGrads[t]={originalName:e+"/accumulator",variable:y(()=>function(e,t){Z(e);e={shape:e,value:t,dtype:V(t)};return g.runKernel("Fill",{},e)}(n.shape,this.initialAccumulatorValue).variable(!1))}}const a=Array.isArray(i)?i[t].tensor:i[e];if(null!=a){const r=this.accumulatedGrads[t].variable;y(()=>{var e=v(r,yn(a)),e=(r.assign(e),v(k(_(a,bn(v(e,g.backend.epsilon()))),-this.learningRate),n));n.assign(e)})}}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&w(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},class extends Sn{static get className(){return"Adam"}constructor(e,t,n,a=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],y(()=>{this.accBeta1=vn(t).variable(),this.accBeta2=vn(n).variable()}),null==a&&(this.epsilon=g.backend.epsilon())}applyGradients(l){const e=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);y(()=>{const o=An(1,this.accBeta1),u=An(1,this.accBeta2);e.forEach((e,t)=>{const n=g.registeredVariables[e];null==this.accumulatedFirstMoment[t]&&(this.accumulatedFirstMoment[t]={originalName:e+"/m",variable:y(()=>I(n).variable(!1))}),null==this.accumulatedSecondMoment[t]&&(this.accumulatedSecondMoment[t]={originalName:e+"/v",variable:y(()=>I(n).variable(!1))});var a,r,i,s,e=Array.isArray(l)?l[t].tensor:l[e];null!=e&&(s=this.accumulatedFirstMoment[t].variable,t=this.accumulatedSecondMoment[t].variable,a=v(k(s,this.beta1),k(e,1-this.beta1)),e=v(k(t,this.beta2),k(yn(e),1-this.beta2)),r=_(a,o),i=_(e,u),s.assign(a),t.assign(e),s=v(k(_(r,v(bn(i),this.epsilon)),-this.learningRate),n),n.assign(s))}),this.accBeta1.assign(k(this.accBeta1,this.beta1)),this.accBeta2.assign(k(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&w(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&w(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){var e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),y(()=>{this.accBeta1.assign(Mn(this.beta1,this.iterations_+1)),this.accBeta2.assign(Mn(this.beta2,this.iterations_+1))});var t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},class extends Sn{static get className(){return"Adamax"}constructor(e,t,n,a=null,r=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],y(()=>{this.iteration=vn(0).variable(),this.accBeta1=vn(t).variable()}),null==a&&(this.epsilon=g.backend.epsilon())}applyGradients(u){const e=Array.isArray(u)?u.map(e=>e.name):Object.keys(u);y(()=>{const s=An(1,this.accBeta1),o=_(-this.learningRate,v(k(this.iteration,this.decay),1));e.forEach((e,t)=>{var n,a,r,i=g.registeredVariables[e],e=(null==this.accumulatedFirstMoment[t]&&(this.accumulatedFirstMoment[t]={originalName:e+"/m",variable:I(i).variable(!1)}),null==this.accumulatedWeightedInfNorm[t]&&(this.accumulatedWeightedInfNorm[t]={originalName:e+"/v",variable:I(i).variable(!1)}),Array.isArray(u)?u[t].tensor:u[e]);null!=e&&(n=this.accumulatedFirstMoment[t].variable,t=this.accumulatedWeightedInfNorm[t].variable,a=v(k(n,this.beta1),k(e,1-this.beta1)),r=k(t,this.beta2),e=xn(e),r=En(r,e),n.assign(a),t.assign(r),e=v(k(_(o,s),_(a,v(r,this.epsilon))),i),i.assign(e))}),this.iteration.assign(v(this.iteration,1)),this.accBeta1.assign(k(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&w(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&w(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},class extends Fn{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=vn(this.momentum)}applyGradients(i){(Array.isArray(i)?i.map(e=>e.name):Object.keys(i)).forEach((e,t)=>{const n=g.registeredVariables[e];if(null==this.accumulations[t]){const i=!1;this.accumulations[t]={originalName:e+"/momentum",variable:y(()=>I(n).variable(!1))}}const a=this.accumulations[t].variable,r=Array.isArray(i)?i[t].tensor:i[e];null!=r&&y(()=>{var e=v(k(this.m,a),r),t=this.useNesterov?v(k(this.c,v(r,k(e,this.m))),n):v(k(this.c,e),n);a.assign(e),n.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&w(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},class extends Sn{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,a=null,r=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=g.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(e=>e.name):Object.keys(t)).forEach((e,i)=>{const s=g.registeredVariables[e],o=(null==this.accumulatedMeanSquares[i]&&(this.accumulatedMeanSquares[i]={originalName:e+"/rms",variable:y(()=>I(s).variable(!1))}),null==this.accumulatedMoments[i]&&(this.accumulatedMoments[i]={originalName:e+"/momentum",variable:y(()=>I(s).variable(!1))}),null==this.accumulatedMeanGrads[i]&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:e+"/mg",variable:y(()=>I(s).variable(!1))}),Array.isArray(t)?t[i].tensor:t[e]);if(null!=o){const u=this.accumulatedMeanSquares[i].variable,l=this.accumulatedMoments[i].variable;y(()=>{const e=v(k(u,this.decay),k(yn(o),1-this.decay));if(this.centered){var t=this.accumulatedMeanGrads[i].variable,n=v(k(t,this.decay),k(o,1-this.decay)),a=_(k(o,this.learningRate),bn(An(e,v(yn(n),this.epsilon)))),a=v(k(l,this.momentum),a),t=(u.assign(e),t.assign(n),l.assign(a),An(s,a));s.assign(t)}else{const e=v(k(u,this.decay),k(yn(o),1-this.decay)),r=v(k(l,this.momentum),_(k(o,this.learningRate),bn(v(e,this.epsilon)))),i=(u.assign(e),l.assign(r),An(s,r));s.assign(i)}})}}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&w(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&w(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&w(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){var e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},Fn];function Rn(e){return new Promise(e=>setTimeout(e)).then(e)}class Tn{constructor(e){if(!c.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");null!=(e=e.startsWith(Tn.URL_SCHEME)?e.slice(Tn.URL_SCHEME.length):e)&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Vt.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=Xt(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await Rn(()=>r.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Rn(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Zt(e)}}}}function Bn(n,a,r,i){var e,t,s;L(null!=(s=n)&&Array.isArray(s)&&0<s.length,()=>"promises must be a none empty array"),e=r=null==r?0:r,t=i=null==i?1:i,L(0<=e&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+e),L(0<=t&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+t),L(e<=t,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction `+t);let o=0;return Promise.all(n.map(e=>(e.then(e=>{var t=r+ ++o/n.length*(i-r);return a(t),e}),e)))}Tn.URL_SCHEME="downloads://",r.registerSaveRouter(e=>{return c.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Tn.URL_SCHEME)?([e="model"]=[e.slice(Tn.URL_SCHEME.length)],new Tn(e)):null});class Cn{constructor(e,t){if(this.DEFAULT_METHOD="POST",this.weightPathPrefix=(t=null==t?{}:t).weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(L("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=c.platform.fetch,L(null!=e&&0<e.length,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&L(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");var t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=Xt(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=Vt.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}t=await this.fetch(this.path,t);if(t.ok)return{modelArtifactsInfo:Zt(e),responses:[t]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${t.status}.`)}async load(){var t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let e;try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}var n=e.modelTopology,a=e.weightsManifest;if(null==n&&null==a)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return async function(e,t){let n,a;null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest));var t=e,e=n,r=a,i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(i.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!r)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=e,i.weightData=r}return null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(i.initializerSignature=t.initializerSignature),i}(e,e=>this.loadWeights(e))}async loadWeights(n){const e=Array.isArray(this.path)?this.path[1]:this.path,[t,a]=(u=e,l=u.lastIndexOf("/"),d=u.lastIndexOf("?"),[u.substring(0,l)+"/",l<d?u.substring(d):""]),r=this.weightPathPrefix||t,i=function(){var e=[];for(const t of n)e.push(...t.weights);return e}(),s=[],o=[];var u,l,d;for(const e of n)for(const n of e.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(n)):s.push(r+n+a);return this.weightUrlConverter&&s.push(...await Promise.all(o)),[i,await async function(e,t){const n=null==(t=null==t?{}:t).fetchFunc?c.platform.fetch:t.fetchFunc,a=e.map(e=>n(e,t.requestInit,{isBinary:!0})),r=(null==t.onProgress?await Promise.all(a):await Bn(a,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(r):await Bn(r,t.onProgress,.5,1)}(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})]}}function Pn(e){return null!=e.match(Cn.URL_SCHEME_REGEX)}Cn.URL_SCHEME_REGEX=/^https?:\/\//;var S,On,Wn=(e,t)=>{return("undefined"!=typeof fetch||null!=t&&null!=t.fetchFunc)&&(Array.isArray(e)?e.every(e=>Pn(e)):Pn(e))?(e=e,t=t,new Cn(e,t)):null};function Ln(e,t,n){var a=t.shape.length,a=1<a?t.shape[a-1]:1,r=n.length;let i=1;for(let e=a;e<r;++e)i*=n[e];var s=a<1?1:a;return{sliceRank:a,numUpdates:U(t.shape)/s,sliceSize:i,strides:[...H(n.slice(0,a)),1],outputSize:U(n)}}function Un(t,n,a){let r=a.length;for(let e=0;e<a.length;e++)if(1<a[e]){r=e;break}for(let e=r+1;e<a.length;e++)if(0<n[e]||a[e]!==t[e])return!1;return!0}function Hn(t,n){let a=0<t.length?t[t.length-1]:1;for(let e=0;e<t.length-1;e++)a+=t[e]*n[e];return a}function Gn(e,t,n,a,r,i){if(r[t])return 0<n?i[t]:i[t+1&1];{const t=e<0?a+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}function jn(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function zn(t,n){var a=[],r=t.length;for(let e=0;e<r;e++)-1===n.indexOf(e)&&a.push(t[e]);return[a,n.map(e=>t[e])]}function $n(e,a){{var r=e,i=a.map(e=>1),s=a,o=r.length+i.length,u=[];let t=0,n=0;for(let e=0;e<o;e++)-1===s.indexOf(e)?u.push(r[t++]):u.push(i[n++]);return u}}function M(e,t,n){L(jn(t,n),()=>e+` supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function qn(t,n){if(jn(t,n))return null;const a=[];for(let e=0;e<n;++e)-1===t.indexOf(e)&&a.push(e);return t.forEach(e=>a.push(e)),a}function Vn(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Kn(t,n){var a=[];for(let e=n-t;e<n;++e)a.push(e);return a}function Jn(t,n){var a=t[0].slice();for(let e=1;e<t.length;e++)a[n]+=t[e][n];return a}function Xn(e,t,n,a,r="NHWC",i){return Yn(e,[...t,e[3]],n,i,a,null,null,oa(r))}function Zn(e,t,n,a,r,i,s="channelsLast"){var[t,o]=na(t);let u;if("channelsLast"===s)u=[t,o,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=[t,o,e[1],e[1]]}return Yn(e,u,n,a,r,i,!1,s)}function Qn(e,t,n,a,r,i,s="NDHWC"){var[t,o,u]=aa(t);let l,d;if("NDHWC"===s)d="channelsLast",l=[t,o,u,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat "+s);d="channelsFirst",l=[t,o,u,e[1],e[1]]}return ea(e,l,n,a,r,!1,d,i)}function Yn(e,t,n,a,r,i,s=!1,o="channelsLast"){let[u,l,d,c]=[-1,-1,-1,-1];if("channelsLast"===o)[u,l,d,c]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[u,c,l,d]=e}var[p,h,,m]=t,[n,f]=na(n),[a,g]=na(a),b=ra(p,a),y=ra(h,g),{padInfo:r,outHeight:i,outWidth:w}=function(e,t,n,a,r,i,s,o,u){let l,d,c;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};p=[t,n],h=i,m=a,g=o,null==(f=e)&&(f=ta(p,h,m)),b=p[1];const r=[ia((p[0]-h+2*f)/m+1,g),ia((b-h+2*f)/m+1,g)];d=r[0],c=r[1]}else if("same"===e){d=Math.ceil(t/a),c=Math.ceil(n/r);const e=Math.max(0,(d-1)*a+i-t),o=Math.max(0,(c-1)*r+s-n),u=Math.floor(e/2),y=e-u,w=Math.floor(o/2);l={top:u,bottom:y,left:w,right:o-w,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-i+1)/a),c=Math.ceil((n-s+1)/r);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);p=("channelsLast"===u?e[1]:e[2])[0],b=("channelsLast"===u?e[1]:e[2])[1],h=("channelsLast"===u?e[2]:e[3])[0],f=("channelsLast"===u?e[2]:e[3])[1];l={top:p,bottom:b,left:h,right:f,type:0===p&&0===b&&0===h&&0===f?"VALID":"EXPLICIT"},d=ia((t-i+p+b)/a+1,o),c=ia((n-s+h+f)/r+1,o)}var p,h,m,f,g,b;return{padInfo:l,outHeight:d,outWidth:c}}(r,l,d,n,f,b,y,i,o),s=s?m*c:m;let v;return"channelsFirst"===o?v=[u,s,i,w]:"channelsLast"===o&&(v=[u,i,w,s]),{batchSize:u,dataFormat:o,inHeight:l,inWidth:d,inChannels:c,outHeight:i,outWidth:w,outChannels:s,padInfo:r,strideHeight:n,strideWidth:f,filterHeight:p,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:y,dilationHeight:a,dilationWidth:g,inShape:e,outShape:v,filterShape:t}}function ea(e,t,n,a,r,i=!1,s="channelsLast",o){let[u,l,d,c,p]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[u,l,d,c,p]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[u,p,l,d,c]=e}var[h,m,f,,g]=t,[n,b,y]=aa(n),[a,w,v]=aa(a),_=ra(h,a),k=ra(m,w),I=ra(f,v),{padInfo:r,outDepth:o,outHeight:S,outWidth:M}=function(e,t,n,a,r,i,s,o,u,l,d){let c,p,h,m;if("number"==typeof(e="valid"===e?0:e)){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};d=function(t,n,a,r,i){null==r&&(r=ta(t,n[0],a[0]));var s=[0,0,0,1];for(let e=0;e<3;e++)t[e]+2*r>=n[e]&&(s[e]=ia((t[e]-n[e]+2*r)/a[e]+1,i));return s}([t,n,a,1],[o,u,l],[r,i,s],e,d);p=d[0],h=d[1],m=d[2]}else{if("same"!==e)throw Error("Unknown padding parameter: "+e);{p=Math.ceil(t/r),h=Math.ceil(n/i),m=Math.ceil(a/s);const e=(p-1)*r+o-t,d=(h-1)*i+u-n,f=(m-1)*s+l-a,g=Math.floor(e/2),b=e-g,y=Math.floor(d/2),w=d-y,v=Math.floor(f/2);c={top:y,bottom:w,left:v,right:f-v,front:g,back:b,type:"SAME"}}}return{padInfo:c,outDepth:p,outHeight:h,outWidth:m}}(r,l,d,c,n,b,y,_,k,I,o),i=i?g*p:g;let A;return"channelsFirst"===s?A=[u,i,o,S,M]:"channelsLast"===s&&(A=[u,o,S,M,i]),{batchSize:u,dataFormat:s,inDepth:l,inHeight:d,inWidth:c,inChannels:p,outDepth:o,outHeight:S,outWidth:M,outChannels:i,padInfo:r,strideDepth:n,strideHeight:b,strideWidth:y,filterDepth:h,filterHeight:m,filterWidth:f,effectiveFilterDepth:_,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationDepth:a,dilationHeight:w,dilationWidth:v,inShape:e,outShape:A,filterShape:t}}function ta(e,t,n,a=1){t=ra(t,a);return Math.floor((e[0]*(n-1)-n+t)/2)}function na(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function aa(e){return"number"==typeof e?[e,e,e]:e}function ra(e,t){return t<=1?e:e+(e-1)*(t-1)}function ia(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function sa(e){var[e,t,n]=na(e);return 1===e&&1===t&&1===n}function oa(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ua(t,n,a,e=!0){let r=[];if(e)(r=r.concat(n.slice(0))).push(t[0]/a),r=r.concat(t.slice(1));else{r=r.concat(t[0]);const a=n.length;for(let e=0;e<a;++e)r=r.concat([t[e+1]/n[e],n[e]]);r=r.concat(t.slice(a+1))}return r}function la(t,n,a=!0){var r=[];if(a){r.push(n);for(let e=n+1;e<t;++e)e<=2*n?(r.push(e),r.push(e-(n+1))):r.push(e)}else{const a=[],i=[];for(let e=1;e<t;++e)(e>=2*n+1||e%2==1?i:a).push(e);r.push(...a),r.push(0),r.push(...i)}return r}function da(t,n,e,a=!0){var r=[];r.push(a?t[0]/e:t[0]*e);for(let e=1;e<t.length;++e)e<=n.length?r.push(a?n[e-1]*t[e]:t[e]/n[e-1]):r.push(t[e]);return r}function ca(e){try{return e.map(e=>It(e))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+e)}}function pa(e){return e.map(e=>kt(e))}r.registerSaveRouter(Wn),r.registerLoadRouter(Wn);let ha;for(const eu of Dn)!function(e,t,n){L(null!=e.className,()=>"Class being registered does not have the static className property defined."),L("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),L(0<e.className.length,()=>"Class being registered has an empty-string as its className, which is disallowed."),t=(t=void 0===t?"Custom":t)+">"+(n=void 0===n?e.className:n),In.register(e),_n.set(t,e),kn.set(e,t)}(eu);(x=S=S||{})[x.float32=0]="float32",x[x.int32=1]="int32",x[x.bool=2]="bool",x[x.string=3]="string",x[x.complex64=4]="complex64",(D=On=On||{})[D.linear=0]="linear",D[D.relu=1]="relu",D[D.relu6=2]="relu6",D[D.prelu=3]="prelu",D[D.leakyrelu=4]="leakyrelu",D[D.sigmoid=5]="sigmoid",D[D.elu=6]="elu";e={kernelName:tt,backendName:"wasm",setupFunc:function(e){ha=e.wasm.cwrap(tt,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{a:e,b:a,bias:r,preluActivationWeights:i}=e;if("float32"!==e.dtype||"float32"!==a.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var{transposeA:n,transposeB:s,activation:o,leakyreluAlpha:u}=n,l=t.dataIdMap.get(e.dataId).id,d=t.dataIdMap.get(a.dataId).id;let c=0;if(null!=r){const e=t.dataIdMap.get(r.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);c=e.id}r=null==i?0:t.dataIdMap.get(i.dataId).id,i=On[o];if(null==i)throw new Error(o+" activation not yet supported for FusedConv2D in the wasm backend.");var o=n?e.shape[2]:e.shape[1],p=s?a.shape[1]:a.shape[2],h=Nn(e.shape.slice(0,-2),a.shape.slice(0,-2)),h=t.makeOutput([...h,o,p],e.dtype),o=t.dataIdMap.get(h.dataId).id,p=new Uint8Array(new Int32Array(e.shape).buffer),t=new Uint8Array(new Int32Array(a.shape).buffer);return ha(l,p,e.shape.length,d,t,a.shape.length,n,s,i,c,r,u||0,o),h}};function A(t,r){let i;return{kernelName:t,backendName:"wasm",setupFunc:function(e){i=e.wasm.cwrap(t,null,["number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:{x:t}}=e,n=e.dataIdMap.get(t.dataId).id,a=e.makeOutput(t.shape,r||t.dtype),e=e.dataIdMap.get(a.dataId).id;return 0!==U(a.shape)&&i(n,S[t.dtype],e),a}}}var un=A("Abs"),Wn=A("Acos"),x=A("Acosh");function F(t,e,u){let l;return{kernelName:t,backendName:"wasm",setupFunc:function(e){l=e.wasm.cwrap(t,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t,{backend:e,inputs:n}=e,{a:n,b:a}=n,r=e.dataIdMap.get(n.dataId).id,i=e.dataIdMap.get(a.dataId).id,s=null!=u?u:n.dtype,o=Nn(n.shape,a.shape),s=e.makeOutput(o,s);return 0!==U(o)&&(o=new Uint8Array(new Int32Array(n.shape).buffer),t=new Uint8Array(new Int32Array(a.shape).buffer),e=e.dataIdMap.get(s.dataId).id,l(r,o,n.shape.length,i,t,a.shape.length,S[n.dtype],e)),s}}}var D=F("Add");let ma;var fa={kernelName:"AddN",backendName:"wasm",setupFunc:function(e){ma=e.wasm.cwrap("AddN",null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,a=n.makeOutput(t[0].shape,t[0].dtype);var r,i;return 0!==U(a.shape)&&(e=t.map(e=>n.dataIdMap.get(e.dataId).id),r=new Uint8Array(new Int32Array(e).buffer),i=n.dataIdMap.get(a.dataId).id,ma(r,e.length,S[a.dtype],i)),a}};function ga(e){var t,{inputs:{x:e},backend:n}=e;return"string"===e.dtype?wn(t=n.readSync(e.dataId),e.shape,pn(t,t=e.dtype),t):(t=n.makeOutput(e.shape,e.dtype),e=n.typedArrayFromHeap(e),n.typedArrayFromHeap(t).set(e),t)}var ba={kernelName:xe,backendName:"wasm",kernelFunc:ga};let ya;function wa(e){var{inputs:t,backend:n,attrs:e}=e,[a,r]=function(t,n){var a=[],r=[];for(let e=0;e<t.length;++e)1!==t[e]&&a.push(t[e]),1!==t[n[e]]&&r.push(n[e]);for(let n=0;n<r.length;++n){let t=-1;for(let e=0;e<r.length;++e)r[e]>=n&&(-1===t||r[t]>r[e])&&(t=e);r[t]=n}return[a,r]}(t.x.shape,e.perm);let i=!0;for(let e=0;e<r.length;e++)r[e]!==e&&(i=!1);var s=function(t,n){var a=new Array(t.length);for(let e=0;e<a.length;e++)a[e]=t[n[e]];return a}(t.x.shape,e.perm),e={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(i){const e=ga({inputs:t,backend:n});return e.shape=s,e}var a=n.makeOutput(s,e.dtype),t=n.dataIdMap.get(e.dataId).id,s=n.dataIdMap.get(a.dataId).id,n=new Uint8Array(new Int32Array(r).buffer),o=new Uint8Array(new Int32Array(e.shape).buffer);return ya(t,o,e.shape.length,S[e.dtype],s,n,r.length),a}var va={kernelName:Qe,backendName:"wasm",kernelFunc:wa,setupFunc:function(e){ya=e.wasm.cwrap(Qe,null,["number","array","number","number","number","array","number"])}};function _a(e,t,n){const a=e.shape,r=e.shape.length,i=G(t,a);let s=i;var o=qn(s,r);let u=null,l=!1;if(null!=o){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=a[o[e]];s=Kn(s.length,r),u=wa({inputs:{x:e},attrs:{perm:o},backend:n});const i=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==i&&(l=!0)}return{transposed:u,originalAxes:i,axes:s,inputWasTransposed:l}}let ka;var Ia={kernelName:"All",backendName:"wasm",setupFunc:function(e){ka=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,e=e["x"];let r=t.dataIdMap.get(e.dataId).id,i=e;var{transposed:n,axes:s,originalAxes:o,inputWasTransposed:u}=_a(e,n,t),[s,l]=(u&&(i=n,r=t.dataIdMap.get(n.dataId).id),M("all",s,i.shape.length),zn(i.shape,s)),l=U(l),s=t.makeOutput(s,e.dtype);if(0!==U(i.shape)){const e=t.dataIdMap.get(s.dataId).id;ka(r,l,e)}if(u&&t.disposeData(n.dataId),a){const e=$n(s.shape,o);s.shape=e}return s}};let Sa;var Ma={kernelName:"Any",backendName:"wasm",setupFunc:function(e){Sa=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,e=e["x"];let r=t.dataIdMap.get(e.dataId).id,i=e;var{transposed:n,axes:s,originalAxes:o,inputWasTransposed:u}=_a(e,n,t),[s,l]=(u&&(i=n,r=t.dataIdMap.get(n.dataId).id),M("any",s,i.shape.length),zn(i.shape,s)),l=U(l),s=t.makeOutput(s,e.dtype);if(0!==U(i.shape)){const e=t.dataIdMap.get(s.dataId).id;Sa(r,l,e)}if(u&&t.disposeData(n.dataId),a){const e=$n(s.shape,o);s.shape=e}return s}};function Aa(t){let l;return{kernelName:t,backendName:"wasm",setupFunc:function(e){l=e.wasm.cwrap(t,null,["number","number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,n=n["axis"],e=e["x"],a=t.dataIdMap.get(e.dataId).id;let r=a,i=e;var{transposed:n,axes:e,inputWasTransposed:s}=_a(e,n,t);if(s){const e=t.dataIdMap.get(n.dataId).id;e!==a&&(i=n,r=e)}var a=i.shape.slice(0,-1),a=t.makeOutput(a,"int32"),o=t.dataIdMap.get(a.dataId).id,u=U(a.shape),e=i.shape[e[0]];return l(r,S[i.dtype],u,e,o),s&&t.disposeData(n.dataId),a}}}var xa=Aa("ArgMax"),Na=Aa("ArgMin"),Ea=A("Asin"),Fa=A("Asinh"),Da=A("Atan"),Ra=F("Atan2"),Ta=A("Atanh");let Ba;var Ca={kernelName:se,backendName:"wasm",setupFunc:function(e){Ba=e.wasm.cwrap(se,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,e=e.x,a=n.dataIdMap.get(e.dataId).id,{filterSize:t,strides:r,pad:i,dimRoundingMode:s}=t,t=Zn(e.shape,t,r,1,i,s),r=t.filterHeight,i=t.filterWidth,s=t.padInfo.top,o=t.padInfo.right,u=t.padInfo.bottom,l=t.padInfo.left,d=t.strideHeight,c=t.strideWidth,p=t.inChannels;if("channelsLast"!==t.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${t.dataFormat}'. Please use 'channelsLast'.`);if(1!==t.dilationWidth||1!==t.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${t.dilationHeight}, ${t.dilationWidth}].`);t=n.makeOutput(t.outShape,"float32"),n=n.dataIdMap.get(t.dataId).id;return Ba(a,e.shape[0],e.shape[1],e.shape[2],r,i,s,o,u,l,d,c,p,n),t}};let Pa;var Oa={kernelName:"AvgPool3D",backendName:"wasm",setupFunc:function(e){Pa=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["x"],{filterSize:n,strides:a,pad:r,dimRoundingMode:i,dataFormat:s}=n,n=Qn(e.shape,n,a,1,r,i,s),a=t.makeOutput(n.outShape,e.dtype);return Pa(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,n.batchSize,n.inChannels,n.inDepth,n.inHeight,n.inWidth,n.outDepth,n.outHeight,n.outWidth,n.strideDepth,n.strideHeight,n.strideWidth,n.dilationDepth,n.dilationHeight,n.dilationWidth,n.effectiveFilterDepth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.front,n.padInfo.top,n.padInfo.left),a}};let Wa;var La={kernelName:"AvgPool3DGrad",backendName:"wasm",setupFunc:function(e){Wa=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{dy:e,input:a}=e,{filterSize:n,strides:r,pad:i,dimRoundingMode:s}=n,n=Qn(a.shape,n,r,1,i,s),r=t.makeOutput(a.shape,a.dtype);return Wa(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(r.dataId).id,n.batchSize,n.inChannels,n.inDepth,n.inHeight,n.inWidth,n.outDepth,n.outHeight,n.outWidth,n.strideDepth,n.strideHeight,n.strideWidth,n.dilationDepth,n.dilationHeight,n.dilationWidth,n.effectiveFilterDepth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.front,n.padInfo.top,n.padInfo.left,n.filterDepth,n.filterHeight,n.filterWidth),r}};let Ua;var Ha={kernelName:"AvgPoolGrad",backendName:"wasm",setupFunc:function(e){Ua=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{dy:e,input:a}=e,{filterSize:n,strides:r,pad:i}=n,n=Zn(a.shape,n,r,1,i),r=t.makeOutput(a.shape,a.dtype);return Ua(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(r.dataId).id,n.batchSize,n.inChannels,n.inHeight,n.inWidth,n.outHeight,n.outWidth,n.strideHeight,n.strideWidth,n.dilationHeight,n.dilationWidth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.top,n.padInfo.left,n.filterHeight,n.filterWidth),r}};function R(e){const{inputs:t,attrs:n}=e,a=t["x"],r=n["shape"],i=U(a.shape),s=function(t,e){let n=1,a=-1;for(let e=0;e<t.length;++e)if(0<=t[e])n*=t[e];else if(-1===t[e]){if(-1!==a)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${a} and dim `+e);a=e}else if(t[e]<0)throw Error(`Shapes can not be < 0. Found ${t[e]} at dim `+e);if(-1===a){if(0<e&&e!==n)throw Error(`Size(${e}) must match the product of shape `+t);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / `+n);var r=t.slice();return r[a]=e/n,r}(r,i);return L(i===U(s),()=>`new shape: ${s}, old shape: ${a.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(a.dataId),{dataId:a.dataId,shape:s,dtype:a.dtype}}var Ga={kernelName:"Reshape",backendName:"wasm",kernelFunc:R};let ja;var za={kernelName:oe,backendName:"wasm",setupFunc:function(e){ja=e.wasm.cwrap(oe,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:i}=t,{transposeA:s,transposeB:o}=a;if("float32"!==r.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const u=r.shape.length,l=i.shape.length,d=s?r.shape[u-2]:r.shape[u-1],c=o?i.shape[l-1]:i.shape[l-2],p=s?r.shape[u-1]:r.shape[u-2],h=o?i.shape[l-2]:i.shape[l-1],m=r.shape.slice(0,-2),f=i.shape.slice(0,-2),g=U(m),b=U(f),y=Nn(r.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);L(d===c,()=>`Error in matMul: inner shapes (${d}) and (${c}) of Tensors with shapes ${r.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);var e=o?[b,h,c]:[b,c,h],w=R({inputs:{x:r},backend:n,attrs:{shape:s?[g,d,p]:[g,p,d]}}),e=R({inputs:{x:i},backend:n,attrs:{shape:e}}),v=n.dataIdMap.get(w.dataId).id,_=n.dataIdMap.get(e.dataId).id,k=s?w.shape[2]:w.shape[1],I=o?e.shape[1]:e.shape[2],S=Math.max(g,b),S=n.makeOutput([S,k,I],w.dtype),k=n.dataIdMap.get(S.dataId).id,I=new Uint8Array(new Int32Array(w.shape).buffer),M=new Uint8Array(new Int32Array(e.shape).buffer);return ja(v,I,w.shape.length,_,M,e.shape.length,s,o,k),n.disposeData(w.dataId),n.disposeData(e.dataId),S.shape=y,S}};function $a(e,n,t,a,r){var i=Un(a,n,t),s=U(t),o=H(a);if(i){const t=Hn(n,o);return"string"===r?e.slice(t,t+s):e.subarray(t,t+s)}var u=cn(a,r,"string"===r?ca(e):e),l=cn(t,r);for(let e=0;e<l.size;++e){const t=l.indexToLoc(e),a=t.map((e,t)=>e+n[t]);l.set(u.get(...a),...t)}return"string"===r?pa(l.values):l.values}function qa(e){var{inputs:{x:t},attrs:{begin:e,size:r},backend:n}=e,[r,i]=function(n,e,t){let a;var r=n.shape.length;let i;return(a="number"==typeof e?[e,...new Array(r-1).fill(0)]:e.length<r?e.concat(new Array(r-e.length).fill(0)):e.slice()).forEach(e=>{L(-1!==e,()=>"slice() does not support negative begin indexing.")}),i=(i=null==t?new Array(r).fill(-1):"number"==typeof t?[t,...new Array(r-1).fill(-1)]:t.length<r?t.concat(new Array(r-t.length).fill(-1)):t).map((e,t)=>0<=e?e:(L(-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${t}.`),n.shape[t]-a[t])),[a,i]}(t,e,r),e=Un(t.shape,r,i),s=n.readSync(t.dataId),a=n.makeOutput(i,t.dtype),o=H(t.shape),u=n.dataIdMap.get(a.dataId);if(e){const e=Hn(r,o);"string"===t.dtype?u.stringBytes=s.slice(e,e+U(i)):n.typedArrayFromHeap(a).set(s.subarray(e,e+U(i)))}else if("string"===t.dtype){const e=$a(s,r,i,t.shape,t.dtype);u.stringBytes=e}else{u=n.typedArrayFromHeap(a),e=t.shape.length;if(2===e){var l=s;var d=o[0];var c=u;var p=i;let t=0;const _=r[0],k=r[1],I=_+p[0];for(let e=_;e<I;e++){const _=e*d+k;c.set(l.subarray(_,_+p[1]),t),t+=p[1]}}else if(3===e){var h=s;var m=o[0];var f=o[1];var g=u;var b=i;let n=0;const S=r[0],M=r[1],A=r[2],x=S+b[0],N=M+b[1];for(let t=S;t<x;t++)for(let e=M;e<N;e++){const M=t*m+e*f+A;g.set(h.subarray(M,M+b[2]),n),n+=b[2]}}else if(4===e){var y=s;var w=o[0];var P=o[1];var O=o[2];var W=u;var v=i;let a=0;const E=r[0],F=r[1],D=r[2],R=E+v[0],T=F+v[1],B=D+v[2],C=r[3];for(let n=E;n<R;n++)for(let t=F;t<T;t++)for(let e=D;e<B;e++){const D=n*w+t*P+e*O+C;W.set(y.subarray(D,D+v[3]),a),a+=v[3]}}else{const e=$a(s,r,i,t.shape,t.dtype);u.set(e)}}return a}var Va={kernelName:"Slice",backendName:"wasm",kernelFunc:qa},Ka={kernelName:"BatchToSpaceND",backendName:"wasm",kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["x"],{blockShape:n,crops:a}=n,r=n.reduce((e,t)=>e*t),i=ua(e.shape,n,r),s=la(i.length,n.length),r=da(e.shape,n,r),o=function(t,n){var a=[0];for(let e=0;e<n;++e)a.push(t[e][0]);return a}(a,n.length),a=function(t,n,a){var r=t.slice(0,1);for(let e=0;e<a;++e)r.push(t[e+1]-n[e][0]-n[e][1]);return r}(r,a,n.length),n=R({inputs:{x:e},backend:t,attrs:{shape:i}}),e=wa({inputs:{x:n},backend:t,attrs:{perm:s}}),i=qa({inputs:{x:R({inputs:{x:e},backend:t,attrs:{shape:r}})},backend:t,attrs:{begin:o,size:a}});return t.disposeData(n.dataId),t.disposeData(e.dataId),t.disposeData(n.dataId),i}};let Ja;var Xa={kernelName:ue,backendName:"wasm",setupFunc:function(e){Ja=e.wasm.cwrap(ue,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,weights:i}=n,s=a["size"],o=0!==i.shape.reduce((e,t)=>e*t,1),u=1===r.shape.length?[s]:[r.shape[0],s],l=t.makeOutput(u,i.dtype);function d(e){return t.dataIdMap.get(e.dataId).id}return Ja(d(r),s,o,d(i),S[i.dtype],d(l)),l}},Za=F("BitwiseAnd"),Qa={kernelName:"BroadcastArgs",backendName:"wasm",kernelFunc:function(e){var{inputs:e,backend:t}=e,{s0:e,s1:n}=e,e=t.typedArrayFromHeap(e),n=t.typedArrayFromHeap(n),e=Nn(Array.from(e),Array.from(n));return t.makeOutput([e.length],"int32",void 0,new Int32Array(e))}};function Ya(e){var{inputs:{x:e},attrs:{dtype:t},backend:n}=e,t=n.makeOutput(e.shape,t),e=n.typedArrayFromHeap(e);return n.typedArrayFromHeap(t).set(e),t}var er={kernelName:le,backendName:"wasm",kernelFunc:Ya},tr=A("Ceil");let nr;var ar={kernelName:de,backendName:"wasm",setupFunc:function(e){nr=e.wasm.cwrap(de,null,["number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["x"],{clipValueMin:n,clipValueMax:a}=n,r=t.dataIdMap.get(e.dataId).id,e=t.makeOutput(e.shape,e.dtype),t=t.dataIdMap.get(e.dataId).id;return nr(r,n,a,t),e}};function rr(e){const{inputs:t,backend:n}=e,r=G(e.attrs.axis,t[0].shape)[0];{e=t.map(e=>e.shape);var a=r;const u=e[0].length,l=(e.forEach((e,t)=>{L(e.length===u,()=>`Error in concat${u}D: rank of tensors[${t}] must be the same as the rank of the rest (${u})`)}),L(0<=a&&a<u,()=>`Error in concat${u}D: axis must be between 0 and ${u-1}.`),e[0]);e.forEach((t,n)=>{for(let e=0;e<u;e++)L(e===a||t[e]===l[e],()=>`Error in concat${u}D: Shape of tensors[${n}] (${t}) does not match the shape of the rest (${l}) along the non-concatenated axis ${n}.`)})}let i=Jn(t.map(e=>e.shape),r);const s=t.filter(e=>0<U(e.shape));if(1===s.length)return ga({inputs:{x:s[0]},backend:n});var o=n.makeOutput(i,t[0].dtype);if(0!==U(i))if("string"===s[0].dtype){const e=s.map(e=>{var t=U(e.shape.slice(r));return R({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),d=e.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),c=(i=Jn(e.map(e=>e.shape),1),1===e[0].shape[0]),L=function(e,s,o,t){const u=j(o,U(s));if(t&&"string"!==o){let n=0;e.forEach(e=>{var t=U(e.shape);u.set(e.vals,n),n+=t})}else{let i=0;e.forEach(t=>{var n="string"===o?ca(t.vals):t.vals;let a=0;for(let e=0;e<t.shape[0];++e){var r=e*s[1]+i;for(let e=0;e<t.shape[1];++e)u[r+e]=n[a++]}i+=t.shape[1]})}return u}(d,i,t[0].dtype,c),p=Jn(s.map(e=>e.shape),r);o.shape=p,n.dataIdMap.get(o.dataId).stringBytes=pa(L),e.forEach(e=>n.disposeData(e.dataId))}else{const d=U(s[0].shape.slice(0,r));let a=0;const p=s.map(e=>{e=U(e.shape.slice(r));return a+=e,e}),h=s.map(e=>n.typedArrayFromHeap(e)),m=n.typedArrayFromHeap(o);for(let n=0;n<d;n++){let t=n*a;for(let e=0;e<h.length;e++){const r=p[e],i=n*r,s=h[e].subarray(i,i+r);m.set(s,t),t+=r}}}return o}var ir={kernelName:"Concat",backendName:"wasm",kernelFunc:rr};let sr;var or={kernelName:"Conv2D",backendName:"wasm",setupFunc:function(e){sr=e.wasm.cwrap("Conv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,{x:e,filter:a}=e,r=n.dataIdMap.get(e.dataId).id,i=n.dataIdMap.get(a.dataId).id,{strides:t,dilations:s,pad:o,dimRoundingMode:u,dataFormat:l}=t,l=oa(l),a=Yn(e.shape,a.shape,t,s,o,u,!1,l),t=a.filterHeight,s=a.filterWidth,o=a.padInfo.top,u=a.padInfo.right,l=a.padInfo.bottom,d=a.padInfo.left,c=a.dilationHeight,p=a.dilationWidth,h=a.strideHeight,m=a.strideWidth,f=a.inChannels,g=a.outChannels,b="SAME"===a.padInfo.type?1:0;if("channelsLast"!==a.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${a.dataFormat}'. Please use 'channelsLast'.`);a=n.makeOutput(a.outShape,"float32"),n=n.dataIdMap.get(a.dataId).id;return sr(r,e.shape[0],e.shape[1],e.shape[2],i,t,s,o,u,l,d,b,c,p,h,m,f,g,n),a}};let ur;var lr={kernelName:ce,backendName:"wasm",setupFunc:function(e){ur=e.wasm.cwrap(ce,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{dy:t,filter:a}=t,{strides:n,pad:r,dataFormat:i,dimRoundingMode:s,inputShape:o}=n,i=oa(i),o=Yn(o,a.shape,n,1,r,s,!1,i),{batchSize:n,filterHeight:r,filterWidth:s,inChannels:i,inHeight:u,inWidth:l,outChannels:d,outHeight:c,outWidth:p,strideHeight:h,strideWidth:m}=o,f=r-1-o.padInfo.top,g=s-1-o.padInfo.left,b="channelsLast"===o.dataFormat,y=H(o.inShape),w=H(t.shape),[v,_,k]=H(a.shape),I=y[0],S=b?y[1]:y[2],M=b?y[2]:1,y=b?1:y[1],A=w[0],x=b?w[1]:w[2],N=b?w[2]:1,b=b?1:w[1],w=e.makeOutput(o.inShape,"float32"),o=e.dataIdMap.get(w.dataId).id,t=e.dataIdMap.get(t.dataId).id,e=e.dataIdMap.get(a.dataId).id;return ur(t,e,n,r,s,u,l,i,c,p,d,h,m,f,g,v,_,k,I,S,M,y,A,x,N,b,o),w}};let dr;var cr={kernelName:"Conv3D",backendName:"wasm",setupFunc:function(e){dr=e.wasm.cwrap("Conv3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,filter:a}=e,{strides:n,pad:r,dilations:i}=n;if("float32"!==e.dtype)throw new Error("Tensor x must have dtype float32, got "+e.dtype);if("float32"!==a.dtype)throw new Error("Tensor filter must have dtype float32, got "+a.dtype);n=ea(e.shape,a.shape,n,i,r),i=t.makeOutput(n.outShape,e.dtype);return dr(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(i.dataId).id,n.batchSize,n.inDepth,n.inHeight,n.inWidth,n.inChannels,n.outDepth,n.outHeight,n.outWidth,n.outChannels,n.strideDepth,n.strideHeight,n.strideWidth,n.dilationDepth,n.dilationHeight,n.dilationWidth,n.filterDepth,n.filterHeight,n.filterWidth,n.padInfo.front,n.padInfo.top,n.padInfo.left),i}};let pr;var hr={kernelName:pe,backendName:"wasm",setupFunc:function(e){pr=e.wasm.cwrap(pe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,dy:a}=e,{strides:n,pad:r,filterShape:i}=n;if("float32"!==e.dtype)throw new Error("Tensor dy must have dtype float32, got "+e.dtype);if("float32"!==a.dtype)throw new Error("Tensor filter must have dtype float32, got "+a.dtype);i=ea(e.shape,i,n,1,r),n=t.makeOutput(i.filterShape,a.dtype);return pr(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(n.dataId).id,i.batchSize,i.inDepth,i.inHeight,i.inWidth,i.inChannels,i.outDepth,i.outHeight,i.outWidth,i.outChannels,i.strideDepth,i.strideHeight,i.strideWidth,i.dilationDepth,i.dilationHeight,i.dilationWidth,i.filterDepth,i.filterHeight,i.filterWidth,i.padInfo.front,i.padInfo.top,i.padInfo.left),n}};let mr;var fr,gr={kernelName:he,backendName:"wasm",setupFunc:function(e){mr=e.wasm.cwrap(he,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{dy:e,filter:a}=e,{pad:n,strides:r,inputShape:i}=n;if("float32"!==e.dtype)throw new Error("Tensor dy must have dtype float32, got "+e.dtype);if("float32"!==a.dtype)throw new Error("Tensor filter must have dtype float32, got "+a.dtype);i=ea(i,a.shape,r,1,n),r=t.makeOutput(i.inShape,e.dtype);return mr(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(r.dataId).id,i.batchSize,i.inDepth,i.inHeight,i.inWidth,i.inChannels,i.outDepth,i.outHeight,i.outWidth,i.outChannels,i.strideDepth,i.strideHeight,i.strideWidth,i.dilationDepth,i.dilationHeight,i.dilationWidth,i.filterDepth,i.filterHeight,i.filterWidth,i.padInfo.front,i.padInfo.top,i.padInfo.left),r}},br=A("Cos"),yr=A("Cosh");let wr;(vr=fr=fr||{})[vr.bilinear=0]="bilinear",vr[vr.nearest=1]="nearest";var vr={kernelName:fe,backendName:"wasm",setupFunc:function(e){wr=e.wasm.cwrap(fe,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{method:n,extrapolationValue:a,cropSize:r}=n,{image:t,boxes:i,boxInd:s}=t,o=i.shape[0],[r,u]=r,l=[o,r,u,t.shape[3]];let d,c=e.dataIdMap.get(t.dataId);"float32"!==t.dtype&&(d=Ya({backend:e,inputs:{x:t},attrs:{dtype:"float32"}}),c=e.dataIdMap.get(d.dataId));var p=c.id,i=e.dataIdMap.get(i.dataId).id,s=e.dataIdMap.get(s.dataId).id,l=e.makeOutput(l,"float32"),h=e.dataIdMap.get(l.dataId).id,t=new Uint8Array(new Int32Array(t.shape).buffer);return wr(p,i,s,o,t,r,u,fr[n],a,h),null!=d&&e.disposeData(d.dataId),l}};let _r;var kr={kernelName:me,backendName:"wasm",setupFunc:function(e){_r=e.wasm.cwrap(me,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,r=t["x"],{axis:i,exclusive:s,reverse:o}=a,u=r.shape.length;L("float32"===r.dtype||"int32"===r.dtype,()=>`cumprod does not support ${r.dtype} tensors in the WASM backend`);e=qn([i],u);let l=r;null!==e&&(l=wa({inputs:{x:r},attrs:{perm:e},backend:n}));var d=Kn(1,u)[0],c=(M("cumprod",[d],u),n.makeOutput(l.shape,l.dtype)),d=l.shape[d],p=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(c.dataId).id;_r(p,s?1:0,o?1:0,d,h,S[r.dtype]);let m=c;return null!==e&&(m=wa({inputs:{x:c},attrs:{perm:Vn(e)},backend:n}),n.disposeData(l.dataId),n.disposeData(c.dataId)),m}};let Ir;var Sr={kernelName:"Cumsum",backendName:"wasm",setupFunc:function(e){Ir=e.wasm.cwrap("Cumsum",null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,r=t["x"],{axis:i,exclusive:s,reverse:o}=a,u=r.shape.length;L("float32"===r.dtype||"int32"===r.dtype,()=>`cumsum does not support ${r.dtype} tensors in the WASM backend`);e=qn([i],u);let l=r;null!==e&&(l=wa({inputs:{x:r},attrs:{perm:e},backend:n}));var d=Kn(1,u)[0],c=(M("cumsum",[d],u),n.makeOutput(l.shape,l.dtype)),d=l.shape[d],p=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(c.dataId).id;Ir(p,s?1:0,o?1:0,d,h,S[r.dtype]);let m=c;return null!==e&&(m=wa({inputs:{x:c},attrs:{perm:Vn(e)},backend:n}),n.disposeData(l.dataId),n.disposeData(c.dataId)),m}};let Mr;var Ar={kernelName:"DenseBincount",backendName:"wasm",setupFunc:function(e){Mr=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,weights:i}=n,{size:s,binaryOutput:o}=a,u=0!==i.shape.reduce((e,t)=>e*t,1),l=1===r.shape.length?[s]:[r.shape[0],s],d=t.makeOutput(l,i.dtype);function c(e){return t.dataIdMap.get(e.dataId).id}return Mr(c(r),new Uint8Array(new Int32Array(r.shape).buffer),r.shape.length,s,u,c(i),S[i.dtype],o,c(d)),d}};let xr;var Nr={kernelName:ge,backendName:"wasm",setupFunc:function(e){xr=e.wasm.cwrap(ge,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,t=t["x"],{blockSize:n,dataFormat:a}=n,r=t.shape[0],i=("NHWC"===a?t.shape[1]:t.shape[2])*n,s=("NHWC"===a?t.shape[2]:t.shape[3])*n,o=("NHWC"===a?t.shape[3]:t.shape[1])/(n*n),r="NHWC"===a?[r,i,s,o]:[r,o,i,s],o=e.makeOutput(r,"float32"),i=e.dataIdMap.get(t.dataId).id,s=new Uint8Array(new Int32Array(H(t.shape)).buffer),u=new Uint8Array(new Int32Array(r).buffer),l=new Uint8Array(new Int32Array(H(r)).buffer),e=e.dataIdMap.get(o.dataId).id;return xr(i,n,"NHWC"===a?1:0,s,t.shape.length-1,u,l,r.length,e),o}};let Er;var Fr={kernelName:be,backendName:"wasm",setupFunc:function(e){Er=e.wasm.cwrap(be,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,{x:e,filter:a}=e,r=n.dataIdMap.get(e.dataId).id,i=n.dataIdMap.get(a.dataId).id,{strides:t,dilations:s,pad:o,dimRoundingMode:u}=t,a=Yn(e.shape,a.shape,t,null==s?[1,1]:s,o,u,!0),t=a.filterHeight,s=a.filterWidth,o=a.padInfo.top,u=a.padInfo.right,l=a.padInfo.bottom,d=a.padInfo.left,c=a.dilationHeight,p=a.dilationWidth,h=a.strideHeight,m=a.strideWidth,f=a.inChannels,g=a.outChannels,b="SAME"===a.padInfo.type?1:0;if("channelsLast"!==a.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${a.dataFormat}'. Please use 'channelsLast'.`);a=n.makeOutput(a.outShape,"float32"),n=n.dataIdMap.get(a.dataId).id;return Er(r,e.shape[0],e.shape[1],e.shape[2],i,t,s,o,u,l,d,b,c,p,h,m,f,g,n),a}};let Dr;var Rr={kernelName:"Diag",backendName:"wasm",setupFunc:function(e){Dr=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t}=e,e=e["x"],n=U(e.shape),a=t.makeOutput([...e.shape,...e.shape],e.dtype);return Dr(t.dataIdMap.get(e.dataId).id,S[e.dtype],n,t.dataIdMap.get(a.dataId).id),a}};let Tr;var Br={kernelName:ye,backendName:"wasm",setupFunc:function(e){Tr=e.wasm.cwrap(ye,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,filter:a}=e,{strides:n,pad:r,dilations:i}=n;if(e.dtype!==a.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${e.dtype} and `+a.dtype);n=Xn(e.shape,a.shape,n,r,"NHWC",i),r=t.makeOutput(n.outShape,e.dtype);return Tr(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,S[e.dtype],n.batchSize,n.inChannels,n.inHeight,n.inWidth,n.outHeight,n.outWidth,n.strideHeight,n.strideWidth,n.dilationHeight,n.dilationWidth,n.filterHeight,n.filterWidth,n.padInfo.top,n.padInfo.left),r}};let Cr;var Pr={kernelName:ve,backendName:"wasm",setupFunc:function(e){Cr=e.wasm.cwrap(ve,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,filter:a,dy:r}=e,{strides:n,pad:i,dilations:s}=n;if(e.dtype!==a.dtype||e.dtype!==r.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${e.dtype}, ${a.dtype}, and `+r.dtype);n=Xn(e.shape,a.shape,n,i,"NHWC",s),i=t.makeOutput(a.shape,a.dtype);return Cr(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(i.dataId).id,S[e.dtype],n.batchSize,n.inChannels,n.inHeight,n.inWidth,n.outHeight,n.outWidth,n.strideHeight,n.strideWidth,n.dilationHeight,n.dilationWidth,n.filterHeight,n.filterWidth,n.padInfo.top,n.padInfo.left),i}};let Or;var Wr={kernelName:we,backendName:"wasm",setupFunc:function(e){Or=e.wasm.cwrap(we,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,filter:a,dy:r}=e,{strides:n,pad:i,dilations:s}=n;if(e.dtype!==a.dtype||e.dtype!==r.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${e.dtype}, ${a.dtype}, and `+r.dtype);n=Xn(e.shape,a.shape,n,i,"NHWC",s),i=t.makeOutput(e.shape,e.dtype);return Or(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(i.dataId).id,S[e.dtype],n.batchSize,n.inChannels,n.inHeight,n.inWidth,n.outHeight,n.outWidth,n.strideHeight,n.strideWidth,n.dilationHeight,n.dilationWidth,n.filterHeight,n.filterWidth,n.padInfo.top,n.padInfo.left),i}},Lr=A("Elu");let Ur;var Hr={kernelName:ke,backendName:"wasm",setupFunc:function(e){Ur=e.wasm.cwrap(ke,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:a,y:r}=t,i=n.makeOutput(r.shape,"float32"),s=e=>n.dataIdMap.get(e.dataId).id;return Ur(s(r),s(a),s(i)),i}},Gr=F("Equal",0,"bool"),jr=A("Erf"),zr=A("Exp","float32");function $r(e){const{inputs:t,attrs:n,backend:a}=e,r=t["input"],i=n["dim"],s=r.shape.length,o=r.shape.slice();let u=i;return i<0&&(L(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+i+1),o.splice(u,0,1),R({inputs:{x:r},backend:a,attrs:{shape:o}})}var qr={kernelName:"ExpandDims",backendName:"wasm",kernelFunc:$r},Vr=A("Expm1","float32");function Kr(e){var{attrs:{shape:e,value:t,dtype:n},backend:a}=e,e=a.makeOutput(e,n);return a.typedArrayFromHeap(e).fill(t),e}var Jr={kernelName:"Fill",backendName:"wasm",kernelFunc:Kr};let Xr;var Zr={kernelName:Ie,backendName:"wasm",kernelFunc:function(e){var{inputs:e,backend:t}=e,e=e["image"],n=t.makeOutput(e.shape,e.dtype),a=t.dataIdMap.get(e.dataId).id,t=t.dataIdMap.get(n.dataId).id,[e,r,i,s]=e.shape;return Xr(a,e,r,i,s,t),n},setupFunc:function(e){Xr=e.wasm.cwrap(Ie,null,["number","number","number","number","number","number"])}},Qr=A("Floor"),Yr=F(Se);let ei;var ti={kernelName:Me,backendName:"wasm",setupFunc:function(e){ei=e.wasm.cwrap(Me,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,n=n["varianceEpsilon"],{x:t,mean:a,variance:r,offset:i,scale:s}=t,o=e.dataIdMap.get(t.dataId).id,a=e.dataIdMap.get(a.dataId).id,r=e.dataIdMap.get(r.dataId).id,i=null!=i?e.dataIdMap.get(i.dataId).id:0,s=null!=s?e.dataIdMap.get(s.dataId).id:0,u=e.makeOutput(t.shape,t.dtype);return 0!==U(t.shape)&&(t=e.dataIdMap.get(u.dataId).id,ei(o,a,r,i,s,n,t)),u}};let ni;var ai={kernelName:nt,backendName:"wasm",setupFunc:function(e){ni=e.wasm.cwrap(nt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,{x:e,filter:a,bias:r,preluActivationWeights:i}=e,{strides:t,pad:s,dilations:o,dataFormat:u,dimRoundingMode:l,activation:d,leakyreluAlpha:c}=t,t=Yn(e.shape,a.shape,t,o,s,l),o=On[d];if(null==o)throw new Error(d+" activation not yet supported for FusedConv2D in the wasm backend.");s=n.dataIdMap.get(e.dataId).id,l=n.dataIdMap.get(a.dataId).id,d=t.outChannels;let p=0;if(null!=r){const e=n.dataIdMap.get(r.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==d)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${d})`);p=e.id}var e=t.filterHeight,a=t.filterWidth,r=t.padInfo.top,h=t.padInfo.right,m=t.padInfo.bottom,f=t.padInfo.left,g=t.dilationHeight,b=t.dilationWidth,y=t.strideHeight,w=t.strideWidth,v=t.inChannels,_="SAME"===t.padInfo.type?1:0,k=t.batchSize,I=t.inHeight,S=t.inWidth;if("NHWC"!==u)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${u}'. Please use 'NHWC'.`);u=n.makeOutput(t.outShape,"float32"),t=n.dataIdMap.get(u.dataId).id,n=null==i?0:n.dataIdMap.get(i.dataId).id;return ni(s,k,I,S,l,e,a,p,r,h,m,f,_,g,b,y,w,v,d,o,n,c||0,t),u}};let ri;var ii={kernelName:at,backendName:"wasm",setupFunc:function(e){ri=e.wasm.cwrap(at,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,{x:e,filter:a,bias:r,preluActivationWeights:i}=e,{strides:t,pad:s,dilations:o,dataFormat:u,dimRoundingMode:l,activation:d,leakyreluAlpha:c}=t,t=Yn(e.shape,a.shape,t,o,s,l,!0),o=On[d];if(null==o)throw new Error(d+" activation not yet supported for FusedDepthwiseConv2D in the wasm backend.");s=n.dataIdMap.get(e.dataId).id,l=n.dataIdMap.get(a.dataId).id,d=t.outChannels;let p=0;if(null!=r){const e=n.dataIdMap.get(r.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==d)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${d})`);p=e.id}var e=t.filterHeight,a=t.filterWidth,r=t.padInfo.top,h=t.padInfo.right,m=t.padInfo.bottom,f=t.padInfo.left,g=t.dilationHeight,b=t.dilationWidth,y=t.strideHeight,w=t.strideWidth,v=t.inChannels,_="SAME"===t.padInfo.type?1:0,k=t.batchSize,I=t.inHeight,S=t.inWidth;if("NHWC"!==u)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${u}'. Please use 'NHWC'.`);u=n.makeOutput(t.outShape,"float32"),t=n.dataIdMap.get(u.dataId).id,n=null==i?0:n.dataIdMap.get(i.dataId).id;return ri(s,k,I,S,l,e,a,p,r,h,m,f,_,g,b,y,w,v,d,o,n,c||0,t),u}};let si;var oi={kernelName:Ae,backendName:"wasm",setupFunc:function(e){si=e.wasm.cwrap(Ae,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t,n,{backend:e,inputs:a}=e,{params:a,indices:r}=a,[i,s,o,u]=function(e,t){var n=e.shape.length,a=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(a<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${a}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[a-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[a-1]} vs. `+n);if(0===U(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);var r=t.shape,a=r[r.length-1];let i=1;for(let e=0;e<r.length-1;++e)i*=r[e];var s=e.shape,o=r.slice();o.pop();let u=1;for(let e=a;e<n;++e)u*=s[e],o.push(s[e]);t=[...H(e.shape).map(e=>e/u),1].slice(0,a);return[o,i,u,t]}(a,r),i=e.makeOutput(i,a.dtype);return 0!==s&&(t=(t=r.shape)[t.length-1],n=e.dataIdMap.get(a.dataId).id,r=e.dataIdMap.get(r.dataId).id,u=new Uint8Array(new Int32Array(u).buffer),e=e.dataIdMap.get(i.dataId).id,si(n,S[a.dtype],r,s,t,o,u,e)),i}};let ui;var li={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){ui=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r,indices:i}=n,{axis:s,batchDims:o}=a,u=G(s,r.shape)[0],l=t.readSync(i.dataId),d=r.shape[u];for(let e=0;e<l.length;++e){const t=l[e];L(t<=d-1&&0<=t,()=>`GatherV2: the index value ${t} is not in [0, ${d-1}]`)}var c,p,h,m,f,e=function(t,n,a,r){var i=n.shape.length,s=t.shape.length;if(0!==r&&(r<-i||i<r))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got `+r);if(r<0&&(r+=i),s<r)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(a<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${a}).`);for(let e=0;e<r;++e)if(t.shape[e]!==n.shape[e])throw new Error(`x.shape[${e}]: ${t.shape[e]} should be equal to indices.shape[${e}]: ${n.shape[e]}.`);var e=t.shape[a],o=[];let u=1,l=1,d=1;for(let e=0;e<r;++e)o.push(t.shape[e]),u*=t.shape[e];for(let e=r;e<a;e++)o.push(t.shape[e]),l*=t.shape[e];for(let e=r;e<i;e++)o.push(n.shape[e]);for(let e=a+1;e<s;e++)o.push(t.shape[e]),d*=t.shape[e];return{batchSize:u,sliceSize:d,outerSize:l,dimSize:e,outputShape:o}}(r,i,u,o),g=R({inputs:{x:r},attrs:{shape:[e.batchSize,e.outerSize,e.dimSize,e.sliceSize]},backend:t}),b=U(i.shape),y=R({inputs:{x:i},attrs:{shape:[e.batchSize,b/e.batchSize]},backend:t}),b=[e.batchSize,e.outerSize,b/e.batchSize,e.sliceSize],w=t.makeOutput(b,r.dtype);return 0!==U(r.shape)&&(c=g.shape.length-1,p=t.dataIdMap.get(g.dataId).id,h=t.dataIdMap.get(y.dataId).id,m=t.dataIdMap.get(w.dataId).id,f=new Uint8Array(new Int32Array(H(g.shape)).buffer),b=new Uint8Array(new Int32Array(H(b)).buffer),ui(p,S[r.dtype],f,c,h,e.batchSize,b,m),t.disposeData(g.dataId),t.disposeData(y.dataId),w.shape=e.outputShape),w}},di=F("Greater",0,"bool"),ci=F("GreaterEqual",0,"bool"),pi=A("IsFinite","bool"),hi=A("IsInf","bool"),mi=A("IsNan","bool");let fi;var gi={kernelName:Ne,backendName:"wasm",setupFunc:function(e){fi=e.wasm.cwrap(Ne,null,["number","number","number","number"])},kernelFunc:function(e){var{inputs:{x:t},attrs:{alpha:n},backend:a}=e,r=a.dataIdMap.get(t.dataId).id,i=a.makeOutput(t.shape,"float32");if(0!==U(t.shape)){const e=a.dataIdMap.get(i.dataId).id;fi(r,S[t.dtype],n,e)}return i}},bi=F("Less",0,"bool"),yi=F("LessEqual",0,"bool");let wi;var vi={kernelName:Ee,backendName:"wasm",setupFunc:function(e){wi=e.wasm.cwrap(Ee,null,["number","number","number","number"])},kernelFunc:function(e){var{attrs:e,backend:t}=e,{start:e,stop:n,num:a}=e,a=Math.floor(a),r=t.makeOutput([a],"float32");return wi(t.dataIdMap.get(r.dataId).id,e,n,a),r}},_i=A("Log"),ki=A("Log1p"),Ii=F("LogicalAnd",0,"bool"),Si=A("LogicalNot"),Mi=F("LogicalOr",0,"bool"),Ai=F("LogicalXor",0,"bool");let xi;var Ni={kernelName:"LRN",backendName:"wasm",setupFunc:function(e){xi=e.wasm.cwrap("LRN",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["x"],{depthRadius:n,bias:a,alpha:r,beta:i}=n;if("float32"!==e.dtype)throw new Error("LRN error: x must have dtype float32");var s=t.makeOutput(e.shape,e.dtype);return xi(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(s.dataId).id,e.shape[3],n,a,r,i),s}};let Ei;var Fi={kernelName:Fe,backendName:"wasm",setupFunc:function(e){Ei=e.wasm.cwrap(Fe,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{x:e,y:a,dy:r}=e,{depthRadius:n,bias:i,alpha:s,beta:o}=n;if("float32"!==e.dtype||"float32"!==a.dtype||"float32"!==r.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");var u=t.makeOutput(e.shape,e.dtype);return Ei(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,r.shape[3],n,i,s,o),u}};let Di;var Ri={kernelName:"Max",backendName:"wasm",setupFunc:function(e){Di=e.wasm.cwrap("Max",null,["number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{reductionIndices:n,keepDims:a}=n,r=e["x"];let i=t.dataIdMap.get(r.dataId).id,s=r;var{transposed:e,axes:n,originalAxes:o,inputWasTransposed:u}=_a(r,n,t),[n,l]=(u&&(s=e,i=t.dataIdMap.get(e.dataId).id),M("max",n,s.shape.length),zn(s.shape,n)),l=U(l),n=t.makeOutput(n,r.dtype);if(0!==U(s.shape)){const e=t.dataIdMap.get(n.dataId).id;Di(i,S[r.dtype],l,e)}if(u&&t.disposeData(e.dataId),a){const e=$n(n.shape,o);n.shape=e}return n}},Ti=F(De);let Bi;var Ci={kernelName:Re,backendName:"wasm",setupFunc:function(e){Bi=e.wasm.cwrap(Re,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t.x,i=a.dataIdMap.get(r.dataId).id;L("float32"===r.dtype,()=>`Error in MaxPool: only float32 input is supported. Got ${r.dtype}.`);var{filterSize:e,strides:s,pad:o,dimRoundingMode:u}=n,e=Zn(r.shape,e,s,1,o,u),s=e.filterHeight,o=e.filterWidth,u=e.padInfo.top,l=e.padInfo.right,d=e.padInfo.bottom,c=e.padInfo.left,p=e.dilationHeight,h=e.dilationWidth,m=e.strideHeight,f=e.strideWidth,g=e.inChannels,b=e.outChannels;if("channelsLast"!==e.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${e.dataFormat}'. Please use 'channelsLast'.`);var e=a.makeOutput(e.outShape,"float32"),y=a.dataIdMap.get(e.dataId).id;return Bi(i,r.shape[0],r.shape[1],r.shape[2],s,o,u,l,d,c,p,h,m,f,g,b,y),e}};let Pi;var Oi={kernelName:"MaxPool3D",backendName:"wasm",setupFunc:function(e){Pi=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["x"],{filterSize:n,strides:a,pad:r,dimRoundingMode:i,dataFormat:s}=n,n=Qn(e.shape,n,a,1,r,i,s),a=t.makeOutput(n.outShape,e.dtype);return Pi(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,n.batchSize,n.inChannels,n.inDepth,n.inHeight,n.inWidth,n.outDepth,n.outHeight,n.outWidth,n.strideDepth,n.strideHeight,n.strideWidth,n.dilationDepth,n.dilationHeight,n.dilationWidth,n.effectiveFilterDepth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.front,n.padInfo.top,n.padInfo.left),a}};let Wi;var Li={kernelName:"MaxPool3DGrad",backendName:"wasm",setupFunc:function(e){Wi=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{dy:e,input:a}=e,{filterSize:n,strides:r,pad:i,dimRoundingMode:s}=n,n=Qn(a.shape,n,r,1,i,s),r=t.makeOutput(a.shape,a.dtype);return Wi(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(r.dataId).id,n.batchSize,n.inChannels,n.inDepth,n.inHeight,n.inWidth,n.outDepth,n.outHeight,n.outWidth,n.strideDepth,n.strideHeight,n.strideWidth,n.dilationDepth,n.dilationHeight,n.dilationWidth,n.effectiveFilterDepth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.front,n.padInfo.top,n.padInfo.left),r}};let Ui;var Hi={kernelName:"MaxPoolGrad",backendName:"wasm",setupFunc:function(e){Ui=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{dy:e,input:a}=e,{filterSize:n,strides:r,pad:i,dimRoundingMode:s}=n,n=Zn(a.shape,n,r,1,i,s),r=t.makeOutput(a.shape,a.dtype);return Ui(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(r.dataId).id,n.batchSize,n.inChannels,n.inHeight,n.inWidth,n.outHeight,n.outWidth,n.strideHeight,n.strideWidth,n.dilationHeight,n.dilationWidth,n.effectiveFilterHeight,n.effectiveFilterWidth,n.padInfo.top,n.padInfo.left),r}};let Gi;var ji={kernelName:"MaxPoolWithArgmax",backendName:"wasm",setupFunc:function(e){Gi=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,r=t["x"],{filterSize:i,strides:s,pad:o,includeBatchInIndex:u}=a,l=(L(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`),[1,1]);L((e=s,d=l,sa(e)||sa(d)),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);var e=Zn(r.shape,i,s,[1,1],o),d=n.makeOutput(e.outShape,r.dtype),c=n.makeOutput(e.outShape,"int32");return Gi(n.dataIdMap.get(r.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(c.dataId).id,S[r.dtype],u,e.batchSize,e.inChannels,e.inHeight,e.inWidth,e.outHeight,e.outWidth,e.strideHeight,e.strideWidth,e.dilationHeight,e.dilationWidth,e.effectiveFilterHeight,e.effectiveFilterWidth,e.padInfo.top,e.padInfo.left),[d,c]}};let zi;var $i={kernelName:"Mean",backendName:"wasm",setupFunc:function(e){zi=e.wasm.cwrap("Mean",null,["number, number, number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,e=e["x"],r=t.dataIdMap.get(e.dataId).id;let i=r,s=e;var{transposed:n,axes:e,originalAxes:o,inputWasTransposed:u}=_a(e,n,t);let l=e;if(u){const e=t.dataIdMap.get(n.dataId).id;e!==r&&(s=n,i=e,l=Kn(l.length,s.shape.length))}M("mean",l,s.shape.length);var[e,r]=zn(s.shape,l),r=U(r);let d=s;"float32"!==s.dtype&&(d=Ya({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),i=t.dataIdMap.get(d.dataId).id);var c=t.makeOutput(e,"float32");if(0!==U(s.shape)){const e=t.dataIdMap.get(c.dataId).id;zi(i,r,e)}if(u&&t.disposeData(n.dataId),a){const e=$n(c.shape,o);c.shape=e}return"float32"!==s.dtype&&t.disposeData(d.dataId),c}};let qi;var Vi,Ki={kernelName:"Min",backendName:"wasm",setupFunc:function(e){qi=e.wasm.cwrap("Min",null,["number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,r=e["x"],i=t.dataIdMap.get(r.dataId).id;let s=i,o=r;var{transposed:n,axes:e,originalAxes:u,inputWasTransposed:l}=_a(r,n,t);if(l){const e=t.dataIdMap.get(n.dataId).id;e!==i&&(o=n,s=e)}M("min",e,o.shape.length);var[i,e]=zn(o.shape,e),d=U(e),i=t.makeOutput(i,o.dtype);if(0!==U(o.shape)){const e=t.dataIdMap.get(i.dataId).id;qi(s,S[r.dtype],d,e)}if(l&&t.disposeData(n.dataId),a){const e=$n(i.shape,u);i.shape=e}return i}},Ji=F("Minimum");let Xi;(Zi=Vi=Vi||{})[Zi.reflect=0]="reflect",Zi[Zi.symmetric=1]="symmetric";var Zi={kernelName:Te,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t,attrs:{paddings:a,mode:r}}=e,i=a.map((e,t)=>e[0]+n.shape[t]+e[1]),s=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(i,n.dtype),u=t.dataIdMap.get(o.dataId).id,l=new Uint8Array(new Int32Array(n.shape).buffer),d=a.map(e=>e[0]),c=a.map(e=>e[1]),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(c).buffer);return Xi(s,l,n.shape.length,S[n.dtype],p,h,Vi[r],u),o},setupFunc:function(e){Xi=e.wasm.cwrap(Te,null,["number","array","number","number","array","array","number","number"])}};let Qi;function Yi(e){var{backend:e,inputs:{logits:t},attrs:{dim:n}}=e,a=e.dataIdMap.get(t.dataId).id,r=e.makeOutput(t.shape,t.dtype),e=e.dataIdMap.get(r.dataId).id,n=t.shape[n],t=U(t.shape)/n;return 0!==U(r.shape)&&Qi(a,e,n,t),r}var es={kernelName:Ve,backendName:"wasm",setupFunc:function(e){Qi=e.wasm.cwrap(Ve,null,["number","number","number","number"])},kernelFunc:Yi};let ts;var ns={kernelName:Be,backendName:"wasm",setupFunc:function(e){ts=e.wasm.cwrap(Be,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["logits"],{numSamples:n,seed:a,normalized:r}=n;if("float32"!==e.dtype)throw new Error("Tensor logits must have dtype float32, got "+e.dtype);var e=r?e:Yi({inputs:{logits:e},backend:t,attrs:{dim:e.shape.length-1}}),[i,s]=e.shape,o=t.makeOutput([i,n],"int32");return ts(t.dataIdMap.get(e.dataId).id,i,s,n,a,t.dataIdMap.get(o.dataId).id),r||t.disposeData(e.dataId),o}},as=F("Mod"),rs=F(Ce),is=A("Neg");function ss(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),a=n[0],r=n[1],i=n[2],n=n[3];return e.wasm._free(t),{pSelectedIndices:a,selectedSize:r,pSelectedScores:i,pValidOutputs:n}}let os;var us={kernelName:Pe,backendName:"wasm",setupFunc:function(e){os=e.wasm.cwrap(Pe,"number",["number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{iouThreshold:n,maxOutputSize:a,scoreThreshold:r}=n,{boxes:t,scores:i}=t,t=e.dataIdMap.get(t.dataId).id,i=e.dataIdMap.get(i.dataId).id,{pSelectedIndices:t,selectedSize:i,pSelectedScores:a,pValidOutputs:n}=ss(e,os(t,i,a,n,r));return e.wasm._free(a),e.wasm._free(n),e.makeOutput([i],"int32",t)}};let ls;var ds={kernelName:Oe,backendName:"wasm",setupFunc:function(e){ls=e.wasm.cwrap(Oe,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{iouThreshold:n,maxOutputSize:a,scoreThreshold:r,padToMaxOutputSize:i}=n,{boxes:t,scores:s}=t,t=e.dataIdMap.get(t.dataId).id,s=e.dataIdMap.get(s.dataId).id,{pSelectedIndices:t,selectedSize:s,pSelectedScores:a,pValidOutputs:n}=ss(e,ls(t,s,a,n,r,i));return e.wasm._free(a),[e.makeOutput([s],"int32",t),e.makeOutput([],"int32",n)]}};let cs;var ps={kernelName:We,backendName:"wasm",setupFunc:function(e){cs=e.wasm.cwrap(We,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{iouThreshold:n,maxOutputSize:a,scoreThreshold:r,softNmsSigma:i}=n,{boxes:t,scores:s}=t,t=e.dataIdMap.get(t.dataId).id,s=e.dataIdMap.get(s.dataId).id,{pSelectedIndices:t,selectedSize:s,pSelectedScores:a,pValidOutputs:n}=ss(e,cs(t,s,a,n,r,i));return e.wasm._free(n),[e.makeOutput([s],"int32",t),e.makeOutput([s],"float32",a)]}},hs=F("NotEqual",0,"bool");let ms,fs;const gs={kernelName:"PadV2",backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t,attrs:{paddings:a,constantValue:r}}=e,i=a.map((e,t)=>e[0]+n.shape[t]+e[1]);var s,o,u,l,d;return 0===U(n.shape)?Kr({backend:t,attrs:{shape:i,value:r,dtype:n.dtype}}):(e=t.dataIdMap.get(n.dataId).id,s=t.makeOutput(i,n.dtype),o=t.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(n.shape).buffer),l=a.map(e=>e[0]),d=a.map(e=>e[1]),l=new Uint8Array(new Int32Array(l).buffer),d=new Uint8Array(new Int32Array(d).buffer),fs(e,u,n.shape.length,S[n.dtype],l,d,r,o),s)},setupFunc:function(e){fs=e.wasm.cwrap("PadV2",null,["number","array","number","number","array","array","number","number"])}},bs=F("Pow");let ys,ws;var vs=F(_e),_s=A("Reciprocal"),ks=A("Relu"),Is=A("Relu6");let Ss;var Ms={kernelName:He,backendName:"wasm",setupFunc:function(e){Ss=e.wasm.cwrap(He,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,t=t["images"],{alignCorners:n,halfPixelCenters:a,size:r}=n,[r,i]=r,[s,o,u,l]=t.shape,d=[s,r,i,l];let c,p=e.dataIdMap.get(t.dataId);"float32"!==p.dtype&&(c=Ya({backend:e,inputs:{x:t},attrs:{dtype:"float32"}}),p=e.dataIdMap.get(c.dataId));var h=p.id,d=e.makeOutput(d,"float32");return 0!==U(t.shape)&&(t=e.dataIdMap.get(d.dataId).id,Ss(h,s,o,u,l,r,i,n?1:0,a?1:0,t),null!=c)&&e.disposeData(c.dataId),d}};let As;var xs={kernelName:Ge,backendName:"wasm",setupFunc:function(e){As=e.wasm.cwrap(Ge,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{images:e,dy:a}=e,n=n["alignCorners"],r=t.makeOutput(e.shape,"float32");let i,s=t.dataIdMap.get(e.dataId);return"float32"!==s.dtype&&(i=Ya({backend:t,inputs:{x:e},attrs:{dtype:"float32"}}),t.dataIdMap.get(i.dataId)),As(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,new Uint8Array(new Int32Array(e.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),n),null!=i&&t.disposeData(i.dataId),r}};let Ns;var Es={kernelName:Le,backendName:"wasm",setupFunc:function(e){Ns=e.wasm.cwrap(Le,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(n){var{backend:n,inputs:a,attrs:r}=n,a=a["images"],{alignCorners:r,halfPixelCenters:i,size:s}=r,[s,o]=s,[u,l,d,c]=a.shape,p=n.makeOutput([u,s,o,c],"float32");if(0!==U(a.shape)){let e,t=n.dataIdMap.get(a.dataId);"float32"!==t.dtype&&(e=Ya({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),t=n.dataIdMap.get(e.dataId));var a=t.id,h=n.dataIdMap.get(p.dataId).id;Ns(a,u,l,d,c,s,o,r?1:0,i?1:0,h),null!=e&&n.disposeData(e.dataId)}return p}};let Fs;var Ds={kernelName:Ue,backendName:"wasm",setupFunc:function(e){Fs=e.wasm.cwrap(Ue,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,{images:e,dy:a}=e,n=n["alignCorners"],r=t.makeOutput(e.shape,"float32");let i,s=t.dataIdMap.get(e.dataId);return"float32"!==s.dtype&&(i=Ya({backend:t,inputs:{x:e},attrs:{dtype:"float32"}}),t.dataIdMap.get(i.dataId)),Fs(t.dataIdMap.get(e.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(r.dataId).id,new Uint8Array(new Int32Array(e.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),n),null!=i&&t.disposeData(i.dataId),r}};let Rs;var Ts={kernelName:je,backendName:"wasm",kernelFunc:function(e){var t,n,a,r,i,{inputs:e,backend:s,attrs:o}=e,e=e["x"],o=o["dims"],o=G(o,e.shape);return 0===e.shape.length?ga({inputs:{x:e},backend:s}):(t=s.makeOutput(e.shape,e.dtype),i=s.dataIdMap.get(e.dataId).id,n=s.dataIdMap.get(t.dataId).id,a=new Uint8Array(new Int32Array(o).buffer),r=new Uint8Array(new Int32Array(e.shape).buffer),Rs(i,a,o.length,r,e.shape.length,n),i=R({inputs:{x:t},attrs:{shape:e.shape},backend:s}),s.disposeData(t.dataId),i)},setupFunc:function(e){Rs=e.wasm.cwrap(je,null,["number","array","number","array","number","number"])}};let Bs;var Cs={kernelName:et,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,r=t["image"],{radians:i,fillValue:s,center:o}=a,u=n.makeOutput(r.shape,r.dtype),l=n.dataIdMap.get(r.dataId).id,d=n.dataIdMap.get(u.dataId).id,[c,p,h,m]=r.shape,[f,g]=[h*("number"==typeof(e=o)?e:e[0]),p*("number"==typeof e?e:e[1])],b="number"==typeof s?[s,s,s,0===s?0:255]:[...s,255],y=new Uint8Array(new Int32Array(b).buffer);return Bs(l,c,p,h,m,i,f,g,y,b.length,d),u},setupFunc:function(e){Bs=e.wasm.cwrap(et,null,["number","number","number","number","number","number","number","number","array","number","number"])}},Ps=A("Round"),Os=A("Rsqrt");let Ws;var Ls={kernelName:ze,backendName:"wasm",setupFunc:function(e){Ws=e.wasm.cwrap(ze,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t,n,a,r,i,{backend:e,inputs:s,attrs:o}=e,{indices:s,updates:u}=s,o=o["shape"],l=e.makeOutput(o,u.dtype);return 0!==U(o)&&({sliceRank:o,numUpdates:t,sliceSize:n,strides:i,outputSize:a}=Ln(0,s,o),s=e.dataIdMap.get(s.dataId).id,r=e.dataIdMap.get(u.dataId).id,i=new Uint8Array(new Int32Array(i).buffer),e=e.dataIdMap.get(l.dataId).id,Ws(s,r,S[u.dtype],o,t,n,i,a,e)),l}};let Us;var Hs={kernelName:qe,backendName:"wasm",setupFunc:function(e){Us=e.wasm.cwrap(qe,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:i}=t,s=a["side"];if(r.dtype!==i.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${r.dtype} and `+i.dtype);e=n.makeOutput(i.shape,"int32");function o(e){return n.dataIdMap.get(e.dataId).id}return Us(o(r),o(i),r.shape[0],r.shape[1],i.shape[1],S[r.dtype],"left"===s,o(e)),e}};let Gs;var js=A("Selu");let zs;var $s=A("Sign"),qs=A("Sin"),Vs=A("Sinh"),Ks=A("Softplus");let Js,Xs;var Zs={kernelName:Ke,backendName:"wasm",setupFunc:function(e){Xs=e.wasm.cwrap(Ke,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e}=e,{inputIndices:e,inputShape:n,newShape:a}=e;if(2!==e.shape.length)throw new Error(`Input indices should be a matrix but received shape
        `+e.shape);if(1!==n.shape.length)throw new Error(`Input shape should be a vector but received shape
        `+n.shape);if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape "+a.shape);var r,i,s=t.dataIdMap.get(e.dataId).id,o=t.dataIdMap.get(n.dataId).id,u=t.dataIdMap.get(a.dataId).id,l=e.shape[0],d=U(a.shape),e=t.makeOutput([l,d],e.dtype),c=t.dataIdMap.get(e.dataId).id,p=t.makeOutput([d],a.dtype),d=t.dataIdMap.get(p.dataId).id,a=t.makeOutput([3],"int32"),h=t.dataIdMap.get(a.dataId).id,m=(Xs(s,o,u,l,c,d,h),t.readSync(a.dataId));let f;switch(m[0]){case 0:f=`only one output dimension may be -1, not both ${m[1]} and `+m[2];break;case 1:f=`size ${m[1]} must be non-negative, not `+m[2];break;case 2:f="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:f=(r=Array.from(t.readSync(n.dataId)),i=Array.from(t.readSync(p.dataId)),`Input to reshape is a SparseTensor with ${U(r)}
  dense values, but the requested shape requires a multiple of ${U(i)}. inputShape=${r} outputShape= `+i);break;case 4:f=(r=Array.from(t.readSync(n.dataId)),i=Array.from(t.readSync(p.dataId)),`Input to reshape is a tensor with ${U(r)} dense values, but the requested shape has ${U(i)}. inputShape=${r} outputShape=`+i);break;default:f=""}if(t.disposeData(a.dataId),f)throw t.disposeData(e.dataId),t.disposeData(p.dataId),new Error(f);return[e,p]}};let Qs;function Ys(e){Qs=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function eo(e,t){var{backend:e,inputs:n}=e,{data:n,indices:a,segmentIds:r}=n,i=a.shape[0],s=e.readSync(r.dataId,i-1,i)[0],i=0<i?s+1:0;if(i<0)throw new Error("segment ids must be >= 0");var s=n.shape.slice(),i=(s[0]=i,e.dataIdMap.get(n.dataId).id),a=e.dataIdMap.get(a.dataId).id,r=e.dataIdMap.get(r.dataId).id,s=e.makeOutput(s,n.dtype),o=e.dataIdMap.get(s.dataId).id,u=e.makeOutput([4],"int32"),l=e.dataIdMap.get(u.dataId).id,d=(Qs(i,S[n.dtype],n.shape[0],a,r,o,l,t,0),e.readSync(u.dataId));let c;switch(d[0]){case 0:c="segment ids must be >= 0";break;case 1:c="segment ids are not increasing";break;case 2:c=`Segment id ${d[1]} out of range [0, ${d[2]}), possibly because segmentIds input is not sorted.`;break;case 3:c=`Bad: indices[${d[1]}] == ${d[2]} out of range [0, ${d[3]})`;break;default:c=""}if(e.disposeData(u.dataId),c)throw e.disposeData(s.dataId),new Error(c);return s}let to;var no={kernelName:Je,backendName:"wasm",setupFunc:function(e){to=e.wasm.cwrap(Je,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t,n,a,r,i,s,{backend:e,inputs:o,attrs:u}=e,{sparseIndices:o,sparseValues:l,defaultValue:d}=o,u=u["outputShape"],c=e.makeOutput(u,d.dtype);return 0!==U(u)&&({sliceRank:u,numUpdates:t,sliceSize:n,strides:s,outputSize:a}=Ln(0,o,u),o=e.dataIdMap.get(o.dataId).id,r=e.dataIdMap.get(l.dataId).id,i=e.dataIdMap.get(d.dataId).id,s=new Uint8Array(new Int32Array(s).buffer),e=e.dataIdMap.get(c.dataId).id,to(o,r,l.shape.length,i,S[d.dtype],u,t,n,s,a,e)),c}},ao=A("Sqrt"),ro=A("Square"),io=F("SquaredDifference");let so,oo;var uo={kernelName:Xe,backendName:"wasm",setupFunc:function(e){oo=e.wasm.cwrap(Xe,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,r=n["x"],{begin:i,end:s,strides:o,beginMask:u,endMask:l,ellipsisMask:d,newAxisMask:c,shrinkAxisMask:p}=a,{finalShapeSparse:h,finalShape:m,isIdentity:f,sliceDim0:g,isSimpleSlice:b,begin:y,end:w,strides:v}=function(a,t,r,i,s,o,u,n,e){let l;if(null==i?(l=new Array(t.length)).fill(1):l=i,null!=u&&0!=(u&u-1))throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;var c={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:r.slice(),strides:l.slice(),beginMask:s,endMask:o,ellipsisMask:u,newAxisMask:n,shrinkAxisMask:e};for(let e=0;e<c.dims;e++)d&&0!=(1<<e&n)&&c.numAddAxisAfterEllipsis++,1<<e&u&&(d=!0);d||(c.ellipsisMask|=1<<c.dims,c.dims++);const p={dims:a.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};{var h=c,m=p;m.beginMask=0,m.endMask=0;let t=m.shrinkAxisMask=0;m.beginValid=null!=h.begin,m.endValid=null!=h.end,m.begin=new Array(m.dims),m.end=new Array(m.dims),m.strides=new Array(m.dims),m.finalShapeGatherIndices=[],m.finalShapeGatherIndicesSparse=[],m.inputShapeGatherIndicesSparse=new Array(m.dims);for(let e=0;e<h.dims;e++)if(1<<e&h.ellipsisMask)for(var f=Math.min(m.dims-(h.dims-e)+1+h.numAddAxisAfterEllipsis,m.dims);t<f;t++)m.begin[t]=0,m.end[t]=0,m.strides[t]=1,m.beginMask|=1<<t,m.endMask|=1<<t,m.finalShapeGatherIndices.push(t),m.finalShapeGatherIndicesSparse.push(-1),m.inputShapeGatherIndicesSparse[t]=e;else if(1<<e&h.newAxisMask)m.finalShapeGatherIndices.push(-2),m.finalShapeGatherIndicesSparse.push(-1);else{if(t===m.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${m.dims} dims, ${m.begin.length}.`);null!=h.begin&&(m.begin[t]=h.begin[e]),null!=h.end&&(m.end[t]=h.end[e]),m.strides[t]=h.strides[e],h.beginMask&1<<e&&(m.beginMask|=1<<t),h.endMask&1<<e&&(m.endMask|=1<<t),h.shrinkAxisMask&1<<e?(m.finalShapeGatherIndices.push(-1),m.finalShapeGatherIndicesSparse.push(-1),m.shrinkAxisMask|=1<<t):(m.finalShapeGatherIndices.push(t),m.finalShapeGatherIndicesSparse.push(e)),m.inputShapeGatherIndicesSparse[t]=e,t++}}let g=!0,b=!0,y=!0;var w,v=[],_=[];for(let n=0;n<a.length;++n){if(0===p.strides[n])throw Error(`strides[${n}] must be non-zero`);const r=!!(p.shrinkAxisMask&1<<n),i=a[n];if(-1===i)v.push(r?1:-1);else{const s=[p.beginMask&1<<n,p.endMask&1<<n],o=[0<p.strides[n]?0:-1,0<p.strides[n]?i:i-1];if(r&&p.strides[n]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&1===p.strides[n];const u=!!(p.beginMask&1<<n&&p.endMask&1<<n);if(p.beginValid&&p.endValid){if(r){const a=p.begin[n]<0?i+p.begin[n]:p.begin[n];if(p.begin[n]=a,p.end[n]=p.begin[n]+1,a<0||a>=i)throw Error(`slice index ${p.begin[n]} of dimension ${n} out of bounds.`)}else p.begin[n]=Gn(p.begin[n],0,p.strides[n],i,s,o),p.end[n]=Gn(p.end[n],1,p.strides[n],i,s,o);const a=1===p.strides[n]&&0===p.begin[n]&&p.end[n]===i;g=g&&a,b=b&&(0===n&&1===p.strides[n]||a)}else g=g&&1===p.strides[n]&&u,b=b&&(0===n&&1===p.strides[n]||u);let e,t=!1;p.beginValid&&p.endValid?(e=p.end[n]-p.begin[n],t=!0):r?(e=1,t=!0):u&&0<=i&&(e=p.strides[n]<0?-i:i,t=!0),t?(w=0===e||e<0!=p.strides[n]<0?0:Math.trunc(e/p.strides[n])+(e%p.strides[n]!=0?1:0),v.push(w)):v.push(-1)}}for(let e=0;e<p.finalShapeGatherIndices.length;++e){const t=p.finalShapeGatherIndices[e];0<=t?_.push(v[t]):-2===t&&_.push(1)}return{finalShapeSparse:_.filter((e,t)=>-2!==p.finalShapeGatherIndices[t]),finalShape:_,isIdentity:g,sliceDim0:b,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}(r.shape,i,s,o,u,l,d,c,p);let _;if(f)_=R({inputs:{x:r},backend:t,attrs:{shape:m}});else if(g||b){L(1<=r.shape.length,()=>"Input must have rank at least 1, got: "+r.shape.length);const e=function(t,n,a){var r=[];for(let e=0;e<t.length;e++)r[e]=Math.ceil((n[e]-t[e])/a[e]);return r}(y,w,v),n=qa({inputs:{x:r},backend:t,attrs:{begin:y,size:e}});_=R({inputs:{x:n},backend:t,attrs:{shape:m}}),t.disposeData(n.dataId)}else{const e=t.makeOutput(h,"float32"),n=t.dataIdMap.get(r.dataId).id,a=new Uint8Array(new Int32Array(H(r.shape)).buffer),i=new Uint8Array(new Int32Array(y).buffer),s=new Uint8Array(new Int32Array(w).buffer),o=new Uint8Array(new Int32Array(v).buffer),u=new Uint8Array(new Int32Array(h).buffer),L=new Uint8Array(new Int32Array(H(h)).buffer),l=t.dataIdMap.get(e.dataId).id;oo(n,a,r.shape.length,i,s,o,u,L,h.length,l),_=R({inputs:{x:e},backend:t,attrs:{shape:m}}),t.disposeData(e.dataId)}return _}};class lo{constructor(e,t,n,a,r,i){this.separator=kt(e),this.nGramWidths=t,this.leftPad=kt(n),this.rightPad=kt(a),this.padWidth=r,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(a,r,i,s,o,u){for(let e=0;e<o;++e){var l=this.getPadWidth(u),d=Math.max(0,l-e),c=Math.max(0,l-(o-(e+1))),p=u-(d+c),h=r+(0<d?0:e-l);let t=0;t+=d*this.leftPad.length;for(let e=0;e<p;++e)t+=a[h+e].length;t=(t+=c*this.rightPad.length)+(d+c+p-1)*this.separator.length,i[s+e]=new Uint8Array(t);const f=i[s+e];let n=0;var m=e=>e.forEach(e=>f[n++]=e);for(let e=0;e<d;++e)m(this.leftPad),m(this.separator);for(let e=0;e<p-1;++e)m(a[h+e]),m(this.separator);if(0<p){m(a[h+p-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(r,i){const n=r.length,s=i.length;if(0<s){let t=i[0];if(0!==t)throw new Error("First split value must be 0, got "+t);for(let e=1;e<s;++e){if(!(i[e]>=t&&i[e]<=n))throw new Error(`Invalid split value ${i[e]}, must be in [${t}, ${n}]`);t=i[e]}if(t!==n)throw new Error(`Last split value must be data size. Expected ${n}, got `+t)}const t=s-1,o=j("int32",s);if(0===n||0===s){const r=new Array(n);for(let e=0;e<=t;++e)o[e]=0;return[r,o]}o[0]=0;for(let e=1;e<=t;++e){const n=i[e]-i[e-1];let t=0;this.nGramWidths.forEach(e=>{t+=this.getNumNGrams(n,e)}),this.preserveShort&&0<n&&0===t&&(t=1),o[e]=o[e-1]+t}const u=new Array(o[t]);for(let a=0;a<t;++a){const s=i[a];let n=o[a];if(this.nGramWidths.forEach(e=>{var t=i[a+1]-i[a],t=this.getNumNGrams(t,e);this.createNGrams(r,s,u,n,t,e),n+=t}),this.preserveShort&&n===o[a]){const o=i[a+1]-i[a];var e;0!=o&&(e=o+2*this.padWidth,this.createNGrams(r,s,u,n,1,e))}}return[u,o]}}var co=F("Sub");let po;var ho=A("Tan"),mo=A("Tanh");let fo,go,bo,yo;for(const T of[e,un,Wn,x,D,fa,Ia,Ma,xa,Na,Ea,Fa,Da,Ra,Ta,Ca,Ha,Oa,La,za,Ka,Xa,Za,Qa,er,tr,ar,ir,or,lr,cr,hr,gr,br,yr,vr,kr,Sr,Ar,Nr,Fr,Rr,Br,Pr,Wr,Lr,Hr,Gr,jr,zr,qr,Vr,Jr,Zr,Qr,Yr,ti,ai,ii,oi,li,di,ci,ba,pi,hi,mi,gi,bi,yi,vi,ki,_i,Ii,Si,Mi,Ai,Ni,Fi,Ri,Ti,Ci,Oi,Li,Hi,ji,$i,Ki,Ji,Zi,ns,as,rs,is,us,ds,ps,hs,{kernelName:"OneHot",backendName:"wasm",setupFunc:function(e){ms=e.wasm.cwrap("OneHot",null,["number","number","number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,e=e["indices"],{dtype:n,depth:a,onValue:r,offValue:i}=n,n=t.makeOutput([...e.shape,a],n),s=t.dataIdMap.get(n.dataId).id,t=t.dataIdMap.get(e.dataId).id;return ms(t,a,r,i,s),n}},{kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var{inputs:{x:e},backend:t}=e,e=t.makeOutput(e.shape,e.dtype);return t.typedArrayFromHeap(e).fill(1),e}},{kernelName:"Pack",backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,r=a["axis"];if(1===t.length)return $r({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const i=t[0].shape,s=t[0].dtype,o=(t.forEach(e=>{var t,n;t=i,n=e.shape,L(O(t,n),()=>"All tensors passed to stack must have matching shapes"+` Shapes ${t} and ${n} must match`),L(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")}),[]),u=rr({inputs:t.map(e=>{e=$r({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(e),e}),backend:n,attrs:{axis:r}});return o.forEach(e=>n.disposeData(e.dataId)),u}},gs,bs,{kernelName:"Prelu",backendName:"wasm",setupFunc:function(e){ys=e.wasm.cwrap("Prelu",null,["number","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t}=e,{x:e,alpha:n}=e,a=t.dataIdMap.get(e.dataId).id,n=t.dataIdMap.get(n.dataId).id;let r=a;a=e;let i=a;"float32"!==a.dtype&&(i=Ya({backend:t,inputs:{x:e},attrs:{dtype:"float32"}}),r=t.dataIdMap.get(i.dataId).id);var e=t.makeOutput(e.shape,"float32"),s=t.dataIdMap.get(e.dataId).id;return ys(r,n,s),"float32"!==a.dtype&&t.disposeData(i.dataId),e}},{kernelName:"Prod",backendName:"wasm",setupFunc:function(e){ws=e.wasm.cwrap("Prod",null,["number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,e=e["x"],r=t.dataIdMap.get(e.dataId).id;let i=r,s=e;var{transposed:n,axes:e,originalAxes:o,inputWasTransposed:u}=_a(e,n,t);let l=e;if(u){const e=t.dataIdMap.get(n.dataId).id;e!==r&&(s=n,i=e,l=Kn(l.length,s.shape.length))}M("prod",l,s.shape.length);var[e,r]=zn(s.shape,l),r=U(r),d=t.makeOutput(e,s.dtype);if(0!==U(s.shape)){const e=t.dataIdMap.get(d.dataId).id;ws(i,r,S[d.dtype],e)}if(u&&t.disposeData(n.dataId),a){const e=$n(d.shape,o);d.shape=e}return d}},{kernelName:"Range",backendName:"wasm",kernelFunc:e=>{var{backend:e,attrs:t}=e,{start:t,stop:n,step:a,dtype:r}=t,t=function(e,t,n,a){if(e===t||e<t&&n<0||t<e&&1<n)return X(0,a);var r=X(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(let e=1;e<r.length;e++)r[e]=r[e-1]+n;return r}(t,n,a,r),n=e.makeOutput([t.length],r);return e.typedArrayFromHeap(n).set(t),n}},vs,_s,ks,Is,Ga,Ms,xs,Es,Ds,Ts,Cs,Ps,Os,Ls,Hs,{kernelName:"Select",backendName:"wasm",kernelFunc:function(e){var{inputs:e,backend:t}=e,{condition:e,t:n,e:a}=e,r=t.dataIdMap.get(e.dataId).id,i=t.dataIdMap.get(n.dataId).id,a=t.dataIdMap.get(a.dataId).id,s=t.makeOutput(n.shape,n.dtype),t=t.dataIdMap.get(s.dataId).id,e=e.shape.length,o=n.shape.length,e=0===e||1<e||1===o?1:U(n.shape.slice(1));return Gs(r,i,a,e,t),s},setupFunc:function(e){Gs=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},js,{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){zs=e.wasm.cwrap("Sigmoid",null,["number","number"])},kernelFunc:function(e){var{backend:e,inputs:{x:t}}=e,n=e.dataIdMap.get(t.dataId).id,t=e.makeOutput(t.shape,t.dtype),e=e.dataIdMap.get(t.dataId).id;return 0!==U(t.shape)&&zs(n,e),t}},$s,qs,Vs,Va,es,Ks,{kernelName:"SpaceToBatchND",backendName:"wasm",kernelFunc:function(t){var{inputs:t,backend:e,attrs:n}=t,a=t["x"],{blockShape:t,paddings:n}=n,r=U(t),i=[[0,0]];i.push(...n);for(let e=1+t.length;e<a.shape.length;++e)i.push([0,0]);var n=gs.kernelFunc({inputs:{x:a},backend:e,attrs:{paddings:i,constantValue:0}}),s=ua(n.shape,t,r,!1),o=la(s.length,t.length,!1),t=da(n.shape,t,r,!1),r=R({inputs:{x:n},backend:e,attrs:{shape:s}}),s=wa({inputs:{x:r},backend:e,attrs:{perm:o}}),o=R({inputs:{x:s},backend:e,attrs:{shape:t}});return e.disposeData(n.dataId),e.disposeData(r.dataId),e.disposeData(s.dataId),o}},{kernelName:"SparseFillEmptyRows",backendName:"wasm",setupFunc:function(e){Js=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t}=e,{indices:t,values:n,denseShape:a,defaultValue:r}=t,i=t.shape[0],s=t.shape[1],a=e.readSync(a.dataId)[0],o=[i+a,s],u=e.dataIdMap.get(t.dataId).id,l=e.dataIdMap.get(n.dataId).id,r=e.dataIdMap.get(r.dataId).id,d=e.makeOutput(o,t.dtype),c=e.dataIdMap.get(d.dataId).id,p=e.makeOutput(o.slice(0,1),n.dtype),h=e.dataIdMap.get(p.dataId).id,m=e.makeOutput([a],"bool"),f=e.dataIdMap.get(m.dataId).id,t=e.makeOutput([i],t.dtype),g=e.dataIdMap.get(t.dataId).id,b=e.makeOutput([4],"int32"),y=e.dataIdMap.get(b.dataId).id,u=Js(u,l,S[n.dtype],i,a,s,r,c,h,f,g,y),w=e.readSync(b.dataId);let v;switch(w[0]){case 1:v=`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = `+w[1];break;case 2:v=`indices(${w[1]}, 0) is invalid: ${w[2]} < 0`;break;case 3:v=`indices(${w[1]}, 0) is invalid: ${w[2]} >= `+w[3];break;default:v=""}if(e.disposeData(b.dataId),v)throw e.disposeData(d.dataId),e.disposeData(p.dataId),e.disposeData(m.dataId),e.disposeData(t.dataId),new Error(v);let _=d,k=p;return u!==o[0]&&(_=qa({inputs:{x:d},attrs:{begin:0,size:[u,s]},backend:e}),k=qa({inputs:{x:p},attrs:{begin:0,size:u},backend:e}),e.disposeData(d.dataId),e.disposeData(p.dataId)),[_,k,m,t]}},Zs,{kernelName:"SparseSegmentMean",backendName:"wasm",setupFunc:Ys,kernelFunc:function(e){return eo(e,!0)}},{kernelName:"SparseSegmentSum",backendName:"wasm",setupFunc:Ys,kernelFunc:function(e){return eo(e,!1)}},no,{kernelName:"SplitV",backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t["x"],{numOrSizeSplits:i,axis:s}=n,o=G(s,r.shape)[0],u=function(e,t,n=0){let a=[];if("number"==typeof t)L(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),a=new Array(t).fill(e.shape[n]/t);else{L(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");var r=t.indexOf(-1);if(-1!==r){const a=t.reduce((e,t)=>0<t?e+t:e);t[r]=e.shape[n]-a}L(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),a=t}return a}(r,i,o),l=new Array(r.shape.length).fill(0),d=r.shape.slice();return u.map(e=>{var t=[...d],t=(t[o]=e,qa({inputs:{x:r},attrs:{begin:l,size:t},backend:a}));return l[o]+=e,t})}},ao,ro,io,{kernelName:"Step",backendName:"wasm",setupFunc:function(e){so=e.wasm.cwrap("Step",null,["number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,n=n["alpha"],t=t["x"],a=e.dataIdMap.get(t.dataId).id,r=e.makeOutput(t.shape,t.dtype),e=e.dataIdMap.get(r.dataId).id;return so(a,n,S[t.dtype],e),r}},uo,{kernelName:"StringNGrams",backendName:"wasm",kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{data:t,dataSplits:a}=t,{separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:o,preserveShortSequences:u}=n,t=e.readSync(t.dataId),l=e.readSync(a.dataId),[n,r]=(t=t,l=l,n=n,r=r,i=i,s=s,o=o,u=u,new lo(n,r,i,s,o,u).compute(t,l)),i=e.makeOutput([n.length],"string"),s=(e.dataIdMap.get(i.dataId).stringBytes=n,e.makeOutput(a.shape,"int32"));return e.typedArrayFromHeap(s).set(r),[i,s]}},{kernelName:"StringSplit",backendName:"wasm",kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{input:t,delimiter:a}=t,n=n["skipEmpty"],[t,a,n]=function(t,n,a){const r=t.length,i=[];let s=0,o=0;var u=new Array(r);for(let e=0;e<r;++e){const r=i.length,d=(!function(n,a,r,i){if(n.length)if(0===a.length)for(let e=0;e<n.length;++e)i.push(n.subarray(e,e+1));else{if(1===a.length){const e=a[0];let t=n.indexOf(e);for(;-1!==t;){const a=n.subarray(0,t);r&&0===a.length||i.push(a),t=(n=n.subarray(t+1)).indexOf(e)}return r&&0===n.length||i.push(n)}let t=0;for(let e=0;e<n.length+1;e++)if(e===n.length||-1!==a.indexOf(n[e])){const a=n.subarray(t,e);r&&0===a.length||i.push(a),t=e+1}}}(t[e],n,a,i),i.length-r);u[e]=d,s+=d,o=Math.max(o,d)}const l=j("int32",2*s),d=new Array(s),e=[r,o];let c=0;for(let t=0;t<r;++t)for(let e=0;e<u[t];++e)l[2*c]=t,l[2*c+1]=e,d[c]=i[c],++c;return[l,d,e]}(e.readSync(t.dataId),e.readSync(a.dataId)[0],n),r=a.length,i=e.makeOutput([r,2],"int32"),t=(e.typedArrayFromHeap(i).set(t),e.makeOutput([r],"string")),r=(e.dataIdMap.get(t.dataId).stringBytes=a,e.makeOutput([2],"int32"));return e.typedArrayFromHeap(r).set(n),[i,t,r]}},{kernelName:"StringToHashBucketFast",backendName:"wasm",kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,t=t["input"],n=n["numBuckets"],n=function(t,n){var a=j("int32",t.length);for(let e=0;e<t.length;++e)a[e]=wt(t[e]).modulo(n).getLowBitsUnsigned();return a}(e.readSync(t.dataId),n),t=e.makeOutput(t.shape,"int32");return e.typedArrayFromHeap(t).set(n),t}},co,{kernelName:"Sum",backendName:"wasm",setupFunc:function(e){po=e.wasm.cwrap("Sum",null,["number","number","number","number"])},kernelFunc:function(e){var{backend:t,inputs:e,attrs:n}=e,{axis:n,keepDims:a}=n,e=e["x"],r=t.dataIdMap.get(e.dataId).id;let i=r,s=e;var{transposed:n,axes:e,originalAxes:o,inputWasTransposed:u}=_a(e,n,t);let l=e;if(u){const e=t.dataIdMap.get(n.dataId).id;e!==r&&(s=n,i=e,l=Kn(l.length,s.shape.length))}M("sum",l,s.shape.length);var[e,r]=zn(s.shape,l),r=U(r),d=t.makeOutput(e,s.dtype);if(0!==U(s.shape)){const e=t.dataIdMap.get(d.dataId).id;po(i,r,S[d.dtype],e)}if(u&&t.disposeData(n.dataId),a){const e=$n(d.shape,o);d.shape=e}return d}},ho,mo,{kernelName:$e,backendName:"wasm",setupFunc:function(e){fo=e.wasm.cwrap($e,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){var t,n,a,r,i,s,{backend:e,inputs:o,attrs:u}=e,{tensor:o,indices:l,updates:d}=o,{}=u,u=e.makeOutput(o.shape,o.dtype);return 0!==U(o.shape)&&({sliceRank:t,numUpdates:n,sliceSize:a,strides:s,outputSize:r}=Ln(0,l,o.shape),l=e.dataIdMap.get(l.dataId).id,i=e.dataIdMap.get(d.dataId).id,o=e.dataIdMap.get(o.dataId).id,s=new Uint8Array(new Int32Array(s).buffer),e=e.dataIdMap.get(u.dataId).id,fo(l,i,S[d.dtype],t,n,a,s,r,e,o)),u}},{kernelName:"Tile",backendName:"wasm",setupFunc:function(e){go=e.wasm.cwrap("Tile",null,["number","array","number","array","number","number"])},kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,a=e["x"],e=t.dataIdMap.get(a.dataId).id,r=n["reps"],i=new Array(a.shape.length);for(let e=0;e<i.length;e++)i[e]=a.shape[e]*r[e];var n=new Uint8Array(new Int32Array(a.shape).buffer),s=new Uint8Array(new Int32Array(i).buffer),o=t.makeOutput(i,a.dtype),t=t.dataIdMap.get(o.dataId).id;return go(e,n,a.shape.length,s,i.length,S[o.dtype],t),o}},{kernelName:"TopK",backendName:"wasm",setupFunc:function(e){bo=e.wasm.cwrap("TopK",null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:n})=>{var e=e["x"],{k:n,sorted:a}=n,r=t.dataIdMap.get(e.dataId).id,i=new Uint8Array(new Int32Array(e.shape).buffer),s=e.shape.slice(),o=(s[s.length-1]=n,t.makeOutput(s,e.dtype)),u=t.dataIdMap.get(o.dataId).id,s=t.makeOutput(s,"int32"),t=t.dataIdMap.get(s.dataId).id;return bo(r,i,e.shape.length,S[e.dtype],n,a,u,t),[o,s]}},{kernelName:Ze,backendName:"wasm",setupFunc:function(e){yo=e.wasm.cwrap(Ze,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){var{backend:e,inputs:t,attrs:n}=e,{image:t,transforms:a}=t,{interpolation:n,fillMode:r,fillValue:i,outputShape:s}=n,[o,u,l,d]=t.shape,[s,c]=null!=s?s:[u,l],p=[o,s,c,d],h=new Uint8Array(new Int32Array(H(t.shape)).buffer),m=new Uint8Array(new Int32Array(H(p)).buffer),f=e.makeOutput(p,t.dtype),g=e.dataIdMap.get(f.dataId).id,b=e.dataIdMap.get(t.dataId).id,e=e.dataIdMap.get(a.dataId).id,n="nearest"===n?1:2;let y;switch(r){case"constant":default:y=1;break;case"reflect":y=2;break;case"wrap":y=3;break;case"nearest":y=4}return yo(b,e,1<a.shape[0],o,s,c,d,l,u,h,t.shape.length-1,m,p.length-1,n,y,i,g),f}},va,{kernelName:"Unique",backendName:"wasm",kernelFunc:function(e){var{inputs:e,attrs:t,backend:n}=e,t=t["axis"],e=e["x"],{outputValues:t,outputShape:a,indices:r}=function(a,e,t,r){const i=G(e,t)[0],s=[1,t[0],1];for(let e=0;e<i;e++)s[0]*=t[e];s[1]=t[i];for(let e=i+1;e<t.length;e++)s[2]*=t[e];const o=new Map,u=new Int32Array(t[i]),l=new Bt(s,r,a),d=[],c=1===s[0]&&1===s[2];for(let n=0;n<t[i];n++){let e;if(c)e=a[n].toString();else{const a=[];for(let t=0;t<s[0];t++)for(let e=0;e<s[2];e++)a.push(l.get(t,n,e));e=a.join(",")}const r=o.get(e);if(null!=r)u[n]=r;else{const a=o.size;o.set(e,a),u[n]=a,d.push(n)}}e=s.slice();e[1]=o.size;const p=new Bt(e,r);d.forEach((n,a)=>{for(let t=0;t<s[0];t++)for(let e=0;e<s[2];e++)p.set(l.get(t,n,e),t,a,e)});r=t.slice();return r[i]=e[1],{outputValues:p.values,outputShape:r,indices:u}}(n.readSync(e.dataId),t,e.shape,e.dtype);return[n.makeOutput(a,e.dtype,void 0,t),n.makeOutput([r.length],"int32",void 0,r)]}},{kernelName:"Unpack",backendName:"wasm",kernelFunc:function(e){var{inputs:e,backend:t,attrs:n}=e,a=e["value"];let r=n["axis"];r<0&&(r+=a.shape.length);const i=a.shape[r],s=a.shape.length,o=new Array(s-1);let u=0;for(let e=0;e<s;e++)e!==r&&(o[u++]=a.shape[e]);var l=new Array(i),d=new Array(s).fill(0),c=a.shape.slice();c[r]=1;for(let e=0;e<l.length;e++)l[d[r]=e]=qa({inputs:{x:a},attrs:{begin:d,size:c},backend:t});return l.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:o}))}},{kernelName:Ye,backendName:"wasm",kernelFunc:function(e){var{inputs:{x:e},backend:t}=e,e=t.makeOutput(e.shape,e.dtype);return t.typedArrayFromHeap(e).fill(0),e}}]){wo=void 0;vo=void 0;_o=void 0;ko=void 0;var wo=T;var{kernelName:vo,backendName:_o}=wo,ko=_o+"_"+vo;it.has(ko)&&rt(`The kernel '${vo}' for backend '${_o}' is already registered`),it.set(ko,wo)}const Io=c;Io.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}}),Io.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(Io.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var e=tu(349),un=tu.n(e),So=tu(142),Wn=tu(234),x=tu.n(Wn);const Mo=un()||e,Ao=x()||Wn;class xo extends P{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(Ro),To=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new C(this,g)}write(e,t,n){var a={id:this.dataIdNextNumber++};return this.move(a,e,t,n,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){var t=_t();return e(),{kernelMs:_t()-t}}move(e,t,n,a,r){var i=this.dataIdNextNumber++;if("string"===a){const s=t;void this.dataIdMap.set(e,{id:i,stringBytes:s,shape:n,dtype:a,memoryOffset:null,refCount:r})}else{const s=U(n),o=s*z(a),u=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:a,refCount:r}),this.wasm.tfjs.registerTensor(i,s,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),u)}}async read(e){return this.readSync(e)}readSync(e,t,n){var{memoryOffset:e,dtype:a,shape:r,stringBytes:i}=this.dataIdMap.get(e);if("string"===a)return null!=t&&0!==t||!(null==n||n>=i.length)?i.slice(t,n):i;t=t||0,n=n||U(r);var i=z(a),s=this.wasm.HEAPU8.slice(e+t*i,e+n*i).buffer,o=a;switch(o){case"float32":return new Float32Array(s);case"int32":return new Int32Array(s);case"bool":return new Uint8Array(s);default:throw new Error("Unknown dtype "+o)}}disposeData(e,t=!1){if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&0<n.refCount)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){e=this.dataIdMap.get(e);null!=e&&e.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,a){let r;if(null==n)r=this.write(null!=a?a:null,e,t);else{const a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=U(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){var a=this.wasm.HEAPU8.buffer,r=this.dataIdMap.get(n)["memoryOffset"],i=U(e);switch(t){case"float32":return new Float32Array(a,r,i);case"int32":return new Int32Array(a,r,i);case"bool":return new Uint8Array(a,r,i);default:throw new Error("Unknown dtype "+t)}}}function No(e,t,n){let a="tfjs-backend-wasm.wasm";return e&&t?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=Fo&&null!=Fo[a]?Fo[a]:n+a}let Eo=null,Fo={},Do=!1,Ro=-1,To=null;g.registerBackend("wasm",async()=>{const{wasm:e}=await async function(){const[i,s]=await Promise.all([ne().getAsync("WASM_HAS_SIMD_SUPPORT"),ne().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((t,e)=>{const n={locateFile:(e,t)=>{if(e.endsWith(".worker.js")){const i=So.g.replace(/\n/g,"\\n"),s=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(s)}return e.endsWith(".wasm")?No(i,s,t):t+e}};let a,r=!1;n.onAbort=()=>{r||Do||(Do=!0,e({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},s&&i&&null==Eo?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Mo.toString()],{type:"text/javascript"}),a=Mo(n)):a=Ao(n),a.then(e=>{r=!0,Do=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},t({wasm:e})}).catch(e)})}();return new xo(e)},2);const Bo=E;function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Po(e,t){var n;if(e)return"string"==typeof e?Co(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(e){l=!0,r=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return o}}(e,t)||Po(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e){e=function(e){if("object"!==Wo(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==Wo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===Wo(e)?e:String(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Lo(a.key),a)}}function Ho(e,t,n){(t=Lo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}D=function e(){var t=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");Ho(this,"get",function(e){return t.palette[Math.floor(e)%t.n]}),this.palette=["#FF3838","#FF9D97","#FF701F","#FFB21D","#CFD231","#48F90A","#92CC17","#3DDB86","#1A9334","#00D4BB","#2C99A8","#00C2FF","#344593","#6473FF","#0018EC","#8438FF","#520085","#CB38FF","#FF95C8","#FF37C7"],this.n=this.palette.length},Go&&Uo(D.prototype,Go),jo&&Uo(D,jo),Object.defineProperty(D,"prototype",{writable:!1});var Go,jo,zo=D;Ho(zo,"hexToRgba",function(e,t){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null});const $o=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]');var qo,Vo,Ko,Jo,Xo=$o.length,Zo=new zo,Qo=(Ko=B(N().mark(function e(t,n,a){var r,m,f,g,b,i,y,w,s,o,u,l,d,c,p,v,_,k,I,h,S,M,A,x=arguments;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=3<x.length&&void 0!==x[3]?x[3]:function(){},M=n.inputShape.slice(1,3),M=Oo(M,2),m=M[0],f=M[1],M=n.outputShape[1].slice(1),M=Oo(M,3),g=M[0],b=M[1],i=M[2],E.engine().startScope(),M=function(r,i,s){var o,u;return[E.tidy(function(){var e=E.browser.fromPixels(r),t=Oo(e.shape.slice(0,2),2),n=t[0],t=t[1],a=Math.max(t,n),e=e.pad([[0,a-n],[0,a-t],[0,0]]);return o=a/t,u=a/n,E.image.resizeBilinear(e,[i,s]).div(255).expandDims(0)}),o,u]}(t,f,m),M=Oo(M,3),A=M[0],y=M[1],w=M[2],s=n.net.execute(A),o=E.tidy(function(){return s[0].transpose([0,2,1]).squeeze()}),u=E.tidy(function(){return s[1].transpose([0,3,1,2]).squeeze()}),l=E.tidy(function(){var e=o.slice([0,2],[-1,1]),t=o.slice([0,3],[-1,1]),n=E.sub(o.slice([0,0],[-1,1]),E.div(e,2)),a=E.sub(o.slice([0,1],[-1,1]),E.div(t,2));return E.concat([a,n,E.add(a,t),E.add(n,e)],1).squeeze()}),M=E.tidy(function(){var e=o.slice([0,4],[-1,Xo]).squeeze();return[e.max(1),e.argMax(1)]}),A=Oo(M,2),d=A[0],c=A[1],e.next=12,E.image.nonMaxSuppressionAsync(l,d,500,.45,.2);case 12:p=e.sent,v=E.tidy(function(){return E.concat([l.gather(p,0),d.gather(p,0).expandDims(1),c.gather(p,0).expandDims(1)],1)}),_=E.tidy(function(){return o.slice([0,4+Xo],[-1,i]).squeeze().gather(p,0).matMul(u.reshape([i,-1])).reshape([p.shape[0],g,b])}),k=[],I=E.zeros([m,f,4]),h=N().mark(function e(t){var n,a,r,i,s,o,u,l,d,c,p,h;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=v.slice([t,0],[1,6]),o=n.dataSync(),o=Oo(o,6),a=o[0],r=o[1],c=o[2],i=o[3],s=o[4],o=o[5],u=Zo.get(o),l=[Math.floor(a*g/m),Math.floor(r*b/f),Math.round((c-a)*g/m),Math.round((i-r)*b/f)],d=[Math.floor(a*w),Math.floor(r*y),Math.round((c-a)*w),Math.round((i-r)*y)],c=E.tidy(function(){return _.slice([t,0<=l[0]?l[0]:0,0<=l[1]?l[1]:0],[1,l[0]+l[2]<=g?l[2]:g-l[0],l[1]+l[3]<=b?l[3]:b-l[1]]).squeeze().expandDims(-1)}),p=E.image.resizeBilinear(c,[d[2],d[3]]),h=E.tidy(function(){return p.pad([[d[0],m-(d[0]+d[2])],[d[1],f-(d[1]+d[3])],[0,0]]).less(.5)}),I=E.tidy(function(){var e,t=I.where(h,[].concat(function(e){if(Array.isArray(e))return Co(e)}(e=zo.hexToRgba(u))||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||Po(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[150]));return I.dispose(),t}),s>(window.nWscore||.6)&&window.g_oWarObj&&window.g_oWarObj[$o[o]]&&plWarn(),k.push({box:d,score:s,klass:o,label:$o[o],color:u}),E.dispose([n,c,p,h]);case 12:case"end":return e.stop()}},e)}),S=0;case 19:if(S<v.shape[0])return e.delegateYield(h(S),"t0",21);e.next=24;break;case 21:S++,e.next=19;break;case 24:return e.t1=ImageData,e.t2=Uint8ClampedArray,e.next=28,I.data();case 28:e.t3=e.sent,e.t4=new e.t2(e.t3),e.t5=m,e.t6=f,M=new e.t1(e.t4,e.t5,e.t6),(A=a.getContext("2d")).clearRect(0,0,A.canvas.width,A.canvas.height),A.putImageData(M,0,0),function(s,e){var o="".concat(Math.max(Math.round(Math.max(s.canvas.width,s.canvas.height)/40),14),"px Arial");s.font=o,s.textBaseline="top",e.forEach(function(e){var t=(100*e.score).toFixed(1),n=Oo(e.box,4),a=n[0],r=n[1],i=n[2],n=n[3],n=(s.strokeStyle=e.color,s.lineWidth=1,s.strokeRect(r,a,n,i),s.fillStyle=e.color,s.measureText(e.label+" - "+t+"%").width),i=parseInt(o,10),a=a-(i+s.lineWidth);s.fillRect(r-1,a<0?0:a,n+s.lineWidth,i+s.lineWidth),s.fillStyle="#ffffff",s.fillText(e.label+" - "+t+"%",r-1,a<0?0:a)})}(A,k),E.dispose([s,o,l,d,c,p]),r(),E.engine().endScope();case 40:case"end":return e.stop()}},e)})),function(e,t,n){return Ko.apply(this,arguments)}),Yo=window.x8md||"yolov8n-seg";window.bEaV8&&(Jo=function e(){var n,a,r,t,i;(Vo=document.getElementById("webcam"))&&window.ov8canvas?"video"==Vo.tagName.toLowerCase()&&(n=Vo,a=qo,r=window.ov8canvas,t=B(N().mark(function e(){var t;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n.videoWidth&&null===n.srcObject)return(t=r.getContext("2d")).clearRect(0,0,t.canvas.width,t.canvas.height),e.abrupt("return");e.next=4;break;case 4:Qo(n,a,r,function(){window.bEaV8&&requestAnimationFrame(i)});case 5:case"end":return e.stop()}},e)})),(i=function(){return t.apply(this,arguments)})()):window.bEaV8&&setTimeout(e,1e3)},window.detectImgV8=Jo,B(N().mark(function e(){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Bo.ready().then(B(N().mark(function e(){var t,n,a,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.labels=$o,t=$("#gInfo"),e.next=4,Bo.loadGraphModel("https://unpkg.com/web-ai-51pwn@latest/dist/".concat(Yo,"_web_model/model.json"),{onProgress:function(e){t.text("Loading  model... ".concat((100*e).toFixed(2),"%"))}});case 4:r=e.sent,t.text(Bo.getBackend()+" backend loaded."),$("#its").click(),n=Bo.ones(r.inputs[0].shape),a=r.execute(n),qo={net:r,inputShape:r.inputs[0].shape,outputShape:a.map(function(e){return e.shape})},Bo.dispose([a,n]),$("body").append("<canvas id='v8canvas'></canvas>"),window.ov8canvas=document.getElementById("v8canvas"),(r=window.ov8canvas)&&(r.width=qo.inputShape[1],r.height=qo.inputShape[2]),Jo();case 16:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e)}))())})()})();